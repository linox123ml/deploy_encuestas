var j=Object.defineProperty;var O=(n,o,s)=>o in n?j(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s;var $=(n,o,s)=>(O(n,typeof o!="symbol"?o+"":o,s),s);import{M as U,c as h,r as y,o as c,a as m,b as t,t as g,e as p,F as w,d as A,k as P,u as E,I as L,j as k,w as D,N as z,g as T,S as G}from"./index-2d42e2a7.js";import{_ as B}from"./ButtonPrimary-23d09a12.js";import{_ as Q}from"./IndexSurvey-375f447b.js";import{_ as N,a as S}from"./OneSelection-9ad27599.js";import{_ as x}from"./HAutoComplete-c62d6e19.js";import{_ as R}from"./InputForm-fa381663.js";import"./use-outside-click-44dd2392.js";import"./use-tracked-pointer-c378f17c.js";import"./use-tree-walker-4fa1b267.js";import"./hidden-2964515c.js";import"./use-controllable-ebfc6578.js";import"./transition-d0308cd3.js";class C{constructor(){$(this,"getDepartamentos",async()=>(await U.get("http://38.43.133.27/API/lugar/")).data);$(this,"getProvincias",async o=>(await U.get(`http://38.43.133.27/API/provincias/${o}/`)).data);$(this,"getDistritos",async o=>(await U.get(`http://38.43.133.27/API/distritos/${o}/`)).data)}}const M={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},H={class:"grid grid-cols-3 gap-x-5"},J={class:"col-span-3"},K={__name:"UbigeoOtherForm",props:{modelValue:[String,Number],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(n,{emit:o}){const s=n,v=new C,_=h({get:()=>s.modelValue,set:i=>o("update:modelValue",i)}),f=y([]),V=y([]),u=y([]),a=y({departamento:null,provincia:null,distrito:null}),e=async i=>{a.value.provincia=null,V.value=[],a.value.distrito=null,u.value=[],V.value=await v.getProvincias(i.id),o("update:modelValue",null)},l=async i=>{o("update:modelValue",null),u.value=[],a.value.distrito=null,u.value=await v.getDistritos(i.id)};return(async()=>{f.value=await v.getDepartamentos()})(),(i,r)=>(c(),m(w,null,[t("label",M,g(n.question.statement),1),t("div",H,[t("div",null,[p(x,{placeholder:"Departamento",error:n.error,items:f.value,itemTitle:"name",modelValue:a.value.departamento,"onUpdate:modelValue":[r[0]||(r[0]=d=>a.value.departamento=d),e]},null,8,["error","items","modelValue"])]),t("div",null,[p(x,{error:n.error,items:V.value,itemTitle:"name",placeholder:"Provincia",modelValue:a.value.provincia,"onUpdate:modelValue":[r[1]||(r[1]=d=>a.value.provincia=d),l]},null,8,["error","items","modelValue"])]),t("div",null,[p(x,{error:n.error,items:u.value,itemTitle:"name",placeholder:"Distrito",modelValue:a.value.distrito,"onUpdate:modelValue":[r[2]||(r[2]=d=>a.value.distrito=d),r[3]||(r[3]=d=>_.value=d.id)]},null,8,["error","items","modelValue"])]),t("div",J,[p(R,{modelValue:n.question.other,"onUpdate:modelValue":r[4]||(r[4]=d=>n.question.other=d),label:"Dirección"},null,8,["modelValue"])])])],64))}},W={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},X={class:"grid grid-cols-3 gap-5"},Y={__name:"UbigeoForm",props:{modelValue:[String,Number],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(n,{emit:o}){const s=n,v=new C,_=h({get:()=>s.modelValue,set:i=>o("update:modelValue",i)}),f=y([]),V=y([]),u=y([]),a=y({departamento:null,provincia:null,distrito:null}),e=async i=>{a.value.provincia=null,V.value=[],a.value.distrito=null,u.value=[],V.value=await v.getProvincias(i.id),o("update:modelValue",null)},l=async i=>{o("update:modelValue",null),u.value=[],a.value.distrito=null,u.value=await v.getDistritos(i.id)};return(async()=>{f.value=await v.getDepartamentos()})(),(i,r)=>(c(),m(w,null,[t("label",W,g(n.question.statement),1),t("div",X,[t("div",null,[p(x,{placeholder:"Departamento",error:n.error,items:f.value,itemTitle:"name",modelValue:a.value.departamento,"onUpdate:modelValue":[r[0]||(r[0]=d=>a.value.departamento=d),e]},null,8,["error","items","modelValue"])]),t("div",null,[p(x,{error:n.error,items:V.value,itemTitle:"name",placeholder:"Provincia",modelValue:a.value.provincia,"onUpdate:modelValue":[r[1]||(r[1]=d=>a.value.provincia=d),l]},null,8,["error","items","modelValue"])]),t("div",null,[p(x,{error:n.error,items:u.value,itemTitle:"name",placeholder:"Distrito",modelValue:a.value.distrito,"onUpdate:modelValue":[r[2]||(r[2]=d=>a.value.distrito=d),r[3]||(r[3]=d=>_.value=d.id)]},null,8,["error","items","modelValue"])])])],64))}},Z={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},q={class:"col-span-2 rounded-lg p-4"},ee={key:0,class:"mb-4"},te={class:"w-full text-end"},le={class:"text-xs text-red-600"},ae={key:1,class:"mb-4"},se={class:"w-full text-end"},oe={class:"text-xs text-red-600"},re={key:2,class:"mb-4"},ne={class:"w-full text-end"},ie={class:"text-xs text-red-600"},de={key:3,class:"mb-4"},ue={class:"w-full text-end"},ce={class:"text-xs text-red-600"},me={key:4,class:"mb-4"},pe={class:"w-full text-end"},ve={class:"text-xs text-red-600"},_e={key:5,class:"mb-4"},Ve={class:"w-full text-end"},ge={class:"text-xs text-red-600"},fe={key:6,class:"mb-4"},ye={class:"w-full text-end"},he={class:"text-xs text-red-600"},xe=t("div",null,null,-1),we={class:"flex justify-end mt-4"},be={__name:"Form",props:{questions:Array},setup(n){const o=n,s=h(()=>o.questions),v=y(!0),_=(u,a)=>{let e=!0;e=f(u,a),v.value=e},f=(u,a)=>{var e=null;return s.value.map(l=>{l.id==a.id&&(u===null||u===""?(l.error="Obligatorio",e=!1):(delete l.error,e=!0))}),e},V=()=>{v.value=!0,s.value.forEach(u=>{u.answer?delete u.error:(u.error="Obligatorio",v.value=!1)}),v.value&&console.log("Guardando ...")};return(u,a)=>(c(),m("div",Z,[t("div",q,[(c(!0),m(w,null,A(s.value,e=>(c(),m("div",null,[t("ul",null,[e.isDependent===null?(c(),m(w,{key:0},[e.type==="0"?(c(),m("li",ee,[t("div",null,[p(N,{question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)]},null,8,["question","modelValue","onUpdate:modelValue"]),t("div",te,[t("span",le,g(e.error),1)])])])):e.type==="1"?(c(),m("li",ae,[t("div",null,[p(S,{question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)]},null,8,["question","modelValue","onUpdate:modelValue"]),t("div",se,[t("span",oe,g(e.error),1)])])])):e.type==="2"?(c(),m("li",re,[p(S,{type:"date",question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)]},null,8,["question","modelValue","onUpdate:modelValue"]),t("div",ne,[t("span",ie,g(e.error),1)])])):e.type==="3"?(c(),m("li",de,[p(S,{type:"number",question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)]},null,8,["question","modelValue","onUpdate:modelValue"]),t("div",ue,[t("span",ce,g(e.error),1)])])):e.type==="10"?(c(),m("li",me,[p(Y,{question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),t("div",pe,[t("span",ve,g(e.error),1)])])):e.type==="11"?(c(),m("li",_e,[p(K,{question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),t("div",Ve,[t("span",ge,g(e.error),1)])])):e.type==="0"?(c(),m("li",fe,[t("div",null,[p(N,{question:e,modelValue:e.answer,"onUpdate:modelValue":[l=>e.answer=l,l=>_(e.answer,e)]},null,8,["question","modelValue","onUpdate:modelValue"]),t("div",ye,[t("span",he,g(e.error),1)])]),xe])):P("",!0)],64)):P("",!0)])]))),256)),t("div",we,[p(B,{title:"Guardar sección",isDisabled:!v.value,onClick:V},null,8,["isDisabled"])])])]))}},$e={class:"grid grid-cols-4 gap-4"},Ue=t("div",{class:"col-span-4 rounded-lg bg-blue-100 p-4 text-blue-700 mb-1 text-sm"}," ¡Lea y responda! detenidamente todas las preguntas planteadas. Estudiante que no declare correctamente tendrá la sanción respectiva. ",-1),ke={class:"col-span-1"},De={class:"col-span-3 rounded-lg bg-white p-4 shadow-lg"},Se={class:""},Pe={class:"text-lg font-semibold mb-3 uppercase"},Te={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},Re={__name:"survey",setup(n){const o=new G,s=E(),v=L(),_=h(()=>s.sections),f=h(()=>[...s.questions]),V=h(()=>s.currentSurvey),u=h(()=>s.currentTopic),a=l=>{s.topics.map(b=>{b.id===s.currentTopic.id&&b.sections.map(async i=>{if(i.id==l)if(i.questions)s.questions=i.questions;else{let d=await o.getQuestions(i.id);d.sort((F,I)=>F.ordinal-I.ordinal),i.questions=d,s.questions=d}})})};return(()=>{s.setCurrentSurvey(v.params.id)})(),(l,b)=>(c(),k(z,null,{"header.title":D(()=>[T(g(V.value.title),1)]),"header.subtitle":D(()=>[T(g(V.value.subtitle),1)]),default:D(()=>{var i;return[t("div",$e,[Ue,t("div",ke,[p(Q)]),t("div",De,[t("div",Se,[t("h3",Pe,g(u.value.title),1)]),_.value.length==0?(c(),m("h4",Te," no hay secciones ")):(c(),m(w,{key:1},[(c(!0),m(w,null,A(_.value,r=>(c(),k(B,{key:r.id,title:r.title,onClick:d=>a(r.id),class:"me-3"},null,8,["title","onClick"]))),128)),((i=f.value)==null?void 0:i.length)>0?(c(),k(be,{key:0,questions:f.value},null,8,["questions"])):P("",!0)],64))])])]}),_:1}))}};export{Re as default};
