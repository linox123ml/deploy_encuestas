import{u as F,o as R,F as ie,e as re,l as G,K as se,H as q,f as le,t as W,a as Q,p as de,O as pe,b as w}from"./use-outside-click-d63191c5.js";import{x as ve,a as C,b as ce,u as be}from"./use-tracked-pointer-0526ca0f.js";import{p as fe}from"./use-tree-walker-e97a73f0.js";import{f as me,a as xe}from"./hidden-a6a792d1.js";import{d as ge,e as ye,r as Oe,a as he}from"./use-controllable-49e82873.js";import{r as Se,n as Re,S as Ce}from"./transition-040f32c0.js";import{q as K,r as I,c as g,U as x,z as Ie,s as $,y as Y,x as ee,F as ne,p as Z,v as Ve,A as Te,D as N,o as _,j as te,w as M,b as U,t as ae,e as L,n as z,l as k,V as J,a as X,k as oe,d as we}from"./index-8e1c7954.js";function Pe(a,O){return a===O}var ke=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(ke||{}),De=(a=>(a[a.Single=0]="Single",a[a.Multi=1]="Multi",a))(De||{}),Be=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(Be||{});let ue=Symbol("ComboboxContext");function H(a){let O=Te(ue,null);if(O===null){let h=new Error(`<${a} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,H),h}return O}let Ee=K({name:"Combobox",emits:{"update:modelValue":a=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Pe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:O,attrs:h,emit:P}){let e=I(1),t=I(null),d=I(null),S=I(null),u=I(null),l=I({static:!1,hold:!1}),c=I([]),b=I(null),V=I(1),T=I(!1);function A(n=s=>s){let s=b.value!==null?c.value[b.value]:null,v=pe(n(c.value.slice()),f=>R(f.dataRef.domRef)),i=s?v.indexOf(s):null;return i===-1&&(i=null),{options:v,activeOptionIndex:i}}let D=g(()=>a.multiple?1:0),o=g(()=>a.nullable),[p,m]=ge(g(()=>a.modelValue===void 0?F(D.value,{[1]:[],[0]:void 0}):a.modelValue),n=>P("update:modelValue",n),g(()=>a.defaultValue)),r={comboboxState:e,value:p,mode:D,compare(n,s){if(typeof a.by=="string"){let v=a.by;return(n==null?void 0:n[v])===(s==null?void 0:s[v])}return a.by(n,s)},defaultValue:g(()=>a.defaultValue),nullable:o,inputRef:d,labelRef:t,buttonRef:S,optionsRef:u,disabled:g(()=>a.disabled),options:c,change(n){m(n)},activeOptionIndex:g(()=>{if(T.value&&b.value===null&&c.value.length>0){let n=c.value.findIndex(s=>!s.dataRef.disabled);n!==-1&&(b.value=n)}return b.value}),activationTrigger:V,optionsPropsRef:l,closeCombobox(){T.value=!1,!a.disabled&&e.value!==1&&(e.value=1,b.value=null)},openCombobox(){if(T.value=!0,a.disabled||e.value===0)return;let n=c.value.findIndex(s=>{let v=x(s.dataRef.value);return F(D.value,{[0]:()=>r.compare(x(r.value.value),x(v)),[1]:()=>x(r.value.value).some(i=>r.compare(x(i),x(v)))})});n!==-1&&(b.value=n),e.value=0},goToOption(n,s,v){if(T.value=!1,a.disabled||u.value&&!l.value.static&&e.value===1)return;let i=A();if(i.activeOptionIndex===null){let y=i.options.findIndex(j=>!j.dataRef.disabled);y!==-1&&(i.activeOptionIndex=y)}let f=ve(n===C.Specific?{focus:C.Specific,id:s}:{focus:n},{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.disabled});b.value=f,V.value=v??1,c.value=i.options},selectOption(n){let s=c.value.find(i=>i.id===n);if(!s)return;let{dataRef:v}=s;m(F(D.value,{[0]:()=>v.value,[1]:()=>{let i=x(r.value.value).slice(),f=x(v.value),y=i.findIndex(j=>r.compare(f,x(j)));return y===-1?i.push(f):i.splice(y,1),i}}))},selectActiveOption(){if(r.activeOptionIndex.value===null)return;let{dataRef:n,id:s}=c.value[r.activeOptionIndex.value];m(F(D.value,{[0]:()=>n.value,[1]:()=>{let v=x(r.value.value).slice(),i=x(n.value),f=v.findIndex(y=>r.compare(i,x(y)));return f===-1?v.push(i):v.splice(f,1),v}})),r.goToOption(C.Specific,s)},registerOption(n,s){let v={id:n,dataRef:s},i=A(f=>[...f,v]);if(b.value===null){let f=s.value.value;F(D.value,{[0]:()=>r.compare(x(r.value.value),x(f)),[1]:()=>x(r.value.value).some(y=>r.compare(x(y),x(f)))})&&(i.activeOptionIndex=i.options.indexOf(v))}c.value=i.options,b.value=i.activeOptionIndex,V.value=1,i.options.some(f=>!R(f.dataRef.domRef))&&requestAnimationFrame(()=>{let f=A();c.value=f.options,b.value=f.activeOptionIndex})},unregisterOption(n){var s;r.activeOptionIndex.value!==null&&((s=r.options.value[r.activeOptionIndex.value])==null?void 0:s.id)===n&&(T.value=!0);let v=A(i=>{let f=i.findIndex(y=>y.id===n);return f!==-1&&i.splice(f,1),i});c.value=v.options,b.value=v.activeOptionIndex,V.value=1}};ie([d,S,u],()=>r.closeCombobox(),g(()=>e.value===0)),Ie(ue,r),re(g(()=>F(e.value,{[0]:G.Open,[1]:G.Closed})));let B=g(()=>r.activeOptionIndex.value===null?null:c.value[r.activeOptionIndex.value].dataRef.value),E=g(()=>{var n;return(n=R(d))==null?void 0:n.closest("form")});return $(()=>{Y([E],()=>{if(!E.value||a.defaultValue===void 0)return;function n(){r.change(a.defaultValue)}return E.value.addEventListener("reset",n),()=>{var s;(s=E.value)==null||s.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,disabled:s,form:v,...i}=a,f={open:e.value===0,disabled:s,activeIndex:r.activeOptionIndex.value,activeOption:B.value,value:p.value};return ee(ne,[...n!=null&&p.value!=null?ye({[n]:p.value}).map(([y,j])=>ee(me,se({features:xe.Hidden,key:y,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:v,name:y,value:j}))):[],q({theirProps:{...h,...le(i,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:f,slots:O,attrs:h,name:"Combobox"})])}}}),Ae=K({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${W()}`}},setup(a,{attrs:O,slots:h,expose:P}){let e=H("ComboboxButton");P({el:e.buttonRef,$el:e.buttonRef});function t(u){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(u.preventDefault(),e.openCombobox()),N(()=>{var l;return(l=R(e.inputRef))==null?void 0:l.focus({preventScroll:!0})}))}function d(u){switch(u.key){case w.ArrowDown:u.preventDefault(),u.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),N(()=>{var l;return(l=e.inputRef.value)==null?void 0:l.focus({preventScroll:!0})});return;case w.ArrowUp:u.preventDefault(),u.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),N(()=>{e.value.value||e.goToOption(C.Last)})),N(()=>{var l;return(l=e.inputRef.value)==null?void 0:l.focus({preventScroll:!0})});return;case w.Escape:if(e.comboboxState.value!==0)return;u.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&u.stopPropagation(),e.closeCombobox(),N(()=>{var l;return(l=e.inputRef.value)==null?void 0:l.focus({preventScroll:!0})});return}}let S=ce(g(()=>({as:a.as,type:O.type})),e.buttonRef);return()=>{var u,l;let c={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:b,...V}=a,T={ref:e.buttonRef,id:b,type:S.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(u=R(e.optionsRef))==null?void 0:u.id,"aria-expanded":e.disabled.value?void 0:e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=R(e.labelRef))==null?void 0:l.id,b].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onClick:t};return q({ourProps:T,theirProps:V,slot:c,attrs:O,slots:h,name:"ComboboxButton"})}}}),Fe=K({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${W()}`}},emits:{change:a=>!0},setup(a,{emit:O,attrs:h,slots:P,expose:e}){let t=H("ComboboxInput"),d={value:!1};e({el:t.inputRef,$el:t.inputRef});let S=g(()=>{var o;let p=t.value.value;return R(t.inputRef)?typeof a.displayValue<"u"&&p!==void 0?(o=a.displayValue(p))!=null?o:"":typeof p=="string"?p:"":""});$(()=>{Y([S,t.comboboxState],([o,p],[m,r])=>{if(d.value)return;let B=R(t.inputRef);B&&(r===0&&p===1||o!==m)&&(B.value=o)},{immediate:!0}),Y([t.comboboxState],([o],[p])=>{if(o===0&&p===1){let m=R(t.inputRef);if(!m)return;let r=m.value,{selectionStart:B,selectionEnd:E,selectionDirection:n}=m;m.value="",m.value=r,n!==null?m.setSelectionRange(B,E,n):m.setSelectionRange(B,E)}})});let u=I(!1),l=I(null);function c(){u.value=!0}function b(){Se().nextFrame(()=>{u.value=!1,l.value&&(t.openCombobox(),O("change",l.value),l.value=null)})}function V(o){switch(d.value=!0,o.key){case w.Backspace:case w.Delete:if(t.mode.value!==0||!t.nullable.value)return;let p=o.currentTarget;requestAnimationFrame(()=>{if(p.value===""){t.change(null);let m=R(t.optionsRef);m&&(m.scrollTop=0),t.goToOption(C.Nothing)}});break;case w.Enter:if(d.value=!1,t.comboboxState.value!==0||u.value)return;if(o.preventDefault(),o.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case w.ArrowDown:return d.value=!1,o.preventDefault(),o.stopPropagation(),F(t.comboboxState.value,{[0]:()=>t.goToOption(C.Next),[1]:()=>t.openCombobox()});case w.ArrowUp:return d.value=!1,o.preventDefault(),o.stopPropagation(),F(t.comboboxState.value,{[0]:()=>t.goToOption(C.Previous),[1]:()=>{t.openCombobox(),N(()=>{t.value.value||t.goToOption(C.Last)})}});case w.Home:if(o.shiftKey)break;return d.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(C.First);case w.PageUp:return d.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(C.First);case w.End:if(o.shiftKey)break;return d.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(C.Last);case w.PageDown:return d.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(C.Last);case w.Escape:if(d.value=!1,t.comboboxState.value!==0)return;o.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&o.stopPropagation(),t.closeCombobox();break;case w.Tab:if(d.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function T(o){if(u.value){l.value=o;return}t.openCombobox(),O("change",o)}function A(){d.value=!1}let D=g(()=>{var o,p,m,r;return(r=(m=(p=a.defaultValue)!=null?p:t.defaultValue.value!==void 0?(o=a.displayValue)==null?void 0:o.call(a,t.defaultValue.value):null)!=null?m:t.defaultValue.value)!=null?r:""});return()=>{var o,p,m,r,B,E;let n={open:t.comboboxState.value===0},{id:s,displayValue:v,onChange:i,...f}=a,y={"aria-controls":(o=t.optionsRef.value)==null?void 0:o.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(p=t.options.value[t.activeOptionIndex.value])==null?void 0:p.id,"aria-labelledby":(B=(m=R(t.labelRef))==null?void 0:m.id)!=null?B:(r=R(t.buttonRef))==null?void 0:r.id,"aria-autocomplete":"list",id:s,onCompositionstart:c,onCompositionend:b,onKeydown:V,onInput:T,onBlur:A,role:"combobox",type:(E=h.type)!=null?E:"text",tabIndex:0,ref:t.inputRef,defaultValue:D.value,disabled:t.disabled.value===!0?!0:void 0};return q({ourProps:y,theirProps:f,slot:n,attrs:h,slots:P,features:Q.RenderStrategy|Q.Static,name:"ComboboxInput"})}}}),Ne=K({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(a,{attrs:O,slots:h,expose:P}){let e=H("ComboboxOptions"),t=`headlessui-combobox-options-${W()}`;P({el:e.optionsRef,$el:e.optionsRef}),Z(()=>{e.optionsPropsRef.value.static=a.static}),Z(()=>{e.optionsPropsRef.value.hold=a.hold});let d=de(),S=g(()=>d!==null?(d.value&G.Open)===G.Open:e.comboboxState.value===0);return fe({container:g(()=>R(e.optionsRef)),enabled:g(()=>e.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}}),()=>{var u,l,c;let b={open:e.comboboxState.value===0},V={"aria-labelledby":(c=(u=R(e.labelRef))==null?void 0:u.id)!=null?c:(l=R(e.buttonRef))==null?void 0:l.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},T=le(a,["hold"]);return q({ourProps:V,theirProps:T,slot:b,attrs:O,slots:h,features:Q.RenderStrategy|Q.Static,visible:S.value,name:"ComboboxOptions"})}}}),Le=K({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(a,{slots:O,attrs:h,expose:P}){let e=H("ComboboxOption"),t=`headlessui-combobox-option-${W()}`,d=I(null);P({el:d,$el:d});let S=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),u=g(()=>F(e.mode.value,{[0]:()=>e.compare(x(e.value.value),x(a.value)),[1]:()=>x(e.value.value).some(o=>e.compare(x(o),x(a.value)))})),l=g(()=>({disabled:a.disabled,value:a.value,domRef:d}));$(()=>e.registerOption(t,l)),Ve(()=>e.unregisterOption(t)),Z(()=>{e.comboboxState.value===0&&S.value&&e.activationTrigger.value!==0&&N(()=>{var o,p;return(p=(o=R(d))==null?void 0:o.scrollIntoView)==null?void 0:p.call(o,{block:"nearest"})})});function c(o){if(a.disabled)return o.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),Re()||requestAnimationFrame(()=>{var p;return(p=R(e.inputRef))==null?void 0:p.focus()})}function b(){if(a.disabled)return e.goToOption(C.Nothing);e.goToOption(C.Specific,t)}let V=be();function T(o){V.update(o)}function A(o){V.wasMoved(o)&&(a.disabled||S.value||e.goToOption(C.Specific,t,0))}function D(o){V.wasMoved(o)&&(a.disabled||S.value&&(e.optionsPropsRef.value.hold||e.goToOption(C.Nothing)))}return()=>{let{disabled:o}=a,p={active:S.value,selected:u.value,disabled:o},m={id:t,ref:d,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onClick:c,onFocus:b,onPointerenter:T,onMouseenter:T,onPointermove:A,onMousemove:A,onPointerleave:D,onMouseleave:D};return q({ourProps:m,theirProps:a,slot:p,attrs:h,slots:O,name:"ComboboxOption"})}}});const je={class:"relative mt-1"},_e={class:"block text-sm font-medium leading-6 text-gray-900"},Me={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},Ue={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},We={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String}},emits:["update:modelValue"],setup(a,{emit:O}){const h=a,P=g({get:()=>h.modelValue,set:S=>O("update:modelValue",S)});let e=I(""),t=I(!1),d=g(()=>e.value===""?[]:h.items.filter(S=>S[`${h.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(e.value.toLowerCase().replace(/\s+/g,""))));return(S,u)=>(_(),te(k(Ee),{modelValue:P.value,"onUpdate:modelValue":u[2]||(u[2]=l=>P.value=l)},{default:M(()=>[U("div",je,[U("label",_e,ae(a.label),1),U("div",Me,[L(k(Fe),{class:z([a.error&&k(t)&&!P.value?"ring-red-600":"ring-gray-300","w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:l=>l==null?void 0:l[`${this.itemTitle}`],onChange:u[0]||(u[0]=l=>{l.target.value==""?J(t)?t.value=!0:t=!0:J(t)?t.value=!1:t=!1,J(e)?e.value=l.target.value:e=l.target.value}),placeholder:a.placeholder},null,8,["class","displayValue","placeholder"]),L(k(Ae),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:M(()=>[L(k(Oe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),L(k(Ce),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:u[1]||(u[1]=l=>J(e)?e.value="":e="")},{default:M(()=>[L(k(Ne),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:M(()=>[k(d).length===0&&k(e)!==""?(_(),X("div",Ue," Sin datos ")):oe("",!0),(_(!0),X(ne,null,we(k(d),l=>(_(),te(k(Le),{as:"template",key:l[`${this.itemValue}`],value:l},{default:M(({selected:c,active:b})=>[U("li",{class:z(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":b,"text-gray-900":!b}])},[U("span",{class:z(["block truncate",{"font-medium":c,"font-normal":!c}])},ae(l[`${this.itemTitle}`]),3),c?(_(),X("span",{key:0,class:z(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":b,"text-teal-600":!b}])},[L(k(he),{class:"h-5 w-5","aria-hidden":"true"})],2)):oe("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};export{We as _};
