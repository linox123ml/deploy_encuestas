var fe=Object.defineProperty;var be=(e,r,p)=>r in e?fe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[r]=p;var q=(e,r,p)=>(be(e,typeof r!="symbol"?r+"":r,p),p);import{d as Q,r as C,b as S,M as P,p as ge,e as ie,B as ne,A as ue,F as M,w as re,f as xe,n as z,i as ye,o as _,c as R,m as se,G as he,O as Ve,a as c,t as A,q as H,j as $,g as Z,h as N,u as E,Q as ee,x as K,R as oe,k as _e,I as Se,y as we,S as Oe,V as Re,W as Ce,P as de,X as $e}from"./index-4f803be0.js";import{_ as Ie}from"./IndexSurvey-942e7989.js";import{d as ke,e as Pe,_ as Te,r as De,b as Ue,a as Ae}from"./HSelect-58fc7e39.js";import{u as L,o as D,F as Ee,c as Be,l as te,K as Fe,H as X,f as pe,t as le,N as ae,p as je,O as Ne,a as F}from"./use-outside-click-51383423.js";import{x as Le,a as U,b as Me,u as ze}from"./use-text-value-eb9f6c09.js";import{p as Ke}from"./use-tree-walker-b67187f1.js";import{f as Ge,a as He,_ as G}from"./InputForm-649ef07d.js";import{r as Ze,n as Je,S as We}from"./transition-82e62509.js";function Qe(e,r){return e===r}var Xe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xe||{}),Ye=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ye||{}),qe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(qe||{});let ve=Symbol("ComboboxContext");function Y(e){let r=ye(ve,null);if(r===null){let p=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,Y),p}return r}let et=Q({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Qe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:r,attrs:p,emit:u}){let a=C(1),l=C(null),d=C(null),y=C(null),o=C(null),v=C({static:!1,hold:!1}),i=C([]),f=C(null),t=C(1),b=C(!1);function n(x=w=>w){let w=f.value!==null?i.value[f.value]:null,O=Ne(x(i.value.slice()),I=>D(I.dataRef.domRef)),V=w?O.indexOf(w):null;return V===-1&&(V=null),{options:O,activeOptionIndex:V}}let j=S(()=>e.multiple?1:0),s=S(()=>e.nullable),[g,h]=ke(S(()=>e.modelValue===void 0?L(j.value,{[1]:[],[0]:void 0}):e.modelValue),x=>u("update:modelValue",x),S(()=>e.defaultValue)),m={comboboxState:a,value:g,mode:j,compare(x,w){if(typeof e.by=="string"){let O=e.by;return(x==null?void 0:x[O])===(w==null?void 0:w[O])}return e.by(x,w)},defaultValue:S(()=>e.defaultValue),nullable:s,inputRef:d,labelRef:l,buttonRef:y,optionsRef:o,disabled:S(()=>e.disabled),options:i,change(x){h(x)},activeOptionIndex:S(()=>{if(b.value&&f.value===null&&i.value.length>0){let x=i.value.findIndex(w=>!w.dataRef.disabled);x!==-1&&(f.value=x)}return f.value}),activationTrigger:t,optionsPropsRef:v,closeCombobox(){b.value=!1,!e.disabled&&a.value!==1&&(a.value=1,f.value=null)},openCombobox(){if(b.value=!0,e.disabled||a.value===0)return;let x=i.value.findIndex(w=>{let O=P(w.dataRef.value);return L(j.value,{[0]:()=>m.compare(P(m.value.value),P(O)),[1]:()=>P(m.value.value).some(V=>m.compare(P(V),P(O)))})});x!==-1&&(f.value=x),a.value=0},goToOption(x,w,O){if(b.value=!1,e.disabled||o.value&&!v.value.static&&a.value===1)return;let V=n();if(V.activeOptionIndex===null){let T=V.options.findIndex(W=>!W.dataRef.disabled);T!==-1&&(V.activeOptionIndex=T)}let I=Le(x===U.Specific?{focus:U.Specific,id:w}:{focus:x},{resolveItems:()=>V.options,resolveActiveIndex:()=>V.activeOptionIndex,resolveId:T=>T.id,resolveDisabled:T=>T.dataRef.disabled});f.value=I,t.value=O??1,i.value=V.options},selectOption(x){let w=i.value.find(V=>V.id===x);if(!w)return;let{dataRef:O}=w;h(L(j.value,{[0]:()=>O.value,[1]:()=>{let V=P(m.value.value).slice(),I=P(O.value),T=V.findIndex(W=>m.compare(I,P(W)));return T===-1?V.push(I):V.splice(T,1),V}}))},selectActiveOption(){if(m.activeOptionIndex.value===null)return;let{dataRef:x,id:w}=i.value[m.activeOptionIndex.value];h(L(j.value,{[0]:()=>x.value,[1]:()=>{let O=P(m.value.value).slice(),V=P(x.value),I=O.findIndex(T=>m.compare(V,P(T)));return I===-1?O.push(V):O.splice(I,1),O}})),m.goToOption(U.Specific,w)},registerOption(x,w){let O={id:x,dataRef:w},V=n(I=>[...I,O]);if(f.value===null){let I=w.value.value;L(j.value,{[0]:()=>m.compare(P(m.value.value),P(I)),[1]:()=>P(m.value.value).some(T=>m.compare(P(T),P(I)))})&&(V.activeOptionIndex=V.options.indexOf(O))}i.value=V.options,f.value=V.activeOptionIndex,t.value=1,V.options.some(I=>!D(I.dataRef.domRef))&&requestAnimationFrame(()=>{let I=n();i.value=I.options,f.value=I.activeOptionIndex})},unregisterOption(x){var w;m.activeOptionIndex.value!==null&&((w=m.options.value[m.activeOptionIndex.value])==null?void 0:w.id)===x&&(b.value=!0);let O=n(V=>{let I=V.findIndex(T=>T.id===x);return I!==-1&&V.splice(I,1),V});i.value=O.options,f.value=O.activeOptionIndex,t.value=1}};Ee([d,y,o],()=>m.closeCombobox(),S(()=>a.value===0)),ge(ve,m),Be(S(()=>L(a.value,{[0]:te.Open,[1]:te.Closed})));let k=S(()=>m.activeOptionIndex.value===null?null:i.value[m.activeOptionIndex.value].dataRef.value),B=S(()=>{var x;return(x=D(d))==null?void 0:x.closest("form")});return ie(()=>{ne([B],()=>{if(!B.value||e.defaultValue===void 0)return;function x(){m.change(e.defaultValue)}return B.value.addEventListener("reset",x),()=>{var w;(w=B.value)==null||w.removeEventListener("reset",x)}},{immediate:!0})}),()=>{let{name:x,disabled:w,form:O,...V}=e,I={open:a.value===0,disabled:w,activeIndex:m.activeOptionIndex.value,activeOption:k.value,value:g.value};return ue(M,[...x!=null&&g.value!=null?Pe({[x]:g.value}).map(([T,W])=>ue(Ge,Fe({features:He.Hidden,key:T,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:T,value:W}))):[],X({theirProps:{...p,...pe(V,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:I,slots:r,attrs:p,name:"Combobox"})])}}}),tt=Q({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${le()}`}},setup(e,{attrs:r,slots:p,expose:u}){let a=Y("ComboboxButton");u({el:a.buttonRef,$el:a.buttonRef});function l(o){a.disabled.value||(a.comboboxState.value===0?a.closeCombobox():(o.preventDefault(),a.openCombobox()),z(()=>{var v;return(v=D(a.inputRef))==null?void 0:v.focus({preventScroll:!0})}))}function d(o){switch(o.key){case F.ArrowDown:o.preventDefault(),o.stopPropagation(),a.comboboxState.value===1&&a.openCombobox(),z(()=>{var v;return(v=a.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case F.ArrowUp:o.preventDefault(),o.stopPropagation(),a.comboboxState.value===1&&(a.openCombobox(),z(()=>{a.value.value||a.goToOption(U.Last)})),z(()=>{var v;return(v=a.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case F.Escape:if(a.comboboxState.value!==0)return;o.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&o.stopPropagation(),a.closeCombobox(),z(()=>{var v;return(v=a.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return}}let y=Me(S(()=>({as:e.as,type:r.type})),a.buttonRef);return()=>{var o,v;let i={open:a.comboboxState.value===0,disabled:a.disabled.value,value:a.value.value},{id:f,...t}=e,b={ref:a.buttonRef,id:f,type:y.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(o=D(a.optionsRef))==null?void 0:o.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-labelledby":a.labelRef.value?[(v=D(a.labelRef))==null?void 0:v.id,f].join(" "):void 0,disabled:a.disabled.value===!0?!0:void 0,onKeydown:d,onClick:l};return X({ourProps:b,theirProps:t,slot:i,attrs:r,slots:p,name:"ComboboxButton"})}}}),at=Q({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${le()}`}},emits:{change:e=>!0},setup(e,{emit:r,attrs:p,slots:u,expose:a}){let l=Y("ComboboxInput"),d={value:!1};a({el:l.inputRef,$el:l.inputRef});let y=S(()=>{var s;let g=l.value.value;return D(l.inputRef)?typeof e.displayValue<"u"&&g!==void 0?(s=e.displayValue(g))!=null?s:"":typeof g=="string"?g:"":""});ie(()=>{ne([y,l.comboboxState],([s,g],[h,m])=>{if(d.value)return;let k=D(l.inputRef);k&&(m===0&&g===1||s!==h)&&(k.value=s)},{immediate:!0}),ne([l.comboboxState],([s],[g])=>{if(s===0&&g===1){let h=D(l.inputRef);if(!h)return;let m=h.value,{selectionStart:k,selectionEnd:B,selectionDirection:x}=h;h.value="",h.value=m,x!==null?h.setSelectionRange(k,B,x):h.setSelectionRange(k,B)}})});let o=C(!1),v=C(null);function i(){o.value=!0}function f(){Ze().nextFrame(()=>{o.value=!1,v.value&&(l.openCombobox(),r("change",v.value),v.value=null)})}function t(s){switch(d.value=!0,s.key){case F.Backspace:case F.Delete:if(l.mode.value!==0||!l.nullable.value)return;let g=s.currentTarget;requestAnimationFrame(()=>{if(g.value===""){l.change(null);let h=D(l.optionsRef);h&&(h.scrollTop=0),l.goToOption(U.Nothing)}});break;case F.Enter:if(d.value=!1,l.comboboxState.value!==0||o.value)return;if(s.preventDefault(),s.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case F.ArrowDown:return d.value=!1,s.preventDefault(),s.stopPropagation(),L(l.comboboxState.value,{[0]:()=>l.goToOption(U.Next),[1]:()=>l.openCombobox()});case F.ArrowUp:return d.value=!1,s.preventDefault(),s.stopPropagation(),L(l.comboboxState.value,{[0]:()=>l.goToOption(U.Previous),[1]:()=>{l.openCombobox(),z(()=>{l.value.value||l.goToOption(U.Last)})}});case F.Home:if(s.shiftKey)break;return d.value=!1,s.preventDefault(),s.stopPropagation(),l.goToOption(U.First);case F.PageUp:return d.value=!1,s.preventDefault(),s.stopPropagation(),l.goToOption(U.First);case F.End:if(s.shiftKey)break;return d.value=!1,s.preventDefault(),s.stopPropagation(),l.goToOption(U.Last);case F.PageDown:return d.value=!1,s.preventDefault(),s.stopPropagation(),l.goToOption(U.Last);case F.Escape:if(d.value=!1,l.comboboxState.value!==0)return;s.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&s.stopPropagation(),l.closeCombobox();break;case F.Tab:if(d.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.selectActiveOption(),l.closeCombobox();break}}function b(s){if(o.value){v.value=s;return}l.openCombobox(),r("change",s)}function n(){d.value=!1}let j=S(()=>{var s,g,h,m;return(m=(h=(g=e.defaultValue)!=null?g:l.defaultValue.value!==void 0?(s=e.displayValue)==null?void 0:s.call(e,l.defaultValue.value):null)!=null?h:l.defaultValue.value)!=null?m:""});return()=>{var s,g,h,m,k,B;let x={open:l.comboboxState.value===0},{id:w,displayValue:O,onChange:V,...I}=e,T={"aria-controls":(s=l.optionsRef.value)==null?void 0:s.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null||(g=l.options.value[l.activeOptionIndex.value])==null?void 0:g.id,"aria-labelledby":(k=(h=D(l.labelRef))==null?void 0:h.id)!=null?k:(m=D(l.buttonRef))==null?void 0:m.id,"aria-autocomplete":"list",id:w,onCompositionstart:i,onCompositionend:f,onKeydown:t,onInput:b,onBlur:n,role:"combobox",type:(B=p.type)!=null?B:"text",tabIndex:0,ref:l.inputRef,defaultValue:j.value,disabled:l.disabled.value===!0?!0:void 0};return X({ourProps:T,theirProps:I,slot:x,attrs:p,slots:u,features:ae.RenderStrategy|ae.Static,name:"ComboboxInput"})}}}),lt=Q({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:r,slots:p,expose:u}){let a=Y("ComboboxOptions"),l=`headlessui-combobox-options-${le()}`;u({el:a.optionsRef,$el:a.optionsRef}),re(()=>{a.optionsPropsRef.value.static=e.static}),re(()=>{a.optionsPropsRef.value.hold=e.hold});let d=je(),y=S(()=>d!==null?(d.value&te.Open)===te.Open:a.comboboxState.value===0);return Ke({container:S(()=>D(a.optionsRef)),enabled:S(()=>a.comboboxState.value===0),accept(o){return o.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}}),()=>{var o,v,i;let f={open:a.comboboxState.value===0},t={"aria-labelledby":(i=(o=D(a.labelRef))==null?void 0:o.id)!=null?i:(v=D(a.buttonRef))==null?void 0:v.id,id:l,ref:a.optionsRef,role:"listbox","aria-multiselectable":a.mode.value===1?!0:void 0},b=pe(e,["hold"]);return X({ourProps:t,theirProps:b,slot:f,attrs:r,slots:p,features:ae.RenderStrategy|ae.Static,visible:y.value,name:"ComboboxOptions"})}}}),ot=Q({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:r,attrs:p,expose:u}){let a=Y("ComboboxOption"),l=`headlessui-combobox-option-${le()}`,d=C(null);u({el:d,$el:d});let y=S(()=>a.activeOptionIndex.value!==null?a.options.value[a.activeOptionIndex.value].id===l:!1),o=S(()=>L(a.mode.value,{[0]:()=>a.compare(P(a.value.value),P(e.value)),[1]:()=>P(a.value.value).some(s=>a.compare(P(s),P(e.value)))})),v=S(()=>({disabled:e.disabled,value:e.value,domRef:d}));ie(()=>a.registerOption(l,v)),xe(()=>a.unregisterOption(l)),re(()=>{a.comboboxState.value===0&&y.value&&a.activationTrigger.value!==0&&z(()=>{var s,g;return(g=(s=D(d))==null?void 0:s.scrollIntoView)==null?void 0:g.call(s,{block:"nearest"})})});function i(s){if(e.disabled)return s.preventDefault();a.selectOption(l),a.mode.value===0&&a.closeCombobox(),Je()||requestAnimationFrame(()=>{var g;return(g=D(a.inputRef))==null?void 0:g.focus()})}function f(){if(e.disabled)return a.goToOption(U.Nothing);a.goToOption(U.Specific,l)}let t=ze();function b(s){t.update(s)}function n(s){t.wasMoved(s)&&(e.disabled||y.value||a.goToOption(U.Specific,l,0))}function j(s){t.wasMoved(s)&&(e.disabled||y.value&&(a.optionsPropsRef.value.hold||a.goToOption(U.Nothing)))}return()=>{let{disabled:s}=e,g={active:y.value,selected:o.value,disabled:s},h={id:l,ref:d,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":o.value,disabled:void 0,onClick:i,onFocus:f,onPointerenter:b,onMouseenter:b,onPointermove:n,onMousemove:n,onPointerleave:j,onMouseleave:j};return X({ourProps:h,theirProps:e,slot:g,attrs:p,slots:r,name:"ComboboxOption"})}}});const ce=e=>!(e===""||e===null),nt=e=>{let r=/^[0-9]+$/;return!!e.match(r)},rt=(e,r)=>e.length<=r,it=e=>{let r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!e.match(r)},st=["id","value","name"],ut=["for"],dt={__name:"RadioGroupForm",props:{questionId:String,options:Array,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(e,{emit:r}){const p=e,u=S({get:()=>p.modelValue,set:a=>r("update:modelValue",a)});return(a,l)=>(_(!0),R(M,null,se(e.options,(d,y)=>(_(),R("div",{key:d.title,class:"flex items-center my-3"},[he(c("input",{id:`radio-${y}${e.questionId}`,type:"radio",value:d.id,"onUpdate:modelValue":l[0]||(l[0]=o=>u.value=o),name:`name-${y}${e.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,st),[[Ve,u.value]]),c("label",{for:`radio-${y}${e.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},A(d.title),9,ut)]))),128))}},ct={class:"grid grid-cols-4"},pt={class:"col-span-4 text-end"},vt={class:"text-xs text-red-600"},mt={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(e,{emit:r}){const p=e,u=S({get:()=>p.modelValue,set:a=>r("update:modelValue",a)});return(a,l)=>{var d,y,o;return _(),R("div",ct,[c("label",{for:"price",class:H(["col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize",(d=e.question.structure)==null?void 0:d.labelGrid])},A(e.question.statement),3),c("div",{class:H(["relative col-span-4 mt-1 rounded-md ms-4",(y=e.question.structure)==null?void 0:y.inputGrid])},[$(dt,{questionId:e.question.id,options:e.question.options,modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=v=>u.value=v)},null,8,["questionId","options","modelValue"])],2),c("div",pt,[c("span",vt,A((o=e.question.error)==null?void 0:o.text),1)])])}}},ft={class:"grid grid-cols-4"},bt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900"},gt={class:"relative mt-1 rounded-md col-span-4 ps-4"},xt={class:"col-span-4 text-end"},yt={class:"text-xs text-red-600"},ht={__name:"MultipleSelection",props:{modelValue:{type:Array,default:[]},question:Object},emits:["update:modelValue"],setup(e,{emit:r}){const p=e,u=S({get:()=>p.modelValue,set:a=>r("update:modelValue",a)});return(a,l)=>{var d;return _(),R("div",ft,[c("label",bt,A(e.question.statement),1),c("div",gt,[$(Te,{questionIndex:e.question.id,options:e.question.options,modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=y=>u.value=y)},null,8,["questionIndex","options","modelValue"])]),c("div",xt,[c("span",yt,A((d=e.question.error)==null?void 0:d.text),1)])])}}},Vt={class:"relative mt-1"},_t={class:"block text-sm font-medium leading-6 text-gray-900"},St={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},wt={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},J={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String}},emits:["update:modelValue"],setup(e,{emit:r}){const p=e,u=S({get:()=>p.modelValue,set:y=>r("update:modelValue",y)});let a=C(""),l=C(!1),d=S(()=>a.value===""?[]:p.items.filter(y=>y[`${p.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(a.value.toLowerCase().replace(/\s+/g,""))));return(y,o)=>(_(),Z(E(et),{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=v=>u.value=v)},{default:N(()=>[c("div",Vt,[c("label",_t,A(e.label),1),c("div",St,[$(E(at),{class:H([e.error&&E(l)&&!u.value?"ring-red-600":"ring-gray-300","w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:v=>v==null?void 0:v[`${this.itemTitle}`],onChange:o[0]||(o[0]=v=>{v.target.value==""?ee(l)?l.value=!0:l=!0:ee(l)?l.value=!1:l=!1,ee(a)?a.value=v.target.value:a=v.target.value}),placeholder:e.placeholder},null,8,["class","displayValue","placeholder"]),$(E(tt),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:N(()=>[$(E(De),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),$(E(We),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:o[1]||(o[1]=v=>ee(a)?a.value="":a="")},{default:N(()=>[$(E(lt),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:N(()=>[E(d).length===0&&E(a)!==""?(_(),R("div",wt," Sin datos ")):K("",!0),(_(!0),R(M,null,se(E(d),v=>(_(),Z(E(ot),{as:"template",key:v[`${this.itemValue}`],value:v},{default:N(({selected:i,active:f})=>[c("li",{class:H(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":f,"text-gray-900":!f}])},[c("span",{class:H(["block truncate",{"font-medium":i,"font-normal":!i}])},A(v[`${this.itemTitle}`]),3),i?(_(),R("span",{key:0,class:H(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":f,"text-teal-600":!f}])},[$(E(Ue),{class:"h-5 w-5","aria-hidden":"true"})],2)):K("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};class me{constructor(){q(this,"getDepartamentos",async()=>(await oe.get("http://38.43.133.27/API/lugar/")).data);q(this,"getProvincias",async r=>(await oe.get(`http://38.43.133.27/API/provincias/${r}/`)).data);q(this,"getDistritos",async r=>(await oe.get(`http://38.43.133.27/API/distritos/${r}/`)).data)}}const Ot={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},Rt={class:"grid grid-cols-3 gap-x-5"},Ct={class:"col-span-3"},$t={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(e,{emit:r}){const p=e,u=new me,a=S({get:()=>p.modelValue,set:t=>r("update:modelValue",t)}),l=C([]),d=C([]),y=C([]),o=C({departamento:null,provincia:null,distrito:null}),v=async t=>{o.value.provincia=null,d.value=[],o.value.distrito=null,y.value=[],d.value=await u.getProvincias(t.id),r("update:modelValue",null)},i=async t=>{r("update:modelValue",null),y.value=[],o.value.distrito=null,y.value=await u.getDistritos(t.id)};return(async()=>{l.value=await u.getDepartamentos()})(),(t,b)=>(_(),R(M,null,[c("label",Ot,A(e.question.statement),1),c("div",Rt,[c("div",null,[$(J,{placeholder:"Departamento",error:e.error,items:l.value,itemTitle:"name",modelValue:o.value.departamento,"onUpdate:modelValue":[b[0]||(b[0]=n=>o.value.departamento=n),v]},null,8,["error","items","modelValue"])]),c("div",null,[$(J,{error:e.error,items:d.value,itemTitle:"name",placeholder:"Provincia",modelValue:o.value.provincia,"onUpdate:modelValue":[b[1]||(b[1]=n=>o.value.provincia=n),i]},null,8,["error","items","modelValue"])]),c("div",null,[$(J,{error:e.error,items:y.value,itemTitle:"name",placeholder:"Distrito",modelValue:o.value.distrito,"onUpdate:modelValue":[b[2]||(b[2]=n=>o.value.distrito=n),b[3]||(b[3]=n=>a.value=n.id)]},null,8,["error","items","modelValue"])]),c("div",Ct,[$(G,{modelValue:e.question.other,"onUpdate:modelValue":b[4]||(b[4]=n=>e.question.other=n),label:"Dirección"},null,8,["modelValue"])])])],64))}},It={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},kt={class:"grid grid-cols-3 gap-5"},Pt={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(e,{emit:r}){const p=e,u=new me,a=S({get:()=>p.modelValue,set:t=>r("update:modelValue",t)}),l=C([]),d=C([]),y=C([]),o=C({departamento:null,provincia:null,distrito:null}),v=async t=>{o.value.provincia=null,d.value=[],o.value.distrito=null,y.value=[],d.value=await u.getProvincias(t.id),r("update:modelValue",null)},i=async t=>{r("update:modelValue",null),y.value=[],o.value.distrito=null,y.value=await u.getDistritos(t.id)};return(async()=>{l.value=await u.getDepartamentos()})(),(t,b)=>(_(),R(M,null,[c("label",It,A(e.question.statement),1),c("div",kt,[c("div",null,[$(J,{placeholder:"Departamento",error:e.error,items:l.value,itemTitle:"name",modelValue:o.value.departamento,"onUpdate:modelValue":[b[0]||(b[0]=n=>o.value.departamento=n),v]},null,8,["error","items","modelValue"])]),c("div",null,[$(J,{error:e.error,items:d.value,itemTitle:"name",placeholder:"Provincia",modelValue:o.value.provincia,"onUpdate:modelValue":[b[1]||(b[1]=n=>o.value.provincia=n),i]},null,8,["error","items","modelValue"])]),c("div",null,[$(J,{error:e.error,items:y.value,itemTitle:"name",placeholder:"Distrito",modelValue:o.value.distrito,"onUpdate:modelValue":[b[2]||(b[2]=n=>o.value.distrito=n),b[3]||(b[3]=n=>a.value=n.id)]},null,8,["error","items","modelValue"])])])],64))}},Tt={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},Dt={class:"col-span-2 rounded-lg p-4"},Ut={key:0,class:"mb-4"},At={key:1,class:"mb-4"},Et={key:2,class:"mb-4"},Bt={key:3,class:"mb-4"},Ft={key:4,class:"mb-4"},jt={key:5,class:"mb-4"},Nt={key:6,class:"mb-4"},Lt={key:7,class:"mb-4"},Mt={key:8,class:"mb-4"},zt={class:"w-full text-end"},Kt={class:"text-xs text-red-600"},Gt={key:9,class:"mb-4"},Ht={class:"w-full text-end"},Zt={class:"text-xs text-red-600"},Jt={class:"flex justify-end mt-4"},Wt={__name:"Form",props:{questions:Array},setup(e){const r=e,p=S(()=>r.questions),u=C(!0),a=i=>{p.value.map(f=>(f.isDependent==i.id&&(f.optionTrigger===i.answer.text?f.show=!0:f.show=!1),f))},l=(i,f,t=null)=>{let b=!0;b=d(i.text,f),u.value=b,t&&a(f)},d=(i,f)=>{var t=null;return p.value.map(b=>{b.id==f.id&&(i===null||i===""?(b.error={isError:!0,text:"Obligatorio"},t=!1):(b.error={isError:!1,text:null},t=!0))}),t},y=(i,f)=>{p.value.map(t=>{t.id==f.id&&(ce(i)?it(i)?t.error={isError:!1,text:null}:t.error={isError:!0,text:"Formato no valido"}:t.error={isError:!0,text:"Obligatorio"})})},o=(i,f)=>{p.value.map(t=>{t.id==f.id&&(ce(i)?nt(i)?rt(i,9)?t.error={isError:!1,text:null}:t.error={isError:!0,text:"Longitud debe se 9 digitos"}:t.error={isError:!0,text:"Solo se permite numeros"}:t.error={isError:!0,text:"Obligatorio"})})},v=()=>{u.value=!0,p.value.forEach(i=>{var f,t;!((f=i.answer)!=null&&f.options)&&!((t=i.answer)!=null&&t.text)&&(!i.isDependent||i.show)?(i.error={isError:!0,text:"Obligatorio"},u.value=!1):delete i.error}),u.value&&console.log("Guardando ...")};return(i,f)=>(_(),R("div",Tt,[c("div",Dt,[(_(!0),R(M,null,se(p.value,(t,b)=>(_(),R("div",{key:t.id},[c("ul",null,[!t.isDependent||t.show?(_(),R(M,{key:0},[t.type===0?(_(),R("li",Ut,[c("div",null,[$(mt,{question:t,modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>l(n,t,b)]},null,8,["question","modelValue","onUpdate:modelValue"])])])):t.type===1?(_(),R("li",At,[$(G,{modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>l(n,t)],type:"text",label:t.statement,error:t.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):t.type===2?(_(),R("li",Et,[$(G,{modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>l(n,t)],type:"date",label:t.statement,error:t.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):t.type===3?(_(),R("li",Bt,[$(G,{modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>l(t.answer,t)],type:"number",label:t.statement,error:t.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):t.type===4?(_(),R("li",Ft,[$(Ae,{modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>l(n,t,b)],label:"question.statement",error:t.error},null,8,["modelValue","onUpdate:modelValue","error"])])):t.type===6?(_(),R("li",jt,[$(ht,{question:t,modelValue:t.answer.options,"onUpdate:modelValue":[n=>t.answer.options=n,n=>l(n,t,b)]},null,8,["question","modelValue","onUpdate:modelValue"])])):t.type===8?(_(),R("li",Nt,[$(G,{modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>y(t.answer,t)],type:"email",label:t.statement,error:t.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):t.type===9?(_(),R("li",Lt,[$(G,{modelValue:t.answer.text,"onUpdate:modelValue":[n=>t.answer.text=n,n=>o(n,t)],type:"tel",label:t.statement,error:t.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):t.type===10?(_(),R("li",Mt,[$(Pt,{question:t,modelValue:t.answer,"onUpdate:modelValue":[n=>t.answer=n,n=>l(t.answer,t)],error:!!t.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),c("div",zt,[c("span",Kt,A(t.error),1)])])):t.type===11?(_(),R("li",Gt,[$($t,{question:t,modelValue:t.answer,"onUpdate:modelValue":[n=>t.answer=n,n=>l(t.answer,t)],error:!!t.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),c("div",Ht,[c("span",Zt,A(t.error),1)])])):K("",!0)],64)):K("",!0)])]))),128)),c("div",Jt,[_e(i.$slots,"footer",{submit:v})])])]))}};const Qt={key:0,class:"pre-loading"},Xt={class:"text-xl uppercase mb-4 font-bold"},Yt={class:"grid grid-cols-4 gap-4"},qt=c("strong",null," Indicaciones: ",-1),ea=c("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),ta=c("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),aa={class:"col-span-4 md:col-span-1"},la={class:"col-span-4 md:col-span-3 rounded-lg bg-white p-4 shadow-lg"},oa={class:""},na={class:"text-lg font-semibold mb-3 uppercase"},ra={class:"text-sm uppercase mb-4 font-bold"},ia={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},sa={class:"flex justify-between"},ua={class:"text-start"},da=c("span",null,"Anterior",-1),ca={class:"text-lg"},pa={class:"text-end"},va=c("span",null,"Siguiente ",-1),ma={class:"text-lg capitalize"},wa={__name:"survey",setup(e){const r=new Se,p=new $e,u=we(),a=Oe(),l=C(null),d=C([]),y=S(()=>u.sections),o=S(()=>u.currentSurvey),v=S(()=>u.currentTopic),i=S(()=>u.currentSection),f=S(()=>u.nextSection),t=C(!1),b=(g,h,m)=>{u.currentTopic=h.find(k=>k.id===a.params.topic),u.currentSection=m.find(k=>k.id===g.section),u.nextSection=m.find(k=>k.id===u.currentSection.next),u.prevSection=m.find(k=>k.id===u.currentSection.previous)},n=async()=>{let g=await p.getSurvey(a.params.id);if(!g)r.push({name:"home"});else if(l.value=g,g.topic===a.params.topic&&g.section===a.params.section){let h=await p.getTopics(a.params.id),m=await p.getSections(a.params.topic),k=await p.getQuestions(a.params.section);u.topics=h,u.sections=m,d.value=k,b(g,h,m)}else r.back(),u.cont++},j=async()=>{let g=await p.getSurvey(a.params.id);if(!g)r.push({name:"home"});else{l.value=g;let h=await p.getTopics(a.params.id),m=await p.getSections(h[0].id),k=await p.getQuestions(m[0].id);await u.setPositions(g.id,h[0].id,m[0].id)?(u.topics=h,u.sections=m,d.value=k,u.currentTopic=h[0],u.currentSection=m[0]):r.push({name:"home"})}};return(async()=>{let g=a.params.id,h=a.params.topic,m=a.params.section;h=="null"&&m=="null"?(t.value=!0,await j(),t.value=!1):g&&h&&m?(t.value=!0,await n(),t.value=!1):r.push({name:"home"})})(),(g,h)=>(_(),Z(Re,null,{default:N(()=>{var m,k,B;return[t.value?(_(),R("div",Qt," cargando... ")):(_(),R(M,{key:1},[c("h2",Xt,A((m=o.value)==null?void 0:m.title),1),c("div",Yt,[$(E(Ce),{type:"info",class:"col-span-4",ref:"alert"},{default:N(()=>[qt,ea,ta]),_:1},512),c("div",aa,[$(Ie)]),c("div",la,[c("div",oa,[c("h3",na,A(v.value.title),1),c("h4",ra,A((k=i.value)==null?void 0:k.title),1)]),y.value.length==0?(_(),R("h4",ia," no hay secciones ")):(_(),R(M,{key:1},[((B=d.value)==null?void 0:B.length)>0?(_(),Z(Wt,{key:0,questions:d.value},{footer:N(({submit:x})=>[c("div",sa,[c("div",null,[i.value.previous?(_(),Z(E(de),{key:0},{default:N(()=>[c("div",ua,[da,c("h5",ca,A(f.value.title),1)])]),_:1})):K("",!0)]),c("div",null,[i.value.next?(_(),Z(E(de),{key:0,onClick:x},{default:N(()=>[c("div",pa,[va,c("h5",ma,A(f.value.title),1)])]),_:2},1032,["onClick"])):K("",!0)])])]),_:1},8,["questions"])):K("",!0)],64))])])],64))]}),_:1}))}};export{wa as default};
