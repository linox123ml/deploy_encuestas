import{K as h,D as y,r as f,o as u,c as p,F as w,m as S,q as x,a as o,t as b,U as q}from"./index-de1897b5.js";const T={role:"list",class:"rounded-lg bg-white divide-y divide-gray-150 shadow-lg overflow-hidden"},C=["onClick"],k={class:"flex gap-x-4"},D={class:"min-w-0 flex-auto"},B=o("p",{class:"mt-1 truncate text-xs leading-5 text-gray-500"},null,-1),F=o("div",{class:"hidden sm:flex sm:flex-col sm:items-end"},[o("p",{class:"mt-1 text-xs leading-5 text-gray-500"})],-1),E={__name:"IndexSurvey",setup(Q){const g=h(),s=y(),c=new q,l=f(null);g.params.id;const a=f(null),_=async t=>{var r;let n=s.topics.find(i=>i.id==t.id);if(((r=n.sections)==null?void 0:r.length)>0){s.sections=n.sections,a.value=t.id,s.currentTopic=t,s.sections.length>0&&v(s.sections[0].id);return}let e=await c.getSections(t.id);e.sort((i,d)=>i.ordinal-d.ordinal),s.topics.map(i=>{i.id==t.id&&(i.sections=e,s.sections=i.sections)}),a.value=t.id,s.currentTopic=t,s.sections.length>0&&v(s.sections[0].id)},v=t=>{s.topics.map(n=>{n.id===s.currentTopic.id&&n.sections.map(async e=>{if(e.id==t)if(e.questions)s.questions=e.questions;else{let i=await c.getQuestions(e.id);i.sort((d,m)=>d.ordinal-m.ordinal),e.questions=i,s.questions=i}})})};return(async()=>{let t=await c.getTopics(g.params.id);if(t.sort((n,e)=>n.ordinal-e.ordinal),s.topics=t,l.value=t,l.value.length>0){let n=l.value[0];_(n)}})(),(t,n)=>(u(),p("ul",T,[(u(!0),p(w,null,S(l.value,(e,r)=>(u(),p("li",{class:x(["flex justify-between gap-x-6 p-3 hover:bg-blue-100 cursor-pointer",a.value===e.id?"bg-blue-50":""]),onClick:i=>a.value===e.id?null:_(e)},[o("div",k,[o("div",D,[o("p",{class:x(["text-sm font-semibold leading-6 uppercase text-gray-600",a.value===e.id?"text-gray-900":""])},b(e.title),3),B])]),F],10,C))),256))]))}};export{E as _};
