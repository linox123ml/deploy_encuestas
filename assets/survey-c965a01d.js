var Re=Object.defineProperty;var Ie=(t,u,v)=>u in t?Re(t,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):t[u]=v;var le=(t,u,v)=>(Ie(t,typeof u!="symbol"?u+"":u,v),v);import{I as se,d as oe,r as O,b as R,J as T,p as ke,e as fe,K as ve,O as ge,F as K,w as me,f as Ce,n as Z,i as $e,o as f,c as w,m as be,A as Pe,Q as Ue,a as s,t as F,l as Ee,j as _,g as q,h as B,u as A,q as re,R as xe,x as J,k as De,S as Ve,C as Te,y as Ae,V as Fe,W as je,X as ye,P as ee,M as Ne}from"./index-90b7f13b.js";import{r as Be,n as Le,S as ze,_ as Me}from"./HModal-3fad83e6.js";import{_ as he}from"./IndexSurvey-7c0262bb.js";import{d as qe,e as Ke,_ as He,r as Xe,b as Ye,a as ce}from"./HSelect-90fc3f44.js";import{u as Y,o as j,F as Ge,c as Je,l as ue,K as Ze,H as ie,T as _e,t as pe,N as de,p as Qe,O as We,a as M}from"./use-outside-click-bdab7148.js";import{x as et,a as L,b as tt,u as at}from"./use-text-value-f18f53e5.js";import{p as lt}from"./use-tree-walker-d6bdd1d3.js";import{f as ot,a as it,_ as Q}from"./InputForm-2c2e9d61.js";class we{constructor(){le(this,"getDepartamentos",async()=>(await se.get("http://38.43.133.27/SURVEY_PLACES/v1/departments/")).data.data);le(this,"getProvincias",async u=>(await se.get(`http://38.43.133.27/SURVEY_PLACES/v1/provinces/${u}/`)).data.data);le(this,"getDistritos",async u=>(await se.get(`http://38.43.133.27/SURVEY_PLACES/v1/districts/${u}/`)).data.data);le(this,"getUbigeo",async u=>{try{return(await se.get(`http://38.43.133.27/SURVEY_PLACES/v1/${u}/`)).data.data[0]}catch{return null}})}}function nt(t,u){return t===u}var st=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(st||{}),rt=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(rt||{}),ut=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ut||{});let Se=Symbol("ComboboxContext");function ne(t){let u=$e(Se,null);if(u===null){let v=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,ne),v}return u}let dt=oe({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>nt},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:u,attrs:v,emit:m}){let l=O(1),a=O(null),d=O(null),p=O(null),n=O(null),c=O({static:!1,hold:!1}),x=O([]),y=O(null),P=O(1),$=O(!1);function r(b=S=>S){let S=y.value!==null?x.value[y.value]:null,k=We(b(x.value.slice()),C=>j(C.dataRef.domRef)),V=S?k.indexOf(S):null;return V===-1&&(V=null),{options:k,activeOptionIndex:V}}let i=R(()=>t.multiple?1:0),e=R(()=>t.nullable),[h,I]=qe(R(()=>t.modelValue===void 0?Y(i.value,{[1]:[],[0]:void 0}):t.modelValue),b=>m("update:modelValue",b),R(()=>t.defaultValue)),g={comboboxState:l,value:h,mode:i,compare(b,S){if(typeof t.by=="string"){let k=t.by;return(b==null?void 0:b[k])===(S==null?void 0:S[k])}return t.by(b,S)},defaultValue:R(()=>t.defaultValue),nullable:e,inputRef:d,labelRef:a,buttonRef:p,optionsRef:n,disabled:R(()=>t.disabled),options:x,change(b){I(b)},activeOptionIndex:R(()=>{if($.value&&y.value===null&&x.value.length>0){let b=x.value.findIndex(S=>!S.dataRef.disabled);b!==-1&&(y.value=b)}return y.value}),activationTrigger:P,optionsPropsRef:c,closeCombobox(){$.value=!1,!t.disabled&&l.value!==1&&(l.value=1,y.value=null)},openCombobox(){if($.value=!0,t.disabled||l.value===0)return;let b=x.value.findIndex(S=>{let k=T(S.dataRef.value);return Y(i.value,{[0]:()=>g.compare(T(g.value.value),T(k)),[1]:()=>T(g.value.value).some(V=>g.compare(T(V),T(k)))})});b!==-1&&(y.value=b),l.value=0},goToOption(b,S,k){if($.value=!1,t.disabled||n.value&&!c.value.static&&l.value===1)return;let V=r();if(V.activeOptionIndex===null){let D=V.options.findIndex(W=>!W.dataRef.disabled);D!==-1&&(V.activeOptionIndex=D)}let C=et(b===L.Specific?{focus:L.Specific,id:S}:{focus:b},{resolveItems:()=>V.options,resolveActiveIndex:()=>V.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});y.value=C,P.value=k??1,x.value=V.options},selectOption(b){let S=x.value.find(V=>V.id===b);if(!S)return;let{dataRef:k}=S;I(Y(i.value,{[0]:()=>k.value,[1]:()=>{let V=T(g.value.value).slice(),C=T(k.value),D=V.findIndex(W=>g.compare(C,T(W)));return D===-1?V.push(C):V.splice(D,1),V}}))},selectActiveOption(){if(g.activeOptionIndex.value===null)return;let{dataRef:b,id:S}=x.value[g.activeOptionIndex.value];I(Y(i.value,{[0]:()=>b.value,[1]:()=>{let k=T(g.value.value).slice(),V=T(b.value),C=k.findIndex(D=>g.compare(V,T(D)));return C===-1?k.push(V):k.splice(C,1),k}})),g.goToOption(L.Specific,S)},registerOption(b,S){let k={id:b,dataRef:S},V=r(C=>[...C,k]);if(y.value===null){let C=S.value.value;Y(i.value,{[0]:()=>g.compare(T(g.value.value),T(C)),[1]:()=>T(g.value.value).some(D=>g.compare(T(D),T(C)))})&&(V.activeOptionIndex=V.options.indexOf(k))}x.value=V.options,y.value=V.activeOptionIndex,P.value=1,V.options.some(C=>!j(C.dataRef.domRef))&&requestAnimationFrame(()=>{let C=r();x.value=C.options,y.value=C.activeOptionIndex})},unregisterOption(b){var S;g.activeOptionIndex.value!==null&&((S=g.options.value[g.activeOptionIndex.value])==null?void 0:S.id)===b&&($.value=!0);let k=r(V=>{let C=V.findIndex(D=>D.id===b);return C!==-1&&V.splice(C,1),V});x.value=k.options,y.value=k.activeOptionIndex,P.value=1}};Ge([d,p,n],()=>g.closeCombobox(),R(()=>l.value===0)),ke(Se,g),Je(R(()=>Y(l.value,{[0]:ue.Open,[1]:ue.Closed})));let o=R(()=>g.activeOptionIndex.value===null?null:x.value[g.activeOptionIndex.value].dataRef.value),N=R(()=>{var b;return(b=j(d))==null?void 0:b.closest("form")});return fe(()=>{ve([N],()=>{if(!N.value||t.defaultValue===void 0)return;function b(){g.change(t.defaultValue)}return N.value.addEventListener("reset",b),()=>{var S;(S=N.value)==null||S.removeEventListener("reset",b)}},{immediate:!0})}),()=>{let{name:b,disabled:S,form:k,...V}=t,C={open:l.value===0,disabled:S,activeIndex:g.activeOptionIndex.value,activeOption:o.value,value:h.value};return ge(K,[...b!=null&&h.value!=null?Ke({[b]:h.value}).map(([D,W])=>ge(ot,Ze({features:it.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:k,name:D,value:W}))):[],ie({theirProps:{...v,..._e(V,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:C,slots:u,attrs:v,name:"Combobox"})])}}}),ct=oe({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${pe()}`}},setup(t,{attrs:u,slots:v,expose:m}){let l=ne("ComboboxButton");m({el:l.buttonRef,$el:l.buttonRef});function a(n){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(n.preventDefault(),l.openCombobox()),Z(()=>{var c;return(c=j(l.inputRef))==null?void 0:c.focus({preventScroll:!0})}))}function d(n){switch(n.key){case M.ArrowDown:n.preventDefault(),n.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),Z(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case M.ArrowUp:n.preventDefault(),n.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),Z(()=>{l.value.value||l.goToOption(L.Last)})),Z(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case M.Escape:if(l.comboboxState.value!==0)return;n.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&n.stopPropagation(),l.closeCombobox(),Z(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return}}let p=tt(R(()=>({as:t.as,type:u.type})),l.buttonRef);return()=>{var n,c;let x={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:y,...P}=t,$={ref:l.buttonRef,id:y,type:p.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(n=j(l.optionsRef))==null?void 0:n.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(c=j(l.labelRef))==null?void 0:c.id,y].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:d,onClick:a};return ie({ourProps:$,theirProps:P,slot:x,attrs:u,slots:v,name:"ComboboxButton"})}}}),pt=oe({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${pe()}`}},emits:{change:t=>!0},setup(t,{emit:u,attrs:v,slots:m,expose:l}){let a=ne("ComboboxInput"),d={value:!1};l({el:a.inputRef,$el:a.inputRef});let p=R(()=>{var e;let h=a.value.value;return j(a.inputRef)?typeof t.displayValue<"u"&&h!==void 0?(e=t.displayValue(h))!=null?e:"":typeof h=="string"?h:"":""});fe(()=>{ve([p,a.comboboxState],([e,h],[I,g])=>{if(d.value)return;let o=j(a.inputRef);o&&(g===0&&h===1||e!==I)&&(o.value=e)},{immediate:!0}),ve([a.comboboxState],([e],[h])=>{if(e===0&&h===1){let I=j(a.inputRef);if(!I)return;let g=I.value,{selectionStart:o,selectionEnd:N,selectionDirection:b}=I;I.value="",I.value=g,b!==null?I.setSelectionRange(o,N,b):I.setSelectionRange(o,N)}})});let n=O(!1),c=O(null);function x(){n.value=!0}function y(){Be().nextFrame(()=>{n.value=!1,c.value&&(a.openCombobox(),u("change",c.value),c.value=null)})}function P(e){switch(d.value=!0,e.key){case M.Backspace:case M.Delete:if(a.mode.value!==0||!a.nullable.value)return;let h=e.currentTarget;requestAnimationFrame(()=>{if(h.value===""){a.change(null);let I=j(a.optionsRef);I&&(I.scrollTop=0),a.goToOption(L.Nothing)}});break;case M.Enter:if(d.value=!1,a.comboboxState.value!==0||n.value)return;if(e.preventDefault(),e.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case M.ArrowDown:return d.value=!1,e.preventDefault(),e.stopPropagation(),Y(a.comboboxState.value,{[0]:()=>a.goToOption(L.Next),[1]:()=>a.openCombobox()});case M.ArrowUp:return d.value=!1,e.preventDefault(),e.stopPropagation(),Y(a.comboboxState.value,{[0]:()=>a.goToOption(L.Previous),[1]:()=>{a.openCombobox(),Z(()=>{a.value.value||a.goToOption(L.Last)})}});case M.Home:if(e.shiftKey)break;return d.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.First);case M.PageUp:return d.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.First);case M.End:if(e.shiftKey)break;return d.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.Last);case M.PageDown:return d.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.Last);case M.Escape:if(d.value=!1,a.comboboxState.value!==0)return;e.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&e.stopPropagation(),a.closeCombobox();break;case M.Tab:if(d.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function $(e){if(n.value){c.value=e;return}a.openCombobox(),u("change",e)}function r(){d.value=!1}let i=R(()=>{var e,h,I,g;return(g=(I=(h=t.defaultValue)!=null?h:a.defaultValue.value!==void 0?(e=t.displayValue)==null?void 0:e.call(t,a.defaultValue.value):null)!=null?I:a.defaultValue.value)!=null?g:""});return()=>{var e,h,I,g,o,N;let b={open:a.comboboxState.value===0},{id:S,displayValue:k,onChange:V,...C}=t,D={"aria-controls":(e=a.optionsRef.value)==null?void 0:e.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(h=a.options.value[a.activeOptionIndex.value])==null?void 0:h.id,"aria-labelledby":(o=(I=j(a.labelRef))==null?void 0:I.id)!=null?o:(g=j(a.buttonRef))==null?void 0:g.id,"aria-autocomplete":"list",id:S,onCompositionstart:x,onCompositionend:y,onKeydown:P,onInput:$,onBlur:r,role:"combobox",type:(N=v.type)!=null?N:"text",tabIndex:0,ref:a.inputRef,defaultValue:i.value,disabled:a.disabled.value===!0?!0:void 0};return ie({ourProps:D,theirProps:C,slot:b,attrs:v,slots:m,features:de.RenderStrategy|de.Static,name:"ComboboxInput"})}}}),vt=oe({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:u,slots:v,expose:m}){let l=ne("ComboboxOptions"),a=`headlessui-combobox-options-${pe()}`;m({el:l.optionsRef,$el:l.optionsRef}),me(()=>{l.optionsPropsRef.value.static=t.static}),me(()=>{l.optionsPropsRef.value.hold=t.hold});let d=Qe(),p=R(()=>d!==null?(d.value&ue.Open)===ue.Open:l.comboboxState.value===0);return lt({container:R(()=>j(l.optionsRef)),enabled:R(()=>l.comboboxState.value===0),accept(n){return n.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}}),()=>{var n,c,x;let y={open:l.comboboxState.value===0},P={"aria-labelledby":(x=(n=j(l.labelRef))==null?void 0:n.id)!=null?x:(c=j(l.buttonRef))==null?void 0:c.id,id:a,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0},$=_e(t,["hold"]);return ie({ourProps:P,theirProps:$,slot:y,attrs:u,slots:v,features:de.RenderStrategy|de.Static,visible:p.value,name:"ComboboxOptions"})}}}),mt=oe({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:u,attrs:v,expose:m}){let l=ne("ComboboxOption"),a=`headlessui-combobox-option-${pe()}`,d=O(null);m({el:d,$el:d});let p=R(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===a:!1),n=R(()=>Y(l.mode.value,{[0]:()=>l.compare(T(l.value.value),T(t.value)),[1]:()=>T(l.value.value).some(e=>l.compare(T(e),T(t.value)))})),c=R(()=>({disabled:t.disabled,value:t.value,domRef:d}));fe(()=>l.registerOption(a,c)),Ce(()=>l.unregisterOption(a)),me(()=>{l.comboboxState.value===0&&p.value&&l.activationTrigger.value!==0&&Z(()=>{var e,h;return(h=(e=j(d))==null?void 0:e.scrollIntoView)==null?void 0:h.call(e,{block:"nearest"})})});function x(e){if(t.disabled)return e.preventDefault();l.selectOption(a),l.mode.value===0&&l.closeCombobox(),Le()||requestAnimationFrame(()=>{var h;return(h=j(l.inputRef))==null?void 0:h.focus()})}function y(){if(t.disabled)return l.goToOption(L.Nothing);l.goToOption(L.Specific,a)}let P=at();function $(e){P.update(e)}function r(e){P.wasMoved(e)&&(t.disabled||p.value||l.goToOption(L.Specific,a,0))}function i(e){P.wasMoved(e)&&(t.disabled||p.value&&(l.optionsPropsRef.value.hold||l.goToOption(L.Nothing)))}return()=>{let{disabled:e}=t,h={active:p.value,selected:n.value,disabled:e},I={id:a,ref:d,role:"option",tabIndex:e===!0?void 0:-1,"aria-disabled":e===!0?!0:void 0,"aria-selected":n.value,disabled:void 0,onClick:x,onFocus:y,onPointerenter:$,onMouseenter:$,onPointermove:r,onMousemove:r,onPointerleave:i,onMouseleave:i};return ie({ourProps:I,theirProps:t,slot:h,attrs:v,slots:u,name:"ComboboxOption"})}}});const te=t=>!(t===""||t===null),ft=t=>{let u=/^[0-9]+$/;return!!t.match(u)},bt=(t,u)=>t.length<=u,gt=t=>{let u=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!t.match(u)},xt=["id","value","name"],yt=["for"],Oe={__name:"RadioGroupForm",props:{questionId:String,options:Array,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>(f(!0),w(K,null,be(t.options,(d,p)=>(f(),w("div",{key:d.title,class:"flex items-center my-3"},[Pe(s("input",{id:`radio-${p}${t.questionId}`,type:"radio",value:d.id,"onUpdate:modelValue":a[0]||(a[0]=n=>m.value=n),name:`name-${p}${t.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,xt),[[Ue,m.value]]),s("label",{for:`radio-${p}${t.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300 capitalize"},F(d.title),9,yt)]))),128))}},ht={class:"grid grid-cols-4"},Vt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},_t={class:"text-red-700"},wt={class:"relative col-span-4 mt-1 rounded-md ms-4"},St={class:"col-span-4 text-end"},Ot={class:"text-xs text-red-600"},Rt={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>{var d;return f(),w("div",ht,[s("label",Vt,[Ee(F(t.question.statement)+" ",1),s("span",_t,F(t.question.isRequired==="true"?"*":""),1)]),s("div",wt,[_(Oe,{questionId:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionId","options","modelValue"])]),s("div",St,[s("span",Ot,F((d=t.question.error)==null?void 0:d.text),1)])])}}},It={class:"grid grid-cols-4"},kt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900"},Ct={class:"relative mt-1 rounded-md col-span-4 ps-4"},$t={class:"col-span-4 text-end"},Pt={class:"text-xs text-red-600"},Ut={__name:"MultipleSelection",props:{modelValue:{type:[Array,String]},question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>{var l;return Array.isArray(v.modelValue)?v.modelValue:(l=v.modelValue)==null?void 0:l.split(",")},set:l=>u("update:modelValue",l)});return(l,a)=>{var d;return f(),w("div",It,[s("label",kt,F(t.question.statement),1),s("div",Ct,[_(He,{questionIndex:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionIndex","options","modelValue"])]),s("div",$t,[s("span",Pt,F((d=t.question.error)==null?void 0:d.text),1)])])}}},Et={class:"relative mt-1"},Dt={class:"block text-sm font-medium leading-6 text-gray-900"},Tt={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},At={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},ae={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String}},emits:["update:modelValue"],setup(t,{emit:u}){const v=t;O(!0);const m=R({get:()=>v.modelValue,set:p=>u("update:modelValue",p)});let l=O(""),a=O(!1),d=R(()=>l.value===""?[]:v.items.filter(p=>p[`${v.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(l.value.toLowerCase().replace(/\s+/g,""))));return(p,n)=>(f(),q(A(dt),{modelValue:m.value,"onUpdate:modelValue":n[2]||(n[2]=c=>m.value=c)},{default:B(()=>[s("div",Et,[s("label",Dt,F(t.label),1),s("div",Tt,[_(A(pt),{class:re([t.error&&A(a)&&!m.value?"ring-red-600":"ring-gray-300","w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:c=>c==null?void 0:c[`${t.itemTitle}`],onChange:n[0]||(n[0]=c=>xe(l)?l.value=c.target.value:l=c.target.value),placeholder:t.placeholder},null,8,["class","displayValue","placeholder"]),_(A(ct),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:B(()=>[_(A(Xe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),_(A(ze),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:n[1]||(n[1]=c=>xe(l)?l.value="":l="")},{default:B(()=>[_(A(vt),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:B(()=>[A(d).length===0&&A(l)!==""?(f(),w("div",At," Sin datos ")):J("",!0),(f(!0),w(K,null,be(A(d),c=>(f(),q(A(mt),{as:"template",key:c[`${t.itemValue}`],value:c},{default:B(({selected:x,active:y})=>[s("li",{class:re(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":y,"text-gray-900":!y}])},[s("span",{class:re(["block truncate",{"font-medium":x,"font-normal":!x}])},F(c[`${t.itemTitle}`]),3),x?(f(),w("span",{key:0,class:re(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":y,"text-teal-600":!y}])},[_(A(Ye),{class:"h-5 w-5","aria-hidden":"true"})],2)):J("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Ft={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},jt={class:"grid grid-cols-3 gap-x-5"},Nt={class:"col-span-3"},Bt={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:u}){const v=t,m=new we,l=R({get:()=>v.modelValue,set:r=>u("update:modelValue",r)}),a=O([]),d=O([]),p=O([]),n=O({departamento:null,provincia:null,distrito:null}),c=async r=>{n.value.provincia=null,d.value=[],n.value.distrito=null,p.value=[],d.value=await m.getProvincias(r.code),u("update:modelValue",null)},x=async r=>{u("update:modelValue",null),p.value=[],n.value.distrito=null,p.value=await m.getDistritos(r.code)},y=async r=>{let i=await m.getUbigeo(r[0]);n.value.departamento={code:i.idDepartment,title:i.department},n.value.provincia={code:i.idProvince,title:i.province},n.value.distrito={code:i.idDistrict,title:i.district},v.question.other=r[1]},P=async()=>{a.value.length==0&&(a.value=await m.getDepartamentos())};return(async()=>{let r=l.value;r&&(r=r.split("%%%",2),await y(r))})(),(r,i)=>(f(),w(K,null,[s("label",Ft,F(t.question.statement),1),s("div",jt,[s("div",null,[_(ae,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:P,itemValue:"code",modelValue:n.value.departamento,"onUpdate:modelValue":[i[0]||(i[0]=e=>n.value.departamento=e),c]},null,8,["error","items","modelValue"])]),s("div",null,[_(ae,{error:t.error,items:d.value,itemValue:"code",placeholder:"Provincia",modelValue:n.value.provincia,"onUpdate:modelValue":[i[1]||(i[1]=e=>n.value.provincia=e),x]},null,8,["error","items","modelValue"])]),s("div",null,[_(ae,{error:t.error,items:p.value,itemValue:"code",placeholder:"Distrito",modelValue:n.value.distrito,"onUpdate:modelValue":[i[2]||(i[2]=e=>n.value.distrito=e),i[3]||(i[3]=e=>l.value=e.code)]},null,8,["error","items","modelValue"])]),s("div",Nt,[_(Q,{modelValue:t.question.other,"onUpdate:modelValue":i[4]||(i[4]=e=>t.question.other=e),label:"Dirección"},null,8,["modelValue"])])])],64))}},Lt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},zt={class:"grid grid-cols-3 gap-5"},Mt={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:u}){const v=t,m=new we,l=R({get:()=>v.modelValue,set:r=>u("update:modelValue",r)}),a=O([]),d=O([]),p=O([]),n=O({departamento:null,provincia:null,distrito:null}),c=async r=>{n.value.provincia=null,d.value=[],n.value.distrito=null,p.value=[],d.value=await m.getProvincias(r.code),u("update:modelValue",null)},x=async r=>{u("update:modelValue",null),p.value=[],n.value.distrito=null,p.value=await m.getDistritos(r.code)},y=async()=>{a.value=await m.getDepartamentos()},P=async r=>{let i=await m.getUbigeo(r);n.value.departamento={code:i.idDepartment,title:i.department},n.value.provincia={code:i.idProvince,title:i.province},n.value.distrito={code:i.idDistrict,title:i.district}};return(async()=>{l.value&&await P(l.value)})(),(r,i)=>(f(),w(K,null,[s("label",Lt,F(t.question.statement),1),s("div",zt,[s("div",null,[_(ae,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:y,itemValue:"code",modelValue:n.value.departamento,"onUpdate:modelValue":[i[0]||(i[0]=e=>n.value.departamento=e),c]},null,8,["error","items","modelValue"])]),s("div",null,[_(ae,{error:t.error,items:d.value,itemValue:"code",placeholder:"Provincia",modelValue:n.value.provincia,"onUpdate:modelValue":[i[1]||(i[1]=e=>n.value.provincia=e),x]},null,8,["error","items","modelValue"])]),s("div",null,[_(ae,{error:t.error,items:p.value,itemValue:"code",placeholder:"Distrito",modelValue:n.value.distrito,"onUpdate:modelValue":[i[2]||(i[2]=e=>n.value.distrito=e),i[3]||(i[3]=e=>l.value=e.code)]},null,8,["error","items","modelValue"])])])],64))}},qt={__name:"StudyCycleForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>v.modelValue,set:a=>u("update:modelValue",a)}),l=[{id:1,title:"Semestre I"},{id:2,title:"Semestre II    "},{id:3,title:"Semestre III"},{id:4,title:"Semestre IV"},{id:5,title:"Semestre V"},{id:6,title:"Semestre VI"},{id:7,title:"Semestre VII"},{id:8,title:"Semestre VIII"},{id:9,title:"Semestre IX"},{id:10,title:"Semestre X"},{id:11,title:"Semestre XI"},{id:12,title:"Semestre XII"}];return(a,d)=>(f(),q(ce,{modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=p=>m.value=p),label:t.question.statement,error:t.question.error,options:l},null,8,["modelValue","label","error"]))}},Kt=[{id:"001",title:"trabajo social"},{id:"003",title:"medicina veterinaria y zootecnía"},{id:"004",title:"medicina humana"},{id:"005",title:"ingeniería química"},{id:"006",title:"ingeniería mecánica, eléctrica, electrónica y sistemas"},{id:"007",title:"ingeniería geológica y metalúrgica"},{id:"008",title:"ingeniería estadística e informática"},{id:"009",title:"ingeniería económica"},{id:"010",title:"ingeniería de minas"},{id:"011",title:"ingeniería civil y arquitectura"},{id:"012",title:"ingeniería agrícola"},{id:"013",title:"ciencias sociales"},{id:"014",title:"enfermería"},{id:"015",title:"ciencias jurídicas y políticas"},{id:"016",title:"ciencias de la salud"},{id:"017",title:"ciencias de la educación"},{id:"018",title:"ciencias contables y administrativas"},{id:"019",title:"ciencias biológicas"},{id:"020",title:"ciencias agrarias"}],Ht={__name:"FacuForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>(f(),q(ce,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=d=>m.value=d),label:t.question.statement,error:t.question.error,options:A(Kt)},null,8,["modelValue","label","error","options"]))}},Xt=[{id:"001",title:"administración"},{id:"002",title:"antropología"},{id:"003",title:"arquitectura y urbanismo"},{id:"004",title:"arte: artes plásticas"},{id:"005",title:"arte: danza"},{id:"006",title:"arte: música"},{id:"007",title:"arte: teatro"},{id:"008",title:"biología: ecología"},{id:"009",title:"biología: microbiología y laboratorio clínico"},{id:"010",title:"biología: pesquería"},{id:"011",title:"ciencias contables"},{id:"012",title:"ciencias de la comunicación social"},{id:"013",title:"ciencias físico matemáticas: física"},{id:"014",title:"ciencias físico matemáticas: matemáticas"},{id:"015",title:"derecho"},{id:"034",title:"educación física"},{id:"035",title:"educación inicial"},{id:"036",title:"educación primaria"},{id:"037",title:"educación secundaria de la especialidad de ciencia, tecnología y ambiente"},{id:"038",title:"educación secundaria de la especialidad de ciencias sociales"},{id:"039",title:"educación secundaria de la especialidad de lengua, literatura, psicología y filosofía"},{id:"040",title:"educación secundaria de la especialidad de matemática, física, computación e informática"},{id:"041",title:"enfermería"},{id:"042",title:"ingeniería agrícola"},{id:"043",title:"ingeniería agroindustrial"},{id:"044",title:"ingeniería agronómica"},{id:"045",title:"ingeniería civil"},{id:"046",title:"ingeniería de minas"},{id:"047",title:"ingeniería de sistemas"},{id:"048",title:"ingeniería económica"},{id:"049",title:"ingeniería electrónica"},{id:"050",title:"ingeniería estadística e informática"},{id:"051",title:"ingeniería geológica"},{id:"052",title:"ingeniería mecánica eléctrica"},{id:"053",title:"ingeniería metalúrgica"},{id:"054",title:"ingeniería química"},{id:"055",title:"ingeniería topográfica y agrimensura"},{id:"169",title:"medicina humana"},{id:"170",title:"medicina veterinaria y zootecnía"},{id:"171",title:"nutrición humana"},{id:"172",title:"odontología"},{id:"231",title:"sociología"},{id:"232",title:"trabajo social"},{id:"233",title:"turismo"}],Yt={__name:"ProStudyForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>(f(),q(ce,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=d=>m.value=d),label:t.question.statement,error:t.question.error,options:A(Xt)},null,8,["modelValue","label","error","options"]))}},Gt={class:"grid grid-cols-4"},Jt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},Zt={class:"relative col-span-4 mt-1 rounded-md ms-4"},Qt={class:"col-span-4"},Wt={class:"col-span-4 text-end"},ea={class:"text-xs text-red-600"},ta={__name:"OneSelectionOtherForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=R({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>{var d;return f(),w("div",Gt,[s("label",Jt,F(t.question.statement),1),s("div",Zt,[_(Oe,{questionId:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionId","options","modelValue"])]),s("div",Qt,[_(Q,{modelValue:t.question.answer.text,"onUpdate:modelValue":a[1]||(a[1]=p=>t.question.answer.text=p),label:"Especifique"},null,8,["modelValue"])]),s("div",Wt,[s("span",ea,F((d=t.question.error)==null?void 0:d.text),1)])])}}},aa={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},la={class:"col-span-2 rounded-lg"},oa={key:0,class:"mb-4"},ia={key:1,class:"mb-4"},na={key:2,class:"mb-4"},sa={key:3,class:"mb-4"},ra={key:4,class:"mb-4"},ua={key:5,class:"mb-4"},da={key:6,class:"mb-4"},ca={key:7,class:"mb-4"},pa={key:8,class:"mb-4"},va={key:9,class:"mb-4"},ma={key:10,class:"mb-4"},fa={key:11,class:"mb-4"},ba={key:12,class:"mb-4"},ga={class:"w-full text-end"},xa={class:"text-xs text-red-600"},ya={key:13,class:"mb-4"},ha={class:"w-full text-end"},Va={class:"text-xs text-red-600"},_a={class:"flex justify-end mt-4"},wa={__name:"Form",props:{questions:Array,section:Object},emits:["onSuccess","onFaild"],setup(t,{emit:u}){const v=t,m=new Ve,l=R(()=>v.questions),a=O(!0),d=r=>{l.value.map(i=>(i.isDependent==r.id&&(i.optionTrigger===r.answer.options?i.show=!0:i.show=!1),i))},p=(r,i,e=!1)=>{e&&d(i),i.isRequired==="true"&&n(r,i)},n=(r,i)=>{l.value.map(e=>{e.id===i.id&&(te(r)?i.isRequired==="false"&&!te(r)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Obligatorio"},a.value=!1))})},c=(r,i)=>{l.value.map(e=>{e.id==i.id&&(i.isRequired==="true"&&!te(r)?(e.error={isError:!0,text:"Obligatorio"},a.value=!1):i.isRequired==="false"&&!te(r)?(e.error={isError:!1,text:null},a.value=!0):gt(r)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Formato no valido"},a.value=!1))})},x=(r,i)=>{l.value.map(e=>{e.id==i.id&&(te(r)?ft(r)?i.isRequired==="false"&&!te(r)?(e.error={isError:!1,text:null},a.value=!0):bt(r,9)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Longitud debe se 9 digitos"},a.value=!1):(e.error={isError:!0,text:"Solo se permite numeros"},a.value=!1):(e.error={isError:!0,text:"Obligatorio"},a.value=!1))})},y=()=>{let r={section_:v.section.id,answers_:[]};const i=[1,2,3,5,8,9,10,20,50],e=[0,4],h=[6],I=[11],g=[30];return l.value.forEach(o=>{var N;if(!o.isDependent||o.show)if(i.includes(o.type))r.answers_.push({qst_:o.id,opts_:null,txt_:o.answer.text});else if(e.includes(o.type))r.answers_.push({qst_:o.id,opts_:[o.answer.options],txt_:null});else if(h.includes(o.type))r.answers_.push({qst_:o.id,opts_:Array.isArray(o.answer.options)?o.answer.options:(N=o.answer.options)==null?void 0:N.split(","),txt_:null});else if(I.includes(o.type)){let b=o.answer.text.split("%%%",2);r.answers_.push({qst_:o.id,opts_:null,txt_:b[0]+"%%%"+o.other})}else g.includes(o.type)&&r.answers_.push({qst_:o.id,opts_:[o.answer.options],txt_:o.answer.text})}),r},P=()=>{var r=0;return l.value.forEach(i=>{var e,h;!((e=i.answer)!=null&&e.options)&&!((h=i.answer)!=null&&h.text)&&i.isRequired==="true"&&(!i.isDependent||i.show)?(i.error={isError:!0,text:"Obligatorio"},r++):i.error={isError:!1,text:null}}),!(r>0)},$=async()=>{if(P()){let i=y(),e=await m.saveSection(i);return u("onSuccess"),e}return console.error("Error ..."),u("onFaild"),!1};return(r,i)=>(f(),w("div",aa,[s("div",la,[(f(!0),w(K,null,be(l.value,(e,h)=>{var I,g;return f(),w("div",{key:e.id},[s("ul",null,[!e.isDependent||e.show?(f(),w(K,{key:0},[e.type===0?(f(),w("li",oa,[_(Rt,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[o=>e.answer.options=o,o=>p(o,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===1?(f(),w("li",ia,[_(Q,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(o,e)],type:"text",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===2?(f(),w("li",na,[_(Q,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(o,e)],type:"date",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===3?(f(),w("li",sa,[_(Q,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(e.answer,e)],type:"number",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===50?(f(),w("li",ra,[_(qt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":o=>e.answer.text=o},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===21?(f(),w("li",ua,[_(Ht,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":o=>e.answer.text=o},null,8,["question","modelValue","onUpdate:modelValue"])])):J("",!0),e.type===30?(f(),w("li",da,[_(ta,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[o=>e.answer.options=o,o=>p(o,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===20?(f(),w("li",ca,[_(Yt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":o=>e.answer.text=o},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===4?(f(),w("li",pa,[_(ce,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(o,e,h)],label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):e.type===6?(f(),w("li",va,[_(Ut,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[o=>e.answer.options=o,o=>p(o,e,h)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===8?(f(),w("li",ma,[_(Q,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>c(o,e)],type:"email",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===9?(f(),w("li",fa,[_(Q,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>x(o,e)],type:"tel",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===10?(f(),w("li",ba,[_(Mt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),s("div",ga,[s("span",xa,F((I=e.error)==null?void 0:I.text),1)])])):e.type===11?(f(),w("li",ya,[_(Bt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),s("div",ha,[s("span",Va,F((g=e.error)==null?void 0:g.text),1)])])):J("",!0)],64)):J("",!0)])])}),128)),s("div",_a,[De(r.$slots,"footer",{submit:$})])])]))}};const Sa={class:"z-10 fixed right-2 top-1/2 block md:hidden"},Oa=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})],-1),Ra={class:"text-sm sm:text-xl uppercase font-bold p-5 text-blue-950"},Ia={class:"grid grid-cols-4 gap-4"},ka=s("strong",null," Indicaciones: ",-1),Ca=s("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),$a=s("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),Pa={class:"col-span-4 lg:col-span-1 hidden md:block"},Ua={class:"col-span-4 lg:col-span-3 rounded-lg bg-white p-6 shadow-lg mb-4"},Ea={class:""},Da={class:"text-lg font-semibold mb-3 uppercase"},Ta={class:"text-sm uppercase mb-4 font-bold"},Aa={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},Fa={class:"flex justify-between w-full"},ja={class:"previous"},Na={class:"text-start"},Ba=s("span",null,"Anterior",-1),La={class:"text-lg capitalize"},za={class:"text-start"},Ma=s("span",null,"Anterior",-1),qa={class:"text-lg capitalize"},Ka={class:"nexts"},Ha={class:"text-end"},Xa=s("span",null,"Siguiente ",-1),Ya={class:"text-lg capitalize"},Ga={class:"text-end"},Ja=s("span",null,"Siguiente ",-1),Za={class:"text-lg capitalize"},Qa=s("div",{class:"text-end"},[s("span",null," Guardar "),s("h5",{class:"text-lg capitalize"},"Finalizar")],-1),rl={__name:"survey",setup(t){const u=new Te,v=new Ve,m=Ae(),l=Fe(),a=O(null),d=O(null),p=O(null),n=O(null),c=O({section:null,topic:null}),x=O({section:null,topic:null}),y=O({section:null,topic:null}),P=O(!1),$=O(!1),r=()=>{window.scroll({top:80,left:0,behavior:"smooth"})},i=async()=>{$.value=!0,await v.finishSurvey(a.value.id)&&(a.value.hasFinished="true"),$.value=!1},e=async U=>{$.value=!0;let E=await g(U.id);E.length>0&&await m.setPositions(a.value.id,U.id,E[0].id)&&(a.value.topic=U.id,a.value.section=E[0].id,p.value=E,await C(a.value),n.value=await o(c.value.section.id)),$.value=!1},h=async U=>{$.value=!0;let E=await o(U.id);E.length>0&&await m.setPositions(a.value.id,c.value.topic.id,U.id)&&(a.value.section=U.id,await C(a.value),n.value=E),$.value=!1},I=async U=>await v.getTopics(U),g=async U=>await v.getSections(U),o=async U=>await v.getQuestions(U),N=(U,E)=>{let z=E.findIndex(G=>U.id===G.id);return z!==-1&&E.length!==z+1&&E.findIndex(H=>{var X;return((X=E[z+1])==null?void 0:X.id)===H.id})!==-1?E[z+1]:null},b=(U,E)=>{let z=E.findIndex(G=>U.id===G.id);return z!==-1&&z!==0&&E.findIndex(H=>{var X;return((X=E[z-1])==null?void 0:X.id)===H.id})!==-1?E[z-1]:null},S=async U=>{c.value.section=p.value.find(E=>E.id===U.section),c.value.topic=d.value.find(E=>E.id===U.topic)},k=async()=>{x.value.topic=N(c.value.topic,d.value),x.value.section=N(c.value.section,p.value)},V=async()=>{y.value.topic=b(c.value.topic,d.value),y.value.section=b(c.value.section,p.value)},C=async U=>{await S(U),await k(),await V()},D=async()=>{a.value=await v.getSurvey(l.params.id),a.value?a.value.topic&&a.value.section?(d.value=await I(a.value.id),p.value=await g(a.value.topic),n.value=await o(a.value.section),await C(a.value)):(u.back(),m.cont++):u.push({name:"home"})};return(async()=>{console.log("init survey "),P.value=!0,await D(),P.value=!1})(),(U,E)=>(f(),q(je,null,{default:B(()=>{var z,G;return[P.value?(f(),w(K,{key:0},[P.value?(f(),q(ye,{key:0})):J("",!0)],64)):(f(),w(K,{key:1},[s("div",Sa,[_(Me,null,{activator:B(({modal:H})=>[_(A(ee),{onClick:H,color:"dark"},{default:B(()=>[Oa]),_:2},1032,["onClick"])]),content:B(()=>[_(he,{changeTopic:e,topics:d.value,current:c.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),_:1})]),s("h2",Ra,F(a.value.title),1),s("div",Ia,[_(A(Ne),{type:"info",class:"col-span-4",ref:"alert"},{default:B(()=>[ka,Ca,$a]),_:1},512),s("div",Pa,[_(he,{changeTopic:e,topics:d.value,current:c.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),s("div",Ua,[s("div",Ea,[s("h3",Da,F((z=c.value.topic)==null?void 0:z.title),1),s("h4",Ta,F((G=c.value.section)==null?void 0:G.title),1)]),p.value?(f(),w(K,{key:1},[$.value?(f(),q(ye,{key:0})):(f(),q(wa,{key:1,questions:n.value,section:c.value.section},{footer:B(({submit:H})=>[s("div",Fa,[s("div",ja,[y.value.section&&a.value.hasFinished==="true"?(f(),q(A(ee),{key:0,onClick:async()=>{await H()&&(await h(y.value.section),r())}},{default:B(()=>[s("div",Na,[Ba,s("h5",La,F(y.value.section.title),1)])]),_:2},1032,["onClick"])):(f(),w(K,{key:1},[y.value.topic&&a.value.hasFinished==="true"?(f(),q(A(ee),{key:0,color:"light",onClick:async()=>{await H()&&(await e(y.value.topic),r())}},{default:B(()=>[s("div",za,[Ma,s("h5",qa,F(y.value.topic.title),1)])]),_:2},1032,["onClick"])):J("",!0)],64))]),s("div",Ka,[x.value.section?(f(),q(A(ee),{key:0,onClick:async()=>{await H()&&(await h(x.value.section),r())}},{default:B(()=>[s("div",Ha,[Xa,s("h5",Ya,F(x.value.section.title),1)])]),_:2},1032,["onClick"])):(f(),w(K,{key:1},[x.value.topic!==null?(f(),q(A(ee),{key:0,color:"light",onClick:async()=>{await H()&&(await e(x.value.topic),r())}},{default:B(()=>[s("div",Ga,[Ja,s("h5",Za,F(x.value.topic.title),1)])]),_:2},1032,["onClick"])):(f(),w(K,{key:1},[a.value.hasFinished==="false"?(f(),q(A(ee),{key:0,color:"green",onClick:async()=>{await H()&&(await i(),r())}},{default:B(()=>[Qa]),_:2},1032,["onClick"])):J("",!0)],64))],64))])])]),_:1},8,["questions","section"]))],64)):(f(),w("h4",Aa," no hay secciones "))])])],64))]}),_:1}))}};export{rl as default};
