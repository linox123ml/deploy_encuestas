var Oe=Object.defineProperty;var Re=(t,r,v)=>r in t?Oe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:v}):t[r]=v;var ae=(t,r,v)=>(Re(t,typeof r!="symbol"?r+"":r,v),v);import{I as ne,d as le,r as O,b as I,J as D,p as Ie,e as me,K as pe,O as be,F as K,w as ve,f as ke,n as J,i as Ce,o as f,c as S,m as fe,A as $e,Q as Pe,a as s,t as j,l as Ue,j as _,g as q,h as B,u as T,q as se,R as ge,x as Q,k as Ee,S as he,C as De,y as Ae,V as Te,W as je,X as xe,P as W,M as Fe}from"./index-83fc9fff.js";import{r as Ne,n as Be,S as Le,_ as ze}from"./HModal-c6d44ece.js";import{_ as ye}from"./IndexSurvey-fa1d195a.js";import{d as Me,e as qe,_ as Ke,r as He,b as Xe,a as de}from"./HSelect-e2da4ca6.js";import{u as G,o as F,F as Ge,c as Ye,l as re,K as Je,H as oe,T as Ve,t as ce,N as ue,p as Ze,O as Qe,a as M}from"./use-outside-click-974b3af5.js";import{x as We,a as L,b as et,u as tt}from"./use-text-value-8ac14269.js";import{p as at}from"./use-tree-walker-be90f0c7.js";import{f as lt,a as ot,_ as Z}from"./InputForm-8049f59b.js";class _e{constructor(){ae(this,"getDepartamentos",async()=>(await ne.get("http://38.43.133.27/SURVEY_PLACES/v1/departments/")).data.data);ae(this,"getProvincias",async r=>(await ne.get(`http://38.43.133.27/SURVEY_PLACES/v1/provinces/${r}/`)).data.data);ae(this,"getDistritos",async r=>(await ne.get(`http://38.43.133.27/SURVEY_PLACES/v1/districts/${r}/`)).data.data);ae(this,"getUbigeo",async r=>{try{return(await ne.get(`http://38.43.133.27/SURVEY_PLACES/v1/${r}/`)).data.data[0]}catch{return null}})}}function it(t,r){return t===r}var nt=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(nt||{}),st=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(st||{}),rt=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(rt||{});let we=Symbol("ComboboxContext");function ie(t){let r=Ce(we,null);if(r===null){let v=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,ie),v}return r}let ut=le({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>it},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:r,attrs:v,emit:m}){let l=O(1),a=O(null),u=O(null),p=O(null),n=O(null),c=O({static:!1,hold:!1}),y=O([]),x=O(null),P=O(1),U=O(!1);function d(b=w=>w){let w=x.value!==null?y.value[x.value]:null,C=Qe(b(y.value.slice()),$=>F($.dataRef.domRef)),V=w?C.indexOf(w):null;return V===-1&&(V=null),{options:C,activeOptionIndex:V}}let o=I(()=>t.multiple?1:0),e=I(()=>t.nullable),[h,R]=Me(I(()=>t.modelValue===void 0?G(o.value,{[1]:[],[0]:void 0}):t.modelValue),b=>m("update:modelValue",b),I(()=>t.defaultValue)),g={comboboxState:l,value:h,mode:o,compare(b,w){if(typeof t.by=="string"){let C=t.by;return(b==null?void 0:b[C])===(w==null?void 0:w[C])}return t.by(b,w)},defaultValue:I(()=>t.defaultValue),nullable:e,inputRef:u,labelRef:a,buttonRef:p,optionsRef:n,disabled:I(()=>t.disabled),options:y,change(b){R(b)},activeOptionIndex:I(()=>{if(U.value&&x.value===null&&y.value.length>0){let b=y.value.findIndex(w=>!w.dataRef.disabled);b!==-1&&(x.value=b)}return x.value}),activationTrigger:P,optionsPropsRef:c,closeCombobox(){U.value=!1,!t.disabled&&l.value!==1&&(l.value=1,x.value=null)},openCombobox(){if(U.value=!0,t.disabled||l.value===0)return;let b=y.value.findIndex(w=>{let C=D(w.dataRef.value);return G(o.value,{[0]:()=>g.compare(D(g.value.value),D(C)),[1]:()=>D(g.value.value).some(V=>g.compare(D(V),D(C)))})});b!==-1&&(x.value=b),l.value=0},goToOption(b,w,C){if(U.value=!1,t.disabled||n.value&&!c.value.static&&l.value===1)return;let V=d();if(V.activeOptionIndex===null){let A=V.options.findIndex(k=>!k.dataRef.disabled);A!==-1&&(V.activeOptionIndex=A)}let $=We(b===L.Specific?{focus:L.Specific,id:w}:{focus:b},{resolveItems:()=>V.options,resolveActiveIndex:()=>V.activeOptionIndex,resolveId:A=>A.id,resolveDisabled:A=>A.dataRef.disabled});x.value=$,P.value=C??1,y.value=V.options},selectOption(b){let w=y.value.find(V=>V.id===b);if(!w)return;let{dataRef:C}=w;R(G(o.value,{[0]:()=>C.value,[1]:()=>{let V=D(g.value.value).slice(),$=D(C.value),A=V.findIndex(k=>g.compare($,D(k)));return A===-1?V.push($):V.splice(A,1),V}}))},selectActiveOption(){if(g.activeOptionIndex.value===null)return;let{dataRef:b,id:w}=y.value[g.activeOptionIndex.value];R(G(o.value,{[0]:()=>b.value,[1]:()=>{let C=D(g.value.value).slice(),V=D(b.value),$=C.findIndex(A=>g.compare(V,D(A)));return $===-1?C.push(V):C.splice($,1),C}})),g.goToOption(L.Specific,w)},registerOption(b,w){let C={id:b,dataRef:w},V=d($=>[...$,C]);if(x.value===null){let $=w.value.value;G(o.value,{[0]:()=>g.compare(D(g.value.value),D($)),[1]:()=>D(g.value.value).some(A=>g.compare(D(A),D($)))})&&(V.activeOptionIndex=V.options.indexOf(C))}y.value=V.options,x.value=V.activeOptionIndex,P.value=1,V.options.some($=>!F($.dataRef.domRef))&&requestAnimationFrame(()=>{let $=d();y.value=$.options,x.value=$.activeOptionIndex})},unregisterOption(b){var w;g.activeOptionIndex.value!==null&&((w=g.options.value[g.activeOptionIndex.value])==null?void 0:w.id)===b&&(U.value=!0);let C=d(V=>{let $=V.findIndex(A=>A.id===b);return $!==-1&&V.splice($,1),V});y.value=C.options,x.value=C.activeOptionIndex,P.value=1}};Ge([u,p,n],()=>g.closeCombobox(),I(()=>l.value===0)),Ie(we,g),Ye(I(()=>G(l.value,{[0]:re.Open,[1]:re.Closed})));let i=I(()=>g.activeOptionIndex.value===null?null:y.value[g.activeOptionIndex.value].dataRef.value),N=I(()=>{var b;return(b=F(u))==null?void 0:b.closest("form")});return me(()=>{pe([N],()=>{if(!N.value||t.defaultValue===void 0)return;function b(){g.change(t.defaultValue)}return N.value.addEventListener("reset",b),()=>{var w;(w=N.value)==null||w.removeEventListener("reset",b)}},{immediate:!0})}),()=>{let{name:b,disabled:w,form:C,...V}=t,$={open:l.value===0,disabled:w,activeIndex:g.activeOptionIndex.value,activeOption:i.value,value:h.value};return be(K,[...b!=null&&h.value!=null?qe({[b]:h.value}).map(([A,k])=>be(lt,Je({features:ot.Hidden,key:A,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:C,name:A,value:k}))):[],oe({theirProps:{...v,...Ve(V,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:$,slots:r,attrs:v,name:"Combobox"})])}}}),dt=le({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${ce()}`}},setup(t,{attrs:r,slots:v,expose:m}){let l=ie("ComboboxButton");m({el:l.buttonRef,$el:l.buttonRef});function a(n){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(n.preventDefault(),l.openCombobox()),J(()=>{var c;return(c=F(l.inputRef))==null?void 0:c.focus({preventScroll:!0})}))}function u(n){switch(n.key){case M.ArrowDown:n.preventDefault(),n.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),J(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case M.ArrowUp:n.preventDefault(),n.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),J(()=>{l.value.value||l.goToOption(L.Last)})),J(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case M.Escape:if(l.comboboxState.value!==0)return;n.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&n.stopPropagation(),l.closeCombobox(),J(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return}}let p=et(I(()=>({as:t.as,type:r.type})),l.buttonRef);return()=>{var n,c;let y={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:x,...P}=t,U={ref:l.buttonRef,id:x,type:p.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(n=F(l.optionsRef))==null?void 0:n.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(c=F(l.labelRef))==null?void 0:c.id,x].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:u,onClick:a};return oe({ourProps:U,theirProps:P,slot:y,attrs:r,slots:v,name:"ComboboxButton"})}}}),ct=le({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${ce()}`}},emits:{change:t=>!0},setup(t,{emit:r,attrs:v,slots:m,expose:l}){let a=ie("ComboboxInput"),u={value:!1};l({el:a.inputRef,$el:a.inputRef});let p=I(()=>{var e;let h=a.value.value;return F(a.inputRef)?typeof t.displayValue<"u"&&h!==void 0?(e=t.displayValue(h))!=null?e:"":typeof h=="string"?h:"":""});me(()=>{pe([p,a.comboboxState],([e,h],[R,g])=>{if(u.value)return;let i=F(a.inputRef);i&&(g===0&&h===1||e!==R)&&(i.value=e)},{immediate:!0}),pe([a.comboboxState],([e],[h])=>{if(e===0&&h===1){let R=F(a.inputRef);if(!R)return;let g=R.value,{selectionStart:i,selectionEnd:N,selectionDirection:b}=R;R.value="",R.value=g,b!==null?R.setSelectionRange(i,N,b):R.setSelectionRange(i,N)}})});let n=O(!1),c=O(null);function y(){n.value=!0}function x(){Ne().nextFrame(()=>{n.value=!1,c.value&&(a.openCombobox(),r("change",c.value),c.value=null)})}function P(e){switch(u.value=!0,e.key){case M.Backspace:case M.Delete:if(a.mode.value!==0||!a.nullable.value)return;let h=e.currentTarget;requestAnimationFrame(()=>{if(h.value===""){a.change(null);let R=F(a.optionsRef);R&&(R.scrollTop=0),a.goToOption(L.Nothing)}});break;case M.Enter:if(u.value=!1,a.comboboxState.value!==0||n.value)return;if(e.preventDefault(),e.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case M.ArrowDown:return u.value=!1,e.preventDefault(),e.stopPropagation(),G(a.comboboxState.value,{[0]:()=>a.goToOption(L.Next),[1]:()=>a.openCombobox()});case M.ArrowUp:return u.value=!1,e.preventDefault(),e.stopPropagation(),G(a.comboboxState.value,{[0]:()=>a.goToOption(L.Previous),[1]:()=>{a.openCombobox(),J(()=>{a.value.value||a.goToOption(L.Last)})}});case M.Home:if(e.shiftKey)break;return u.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.First);case M.PageUp:return u.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.First);case M.End:if(e.shiftKey)break;return u.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.Last);case M.PageDown:return u.value=!1,e.preventDefault(),e.stopPropagation(),a.goToOption(L.Last);case M.Escape:if(u.value=!1,a.comboboxState.value!==0)return;e.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&e.stopPropagation(),a.closeCombobox();break;case M.Tab:if(u.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function U(e){if(n.value){c.value=e;return}a.openCombobox(),r("change",e)}function d(){u.value=!1}let o=I(()=>{var e,h,R,g;return(g=(R=(h=t.defaultValue)!=null?h:a.defaultValue.value!==void 0?(e=t.displayValue)==null?void 0:e.call(t,a.defaultValue.value):null)!=null?R:a.defaultValue.value)!=null?g:""});return()=>{var e,h,R,g,i,N;let b={open:a.comboboxState.value===0},{id:w,displayValue:C,onChange:V,...$}=t,A={"aria-controls":(e=a.optionsRef.value)==null?void 0:e.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(h=a.options.value[a.activeOptionIndex.value])==null?void 0:h.id,"aria-labelledby":(i=(R=F(a.labelRef))==null?void 0:R.id)!=null?i:(g=F(a.buttonRef))==null?void 0:g.id,"aria-autocomplete":"list",id:w,onCompositionstart:y,onCompositionend:x,onKeydown:P,onInput:U,onBlur:d,role:"combobox",type:(N=v.type)!=null?N:"text",tabIndex:0,ref:a.inputRef,defaultValue:o.value,disabled:a.disabled.value===!0?!0:void 0};return oe({ourProps:A,theirProps:$,slot:b,attrs:v,slots:m,features:ue.RenderStrategy|ue.Static,name:"ComboboxInput"})}}}),pt=le({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:r,slots:v,expose:m}){let l=ie("ComboboxOptions"),a=`headlessui-combobox-options-${ce()}`;m({el:l.optionsRef,$el:l.optionsRef}),ve(()=>{l.optionsPropsRef.value.static=t.static}),ve(()=>{l.optionsPropsRef.value.hold=t.hold});let u=Ze(),p=I(()=>u!==null?(u.value&re.Open)===re.Open:l.comboboxState.value===0);return at({container:I(()=>F(l.optionsRef)),enabled:I(()=>l.comboboxState.value===0),accept(n){return n.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}}),()=>{var n,c,y;let x={open:l.comboboxState.value===0},P={"aria-labelledby":(y=(n=F(l.labelRef))==null?void 0:n.id)!=null?y:(c=F(l.buttonRef))==null?void 0:c.id,id:a,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0},U=Ve(t,["hold"]);return oe({ourProps:P,theirProps:U,slot:x,attrs:r,slots:v,features:ue.RenderStrategy|ue.Static,visible:p.value,name:"ComboboxOptions"})}}}),vt=le({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:r,attrs:v,expose:m}){let l=ie("ComboboxOption"),a=`headlessui-combobox-option-${ce()}`,u=O(null);m({el:u,$el:u});let p=I(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===a:!1),n=I(()=>G(l.mode.value,{[0]:()=>l.compare(D(l.value.value),D(t.value)),[1]:()=>D(l.value.value).some(e=>l.compare(D(e),D(t.value)))})),c=I(()=>({disabled:t.disabled,value:t.value,domRef:u}));me(()=>l.registerOption(a,c)),ke(()=>l.unregisterOption(a)),ve(()=>{l.comboboxState.value===0&&p.value&&l.activationTrigger.value!==0&&J(()=>{var e,h;return(h=(e=F(u))==null?void 0:e.scrollIntoView)==null?void 0:h.call(e,{block:"nearest"})})});function y(e){if(t.disabled)return e.preventDefault();l.selectOption(a),l.mode.value===0&&l.closeCombobox(),Be()||requestAnimationFrame(()=>{var h;return(h=F(l.inputRef))==null?void 0:h.focus()})}function x(){if(t.disabled)return l.goToOption(L.Nothing);l.goToOption(L.Specific,a)}let P=tt();function U(e){P.update(e)}function d(e){P.wasMoved(e)&&(t.disabled||p.value||l.goToOption(L.Specific,a,0))}function o(e){P.wasMoved(e)&&(t.disabled||p.value&&(l.optionsPropsRef.value.hold||l.goToOption(L.Nothing)))}return()=>{let{disabled:e}=t,h={active:p.value,selected:n.value,disabled:e},R={id:a,ref:u,role:"option",tabIndex:e===!0?void 0:-1,"aria-disabled":e===!0?!0:void 0,"aria-selected":n.value,disabled:void 0,onClick:y,onFocus:x,onPointerenter:U,onMouseenter:U,onPointermove:d,onMousemove:d,onPointerleave:o,onMouseleave:o};return oe({ourProps:R,theirProps:t,slot:h,attrs:v,slots:r,name:"ComboboxOption"})}}});const ee=t=>!(t===""||t===null),mt=t=>{let r=/^[0-9]+$/;return!!t.match(r)},ft=(t,r)=>t.length<=r,bt=t=>{let r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!t.match(r)},gt=["id","value","name"],xt=["for"],Se={__name:"RadioGroupForm",props:{questionId:String,options:Array,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>v.modelValue,set:l=>r("update:modelValue",l)});return(l,a)=>(f(!0),S(K,null,fe(t.options,(u,p)=>(f(),S("div",{key:u.title,class:"flex items-center my-3"},[$e(s("input",{id:`radio-${p}${t.questionId}`,type:"radio",value:u.id,"onUpdate:modelValue":a[0]||(a[0]=n=>m.value=n),name:`name-${p}${t.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,gt),[[Pe,m.value]]),s("label",{for:`radio-${p}${t.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300 capitalize"},j(u.title),9,xt)]))),128))}},yt={class:"grid grid-cols-4"},ht={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},Vt={class:"text-red-700"},_t={class:"relative col-span-4 mt-1 rounded-md ms-4"},wt={class:"col-span-4 text-end"},St={class:"text-xs text-red-600"},Ot={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>v.modelValue,set:l=>r("update:modelValue",l)});return(l,a)=>{var u;return f(),S("div",yt,[s("label",ht,[Ue(j(t.question.statement)+" ",1),s("span",Vt,j(t.question.isRequired==="true"?"*":""),1)]),s("div",_t,[_(Se,{questionId:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionId","options","modelValue"])]),s("div",wt,[s("span",St,j((u=t.question.error)==null?void 0:u.text),1)])])}}},Rt={class:"grid grid-cols-4"},It={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900"},kt={class:"relative mt-1 rounded-md col-span-4 ps-4"},Ct={class:"col-span-4 text-end"},$t={class:"text-xs text-red-600"},Pt={__name:"MultipleSelection",props:{modelValue:{type:[Array,String]},question:Object},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>{var l;return Array.isArray(v.modelValue)?v.modelValue:(l=v.modelValue)==null?void 0:l.split(",")},set:l=>r("update:modelValue",l)});return(l,a)=>{var u;return f(),S("div",Rt,[s("label",It,j(t.question.statement),1),s("div",kt,[_(Ke,{questionIndex:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionIndex","options","modelValue"])]),s("div",Ct,[s("span",$t,j((u=t.question.error)==null?void 0:u.text),1)])])}}},Ut={class:"relative mt-1"},Et={class:"block text-sm font-medium leading-6 text-gray-900"},Dt={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},At={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},te={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String}},emits:["update:modelValue"],setup(t,{emit:r}){const v=t;O(!0);const m=I({get:()=>v.modelValue,set:p=>r("update:modelValue",p)});let l=O(""),a=O(!1),u=I(()=>l.value===""?[]:v.items.filter(p=>p[`${v.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(l.value.toLowerCase().replace(/\s+/g,""))));return(p,n)=>(f(),q(T(ut),{modelValue:m.value,"onUpdate:modelValue":n[2]||(n[2]=c=>m.value=c)},{default:B(()=>[s("div",Ut,[s("label",Et,j(t.label),1),s("div",Dt,[_(T(ct),{class:se([t.error&&T(a)&&!m.value?"ring-red-600":"ring-gray-300","w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:c=>c==null?void 0:c[`${t.itemTitle}`],onChange:n[0]||(n[0]=c=>ge(l)?l.value=c.target.value:l=c.target.value),placeholder:t.placeholder},null,8,["class","displayValue","placeholder"]),_(T(dt),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:B(()=>[_(T(He),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),_(T(Le),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:n[1]||(n[1]=c=>ge(l)?l.value="":l="")},{default:B(()=>[_(T(pt),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:B(()=>[T(u).length===0&&T(l)!==""?(f(),S("div",At," Sin datos ")):Q("",!0),(f(!0),S(K,null,fe(T(u),c=>(f(),q(T(vt),{as:"template",key:c[`${t.itemValue}`],value:c},{default:B(({selected:y,active:x})=>[s("li",{class:se(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":x,"text-gray-900":!x}])},[s("span",{class:se(["block truncate",{"font-medium":y,"font-normal":!y}])},j(c[`${t.itemTitle}`]),3),y?(f(),S("span",{key:0,class:se(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":x,"text-teal-600":!x}])},[_(T(Xe),{class:"h-5 w-5","aria-hidden":"true"})],2)):Q("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Tt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},jt={class:"grid grid-cols-3 gap-x-5"},Ft={class:"col-span-3"},Nt={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:r}){const v=t,m=new _e,l=I({get:()=>v.modelValue,set:d=>r("update:modelValue",d)}),a=O([]),u=O([]),p=O([]),n=O({departamento:null,provincia:null,distrito:null}),c=async d=>{n.value.provincia=null,u.value=[],n.value.distrito=null,p.value=[],u.value=await m.getProvincias(d.code),r("update:modelValue",null)},y=async d=>{r("update:modelValue",null),p.value=[],n.value.distrito=null,p.value=await m.getDistritos(d.code)},x=async d=>{let o=await m.getUbigeo(d[0]);n.value.departamento={code:o.idDepartment,title:o.department},n.value.provincia={code:o.idProvince,title:o.province},n.value.distrito={code:o.idDistrict,title:o.district},v.question.other=d[1]},P=async()=>{a.value.length==0&&(a.value=await m.getDepartamentos())};return(async()=>{let d=l.value;d&&(d=d.split("%%%",2),await x(d))})(),(d,o)=>(f(),S(K,null,[s("label",Tt,j(t.question.statement),1),s("div",jt,[s("div",null,[_(te,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:P,itemValue:"code",modelValue:n.value.departamento,"onUpdate:modelValue":[o[0]||(o[0]=e=>n.value.departamento=e),c]},null,8,["error","items","modelValue"])]),s("div",null,[_(te,{error:t.error,items:u.value,itemValue:"code",placeholder:"Provincia",modelValue:n.value.provincia,"onUpdate:modelValue":[o[1]||(o[1]=e=>n.value.provincia=e),y]},null,8,["error","items","modelValue"])]),s("div",null,[_(te,{error:t.error,items:p.value,itemValue:"code",placeholder:"Distrito",modelValue:n.value.distrito,"onUpdate:modelValue":[o[2]||(o[2]=e=>n.value.distrito=e),o[3]||(o[3]=e=>l.value=e.code)]},null,8,["error","items","modelValue"])]),s("div",Ft,[_(Z,{modelValue:t.question.other,"onUpdate:modelValue":o[4]||(o[4]=e=>t.question.other=e),label:"Dirección"},null,8,["modelValue"])])])],64))}},Bt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},Lt={class:"grid grid-cols-3 gap-5"},zt={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:r}){const v=t,m=new _e,l=I({get:()=>v.modelValue,set:d=>r("update:modelValue",d)}),a=O([]),u=O([]),p=O([]),n=O({departamento:null,provincia:null,distrito:null}),c=async d=>{n.value.provincia=null,u.value=[],n.value.distrito=null,p.value=[],u.value=await m.getProvincias(d.code),r("update:modelValue",null)},y=async d=>{r("update:modelValue",null),p.value=[],n.value.distrito=null,p.value=await m.getDistritos(d.code)},x=async()=>{a.value=await m.getDepartamentos()},P=async d=>{let o=await m.getUbigeo(d);n.value.departamento={code:o.idDepartment,title:o.department},n.value.provincia={code:o.idProvince,title:o.province},n.value.distrito={code:o.idDistrict,title:o.district}};return(async()=>{l.value&&await P(l.value)})(),(d,o)=>(f(),S(K,null,[s("label",Bt,j(t.question.statement),1),s("div",Lt,[s("div",null,[_(te,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:x,itemValue:"code",modelValue:n.value.departamento,"onUpdate:modelValue":[o[0]||(o[0]=e=>n.value.departamento=e),c]},null,8,["error","items","modelValue"])]),s("div",null,[_(te,{error:t.error,items:u.value,itemValue:"code",placeholder:"Provincia",modelValue:n.value.provincia,"onUpdate:modelValue":[o[1]||(o[1]=e=>n.value.provincia=e),y]},null,8,["error","items","modelValue"])]),s("div",null,[_(te,{error:t.error,items:p.value,itemValue:"code",placeholder:"Distrito",modelValue:n.value.distrito,"onUpdate:modelValue":[o[2]||(o[2]=e=>n.value.distrito=e),o[3]||(o[3]=e=>l.value=e.code)]},null,8,["error","items","modelValue"])])])],64))}},Mt={__name:"StudyCycleForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>v.modelValue,set:a=>r("update:modelValue",a)}),l=[{id:1,title:"Semestre I"},{id:2,title:"Semestre II    "},{id:3,title:"Semestre III"},{id:4,title:"Semestre IV"},{id:5,title:"Semestre V"},{id:6,title:"Semestre VI"},{id:7,title:"Semestre VII"},{id:8,title:"Semestre VIII"},{id:9,title:"Semestre IX"},{id:10,title:"Semestre X"},{id:11,title:"Semestre XI"},{id:12,title:"Semestre XII"}];return(a,u)=>(f(),q(de,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=p=>m.value=p),label:t.question.statement,error:t.question.error,options:l},null,8,["modelValue","label","error"]))}},qt=[{id:"001",title:"trabajo social"},{id:"003",title:"medicina veterinaria y zootecnía"},{id:"004",title:"medicina humana"},{id:"005",title:"ingeniería química"},{id:"006",title:"ingeniería mecánica, eléctrica, electrónica y sistemas"},{id:"007",title:"ingeniería geológica y metalúrgica"},{id:"008",title:"ingeniería estadística e informática"},{id:"009",title:"ingeniería económica"},{id:"010",title:"ingeniería de minas"},{id:"011",title:"ingeniería civil y arquitectura"},{id:"012",title:"ingeniería agrícola"},{id:"013",title:"ciencias sociales"},{id:"014",title:"enfermería"},{id:"015",title:"ciencias jurídicas y políticas"},{id:"016",title:"ciencias de la salud"},{id:"017",title:"ciencias de la educación"},{id:"018",title:"ciencias contables y administrativas"},{id:"019",title:"ciencias biológicas"},{id:"020",title:"ciencias agrarias"}],Kt={__name:"FacuForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>v.modelValue,set:l=>r("update:modelValue",l)});return(l,a)=>(f(),q(de,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=u=>m.value=u),label:t.question.statement,error:t.question.error,options:T(qt)},null,8,["modelValue","label","error","options"]))}},Ht=[{id:"001",title:"administración"},{id:"002",title:"antropología"},{id:"003",title:"arquitectura y urbanismo"},{id:"004",title:"arte: artes plásticas"},{id:"005",title:"arte: danza"},{id:"006",title:"arte: música"},{id:"007",title:"arte: teatro"},{id:"008",title:"biología: ecología"},{id:"009",title:"biología: microbiología y laboratorio clínico"},{id:"010",title:"biología: pesquería"},{id:"011",title:"ciencias contables"},{id:"012",title:"ciencias de la comunicación social"},{id:"013",title:"ciencias físico matemáticas: física"},{id:"014",title:"ciencias físico matemáticas: matemáticas"},{id:"015",title:"derecho"},{id:"034",title:"educación física"},{id:"035",title:"educación inicial"},{id:"036",title:"educación primaria"},{id:"037",title:"educación secundaria de la especialidad de ciencia, tecnología y ambiente"},{id:"038",title:"educación secundaria de la especialidad de ciencias sociales"},{id:"039",title:"educación secundaria de la especialidad de lengua, literatura, psicología y filosofía"},{id:"040",title:"educación secundaria de la especialidad de matemática, física, computación e informática"},{id:"041",title:"enfermería"},{id:"042",title:"ingeniería agrícola"},{id:"043",title:"ingeniería agroindustrial"},{id:"044",title:"ingeniería agronómica"},{id:"045",title:"ingeniería civil"},{id:"046",title:"ingeniería de minas"},{id:"047",title:"ingeniería de sistemas"},{id:"048",title:"ingeniería económica"},{id:"049",title:"ingeniería electrónica"},{id:"050",title:"ingeniería estadística e informática"},{id:"051",title:"ingeniería geológica"},{id:"052",title:"ingeniería mecánica eléctrica"},{id:"053",title:"ingeniería metalúrgica"},{id:"054",title:"ingeniería química"},{id:"055",title:"ingeniería topográfica y agrimensura"},{id:"169",title:"medicina humana"},{id:"170",title:"medicina veterinaria y zootecnía"},{id:"171",title:"nutrición humana"},{id:"172",title:"odontología"},{id:"231",title:"sociología"},{id:"232",title:"trabajo social"},{id:"233",title:"turismo"}],Xt={__name:"ProStudyForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>v.modelValue,set:l=>r("update:modelValue",l)});return(l,a)=>(f(),q(de,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=u=>m.value=u),label:t.question.statement,error:t.question.error,options:T(Ht)},null,8,["modelValue","label","error","options"]))}},Gt={class:"grid grid-cols-4"},Yt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},Jt={class:"relative col-span-4 mt-1 rounded-md ms-4"},Zt={class:"col-span-4"},Qt={class:"col-span-4 text-end"},Wt={class:"text-xs text-red-600"},ea={__name:"OneSelectionOtherForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:r}){const v=t,m=I({get:()=>v.modelValue,set:l=>r("update:modelValue",l)});return(l,a)=>{var u;return f(),S("div",Gt,[s("label",Yt,j(t.question.statement),1),s("div",Jt,[_(Se,{questionId:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionId","options","modelValue"])]),s("div",Zt,[_(Z,{modelValue:t.question.answer.text,"onUpdate:modelValue":a[1]||(a[1]=p=>t.question.answer.text=p),label:"Especifique"},null,8,["modelValue"])]),s("div",Qt,[s("span",Wt,j((u=t.question.error)==null?void 0:u.text),1)])])}}},ta={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},aa={class:"col-span-2 rounded-lg"},la={key:0,class:"mb-4"},oa={key:1,class:"mb-4"},ia={key:2,class:"mb-4"},na={key:3,class:"mb-4"},sa={key:4,class:"mb-4"},ra={key:5,class:"mb-4"},ua={key:6,class:"mb-4"},da={key:7,class:"mb-4"},ca={key:8,class:"mb-4"},pa={key:9,class:"mb-4"},va={key:10,class:"mb-4"},ma={key:11,class:"mb-4"},fa={key:12,class:"mb-4"},ba={class:"w-full text-end"},ga={class:"text-xs text-red-600"},xa={key:13,class:"mb-4"},ya={class:"w-full text-end"},ha={class:"text-xs text-red-600"},Va={class:"flex justify-end mt-4"},_a={__name:"Form",props:{questions:Array,section:Object},emits:["onSuccess","onFaild"],setup(t,{emit:r}){const v=t,m=new he,l=I(()=>v.questions),a=O(!0),u=d=>{l.value.map(o=>(o.isDependent==d.id&&(o.optionTrigger===d.answer.options?o.show=!0:o.show=!1),o))},p=(d,o,e=!1)=>{e&&u(o),o.isRequired==="true"&&n(d,o)},n=(d,o)=>{l.value.map(e=>{e.id===o.id&&(ee(d)?o.isRequired==="false"&&!ee(d)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Obligatorio"},a.value=!1))})},c=(d,o)=>{l.value.map(e=>{e.id==o.id&&(o.isRequired==="true"&&!ee(d)?(e.error={isError:!0,text:"Obligatorio"},a.value=!1):o.isRequired==="false"&&!ee(d)?(e.error={isError:!1,text:null},a.value=!0):bt(d)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Formato no valido"},a.value=!1))})},y=(d,o)=>{l.value.map(e=>{e.id==o.id&&(ee(d)?mt(d)?o.isRequired==="false"&&!ee(d)?(e.error={isError:!1,text:null},a.value=!0):ft(d,9)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Longitud debe se 9 digitos"},a.value=!1):(e.error={isError:!0,text:"Solo se permite numeros"},a.value=!1):(e.error={isError:!0,text:"Obligatorio"},a.value=!1))})},x=()=>{let d={section_:v.section.id,answers_:[]};const o=[1,2,3,5,8,9,10,20,50],e=[0,4],h=[6],R=[11],g=[30];return l.value.forEach(i=>{var N;if(!i.isDependent||i.show)if(o.includes(i.type))d.answers_.push({qst_:i.id,opts_:null,txt_:i.answer.text});else if(e.includes(i.type))d.answers_.push({qst_:i.id,opts_:[i.answer.options],txt_:null});else if(h.includes(i.type))d.answers_.push({qst_:i.id,opts_:Array.isArray(i.answer.options)?i.answer.options:(N=i.answer.options)==null?void 0:N.split(","),txt_:null});else if(R.includes(i.type)){let b=i.answer.text.split("%%%",2);d.answers_.push({qst_:i.id,opts_:null,txt_:b[0]+"%%%"+i.other})}else g.includes(i.type)&&d.answers_.push({qst_:i.id,opts_:[i.answer.options],txt_:i.answer.text})}),d},P=()=>{var d=0;return l.value.forEach(o=>{var e,h;!((e=o.answer)!=null&&e.options)&&!((h=o.answer)!=null&&h.text)&&o.isRequired==="true"&&(!o.isDependent||o.show)?(o.error={isError:!0,text:"Obligatorio"},d++):o.error={isError:!1,text:null}}),!(d>0)},U=async()=>{console.log(P());let d=P();if(console.log("valid",d),d){let o=x();console.log(x());let e=await m.saveSection(o);return r("onSuccess"),console.log("Guardando ..."),e}return console.error("Error ..."),r("onFaild"),!1};return(d,o)=>(f(),S("div",ta,[s("div",aa,[(f(!0),S(K,null,fe(l.value,(e,h)=>{var R,g;return f(),S("div",{key:e.id},[s("ul",null,[!e.isDependent||e.show?(f(),S(K,{key:0},[e.type===0?(f(),S("li",la,[_(Ot,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[i=>e.answer.options=i,i=>p(i,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===1?(f(),S("li",oa,[_(Z,{modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>p(i,e)],type:"text",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===2?(f(),S("li",ia,[_(Z,{modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>p(i,e)],type:"date",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===3?(f(),S("li",na,[_(Z,{modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>p(e.answer,e)],type:"number",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===50?(f(),S("li",sa,[_(Mt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":i=>e.answer.text=i},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===21?(f(),S("li",ra,[_(Kt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":i=>e.answer.text=i},null,8,["question","modelValue","onUpdate:modelValue"])])):Q("",!0),e.type===30?(f(),S("li",ua,[_(ea,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[i=>e.answer.options=i,i=>p(i,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===20?(f(),S("li",da,[_(Xt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":i=>e.answer.text=i},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===4?(f(),S("li",ca,[_(de,{modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>p(i,e,h)],label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):e.type===6?(f(),S("li",pa,[_(Pt,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[i=>e.answer.options=i,i=>p(i,e,h)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===8?(f(),S("li",va,[_(Z,{modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>c(i,e)],type:"email",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===9?(f(),S("li",ma,[_(Z,{modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>y(i,e)],type:"tel",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===10?(f(),S("li",fa,[_(zt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>p(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),s("div",ba,[s("span",ga,j((R=e.error)==null?void 0:R.text),1)])])):e.type===11?(f(),S("li",xa,[_(Nt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":[i=>e.answer.text=i,i=>p(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),s("div",ya,[s("span",ha,j((g=e.error)==null?void 0:g.text),1)])])):Q("",!0)],64)):Q("",!0)])])}),128)),s("div",Va,[Ee(d.$slots,"footer",{submit:U})])])]))}};const wa={class:"z-10 fixed right-2 top-1/2 block md:hidden"},Sa=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})],-1),Oa={class:"text-sm sm:text-xl uppercase font-bold p-5 text-blue-950"},Ra={class:"grid grid-cols-4 gap-4"},Ia=s("strong",null," Indicaciones: ",-1),ka=s("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),Ca=s("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),$a={class:"col-span-4 lg:col-span-1 hidden md:block"},Pa={class:"col-span-4 lg:col-span-3 rounded-lg bg-white p-6 shadow-lg mb-4"},Ua={class:""},Ea={class:"text-lg font-semibold mb-3 uppercase"},Da={class:"text-sm uppercase mb-4 font-bold"},Aa={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},Ta={class:"flex justify-between w-full"},ja={class:"previous"},Fa={class:"text-start"},Na=s("span",null,"Anterior",-1),Ba={class:"text-lg capitalize"},La={class:"text-start"},za=s("span",null,"Anterior",-1),Ma={class:"text-lg capitalize"},qa={class:"nexts"},Ka={class:"text-end"},Ha=s("span",null,"Siguiente ",-1),Xa={class:"text-lg capitalize"},Ga={class:"text-end"},Ya=s("span",null,"Siguiente ",-1),Ja={class:"text-lg capitalize"},Za=s("div",{class:"text-end"},[s("span",null," Guardar "),s("h5",{class:"text-lg capitalize"},"Finalizar")],-1),sl={__name:"survey",setup(t){const r=new De,v=new he,m=Ae(),l=Te(),a=O(null),u=O(null),p=O(null),n=O(null),c=O({section:null,topic:null}),y=O({section:null,topic:null}),x=O({section:null,topic:null}),P=O(!1),U=O(!1),d=async()=>{U.value=!0,await v.finishSurvey(a.value.id)?a.value.isCompleted=!0:alert("ocurrio un error"),U.value=!1},o=async k=>{U.value=!0;let E=await R(k.id);E.length>0&&await m.setPositions(a.value.id,k.id,E[0].id)&&(a.value.topic=k.id,a.value.section=E[0].id,p.value=E,await V(a.value),n.value=await g(c.value.section.id)),U.value=!1},e=async k=>{U.value=!0;let E=await g(k.id);console.log("nextSection",k),console.log("questions",E),E.length>0&&await m.setPositions(a.value.id,c.value.topic.id,k.id)&&(a.value.section=k.id,await V(a.value),n.value=E),U.value=!1},h=async k=>await v.getTopics(k),R=async k=>await v.getSections(k),g=async k=>await v.getQuestions(k),i=(k,E)=>{let z=E.findIndex(Y=>k.id===Y.id);return z!==-1&&E.length!==z+1&&E.findIndex(H=>{var X;return((X=E[z+1])==null?void 0:X.id)===H.id})!==-1?E[z+1]:null},N=(k,E)=>{let z=E.findIndex(Y=>k.id===Y.id);return z!==-1&&z!==0&&E.findIndex(H=>{var X;return((X=E[z-1])==null?void 0:X.id)===H.id})!==-1?E[z-1]:null},b=async k=>{c.value.section=p.value.find(E=>E.id===k.section),c.value.topic=u.value.find(E=>E.id===k.topic)},w=async()=>{y.value.topic=i(c.value.topic,u.value),y.value.section=i(c.value.section,p.value)},C=async()=>{x.value.topic=N(c.value.topic,u.value),x.value.section=N(c.value.section,p.value)},V=async k=>{await b(k),await w(),await C()},$=async()=>{a.value=await v.getSurvey(l.params.id),a.value?(a.value.isCompleted=!1,a.value.topic&&a.value.section?(u.value=await h(a.value.id),p.value=await R(a.value.topic),n.value=await g(a.value.section),await V(a.value)):(r.back(),m.cont++)):r.push({name:"home"})};return(async()=>{console.log("init survey "),P.value=!0,await $(),P.value=!1})(),(k,E)=>(f(),q(je,null,{default:B(()=>{var z,Y;return[P.value?(f(),S(K,{key:0},[P.value?(f(),q(xe,{key:0})):Q("",!0)],64)):(f(),S(K,{key:1},[s("div",wa,[_(ze,null,{activator:B(({modal:H})=>[_(T(W),{onClick:H,color:"dark"},{default:B(()=>[Sa]),_:2},1032,["onClick"])]),content:B(()=>[_(ye,{changeTopic:o,topics:u.value,current:c.value.topic,isCompleted:a.value.isCompleted},null,8,["topics","current","isCompleted"])]),_:1})]),s("h2",Oa,j(a.value.title),1),s("div",Ra,[_(T(Fe),{type:"info",class:"col-span-4",ref:"alert"},{default:B(()=>[Ia,ka,Ca]),_:1},512),s("div",$a,[_(ye,{changeTopic:o,topics:u.value,current:c.value.topic,isCompleted:a.value.isCompleted},null,8,["topics","current","isCompleted"])]),s("div",Pa,[s("div",Ua,[s("h3",Ea,j((z=c.value.topic)==null?void 0:z.title),1),s("h4",Da,j((Y=c.value.section)==null?void 0:Y.title),1)]),p.value?(f(),S(K,{key:1},[U.value?(f(),q(xe,{key:0})):(f(),q(_a,{key:1,questions:n.value,section:c.value.section},{footer:B(({submit:H})=>[s("div",Ta,[s("div",ja,[x.value.section&&a.value.isCompleted?(f(),q(T(W),{key:0,onClick:async()=>{await H()&&await e(x.value.section)}},{default:B(()=>[s("div",Fa,[Na,s("h5",Ba,j(x.value.section.title),1)])]),_:2},1032,["onClick"])):(f(),S(K,{key:1},[x.value.topic&&a.value.isCompleted?(f(),q(T(W),{key:0,color:"light",onClick:async()=>{await H()&&await o(x.value.topic)}},{default:B(()=>[s("div",La,[za,s("h5",Ma,j(x.value.topic.title),1)])]),_:2},1032,["onClick"])):Q("",!0)],64))]),s("div",qa,[y.value.section?(f(),q(T(W),{key:0,onClick:async()=>{await H()&&await e(y.value.section)}},{default:B(()=>[s("div",Ka,[Ha,s("h5",Xa,j(y.value.section.title),1)])]),_:2},1032,["onClick"])):(f(),S(K,{key:1},[y.value.topic!==null?(f(),q(T(W),{key:0,color:"light",onClick:async()=>{await H()&&await o(y.value.topic)}},{default:B(()=>[s("div",Ga,[Ya,s("h5",Ja,j(y.value.topic.title),1)])]),_:2},1032,["onClick"])):(f(),q(T(W),{key:1,color:"green",onClick:async()=>{await H()&&await d()}},{default:B(()=>[Za]),_:2},1032,["onClick"]))],64))])])]),_:1},8,["questions","section"]))],64)):(f(),S("h4",Aa," no hay secciones "))])])],64))]}),_:1}))}};export{sl as default};
