var Oe=Object.defineProperty;var Ie=(t,u,v)=>u in t?Oe(t,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):t[u]=v;var le=(t,u,v)=>(Ie(t,typeof u!="symbol"?u+"":u,v),v);import{I as re,d as ie,r as R,b as I,J as E,p as ke,e as fe,K as ve,O as ge,F as H,w as me,f as Ce,n as Z,i as $e,o as b,c as S,m as be,A as De,Q as Pe,a as s,t as A,l as Ue,j as w,g as K,h as N,u as T,q as oe,R as xe,x as J,k as Ee,S as Ve,C as Te,y as Ae,V as Fe,W as je,X as ye,P as ee,M as Be}from"./index-63e2209e.js";import{r as Ne,n as Le,S as ze,_ as Me}from"./HModal-ce37e79c.js";import{_ as he}from"./IndexSurvey-f753a9c5.js";import{d as Ke,e as He,_ as qe,r as Xe,b as Ye,a as ce}from"./HSelect-dd4c192c.js";import{u as Y,o as B,F as Ge,c as Je,l as ue,K as Ze,H as ne,T as _e,t as pe,N as de,p as Qe,O as We,a as M}from"./use-outside-click-025d2abd.js";import{x as et,a as L,b as tt,u as at}from"./use-text-value-c65e04b5.js";import{p as lt}from"./use-tree-walker-46adb0db.js";import{f as ot,a as it,_ as Q}from"./InputForm-baef2517.js";class we{constructor(){le(this,"getDepartamentos",async()=>(await re.get("http://38.43.133.27/SURVEY_PLACES/v1/departments/")).data.data);le(this,"getProvincias",async u=>(await re.get(`http://38.43.133.27/SURVEY_PLACES/v1/provinces/${u}/`)).data.data);le(this,"getDistritos",async u=>(await re.get(`http://38.43.133.27/SURVEY_PLACES/v1/districts/${u}/`)).data.data);le(this,"getUbigeo",async u=>{try{return(await re.get(`http://38.43.133.27/SURVEY_PLACES/v1/${u}/`)).data.data[0]}catch{return null}})}}function nt(t,u){return t===u}var st=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(st||{}),rt=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(rt||{}),ut=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ut||{});let Se=Symbol("ComboboxContext");function se(t){let u=$e(Se,null);if(u===null){let v=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,se),v}return u}let dt=ie({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>nt},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:u,attrs:v,emit:m}){let l=R(1),a=R(null),r=R(null),p=R(null),n=R(null),c=R({static:!1,hold:!1}),y=R([]),f=R(null),$=R(1),C=R(!1);function h(o=V=>V){let V=f.value!==null?y.value[f.value]:null,O=We(o(y.value.slice()),k=>B(k.dataRef.domRef)),_=V?O.indexOf(V):null;return _===-1&&(_=null),{options:O,activeOptionIndex:_}}let g=I(()=>t.multiple?1:0),i=I(()=>t.nullable),[d,e]=Ke(I(()=>t.modelValue===void 0?Y(g.value,{[1]:[],[0]:void 0}):t.modelValue),o=>m("update:modelValue",o),I(()=>t.defaultValue)),x={comboboxState:l,value:d,mode:g,compare(o,V){if(typeof t.by=="string"){let O=t.by;return(o==null?void 0:o[O])===(V==null?void 0:V[O])}return t.by(o,V)},defaultValue:I(()=>t.defaultValue),nullable:i,inputRef:r,labelRef:a,buttonRef:p,optionsRef:n,disabled:I(()=>t.disabled),options:y,change(o){e(o)},activeOptionIndex:I(()=>{if(C.value&&f.value===null&&y.value.length>0){let o=y.value.findIndex(V=>!V.dataRef.disabled);o!==-1&&(f.value=o)}return f.value}),activationTrigger:$,optionsPropsRef:c,closeCombobox(){C.value=!1,!t.disabled&&l.value!==1&&(l.value=1,f.value=null)},openCombobox(){if(C.value=!0,t.disabled||l.value===0)return;let o=y.value.findIndex(V=>{let O=E(V.dataRef.value);return Y(g.value,{[0]:()=>x.compare(E(x.value.value),E(O)),[1]:()=>E(x.value.value).some(_=>x.compare(E(_),E(O)))})});o!==-1&&(f.value=o),l.value=0},goToOption(o,V,O){if(C.value=!1,t.disabled||n.value&&!c.value.static&&l.value===1)return;let _=h();if(_.activeOptionIndex===null){let U=_.options.findIndex(W=>!W.dataRef.disabled);U!==-1&&(_.activeOptionIndex=U)}let k=et(o===L.Specific?{focus:L.Specific,id:V}:{focus:o},{resolveItems:()=>_.options,resolveActiveIndex:()=>_.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});f.value=k,$.value=O??1,y.value=_.options},selectOption(o){let V=y.value.find(_=>_.id===o);if(!V)return;let{dataRef:O}=V;e(Y(g.value,{[0]:()=>O.value,[1]:()=>{let _=E(x.value.value).slice(),k=E(O.value),U=_.findIndex(W=>x.compare(k,E(W)));return U===-1?_.push(k):_.splice(U,1),_}}))},selectActiveOption(){if(x.activeOptionIndex.value===null)return;let{dataRef:o,id:V}=y.value[x.activeOptionIndex.value];e(Y(g.value,{[0]:()=>o.value,[1]:()=>{let O=E(x.value.value).slice(),_=E(o.value),k=O.findIndex(U=>x.compare(_,E(U)));return k===-1?O.push(_):O.splice(k,1),O}})),x.goToOption(L.Specific,V)},registerOption(o,V){let O={id:o,dataRef:V},_=h(k=>[...k,O]);if(f.value===null){let k=V.value.value;Y(g.value,{[0]:()=>x.compare(E(x.value.value),E(k)),[1]:()=>E(x.value.value).some(U=>x.compare(E(U),E(k)))})&&(_.activeOptionIndex=_.options.indexOf(O))}y.value=_.options,f.value=_.activeOptionIndex,$.value=1,_.options.some(k=>!B(k.dataRef.domRef))&&requestAnimationFrame(()=>{let k=h();y.value=k.options,f.value=k.activeOptionIndex})},unregisterOption(o){var V;x.activeOptionIndex.value!==null&&((V=x.options.value[x.activeOptionIndex.value])==null?void 0:V.id)===o&&(C.value=!0);let O=h(_=>{let k=_.findIndex(U=>U.id===o);return k!==-1&&_.splice(k,1),_});y.value=O.options,f.value=O.activeOptionIndex,$.value=1}};Ge([r,p,n],()=>x.closeCombobox(),I(()=>l.value===0)),ke(Se,x),Je(I(()=>Y(l.value,{[0]:ue.Open,[1]:ue.Closed})));let F=I(()=>x.activeOptionIndex.value===null?null:y.value[x.activeOptionIndex.value].dataRef.value),j=I(()=>{var o;return(o=B(r))==null?void 0:o.closest("form")});return fe(()=>{ve([j],()=>{if(!j.value||t.defaultValue===void 0)return;function o(){x.change(t.defaultValue)}return j.value.addEventListener("reset",o),()=>{var V;(V=j.value)==null||V.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,disabled:V,form:O,..._}=t,k={open:l.value===0,disabled:V,activeIndex:x.activeOptionIndex.value,activeOption:F.value,value:d.value};return ge(H,[...o!=null&&d.value!=null?He({[o]:d.value}).map(([U,W])=>ge(ot,Ze({features:it.Hidden,key:U,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:U,value:W}))):[],ne({theirProps:{...v,..._e(_,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:k,slots:u,attrs:v,name:"Combobox"})])}}}),ct=ie({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${pe()}`}},setup(t,{attrs:u,slots:v,expose:m}){let l=se("ComboboxButton");m({el:l.buttonRef,$el:l.buttonRef});function a(n){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(n.preventDefault(),l.openCombobox()),Z(()=>{var c;return(c=B(l.inputRef))==null?void 0:c.focus({preventScroll:!0})}))}function r(n){switch(n.key){case M.ArrowDown:n.preventDefault(),n.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),Z(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case M.ArrowUp:n.preventDefault(),n.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),Z(()=>{l.value.value||l.goToOption(L.Last)})),Z(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case M.Escape:if(l.comboboxState.value!==0)return;n.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&n.stopPropagation(),l.closeCombobox(),Z(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return}}let p=tt(I(()=>({as:t.as,type:u.type})),l.buttonRef);return()=>{var n,c;let y={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:f,...$}=t,C={ref:l.buttonRef,id:f,type:p.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(n=B(l.optionsRef))==null?void 0:n.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(c=B(l.labelRef))==null?void 0:c.id,f].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:r,onClick:a};return ne({ourProps:C,theirProps:$,slot:y,attrs:u,slots:v,name:"ComboboxButton"})}}}),pt=ie({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${pe()}`}},emits:{change:t=>!0},setup(t,{emit:u,attrs:v,slots:m,expose:l}){let a=se("ComboboxInput"),r={value:!1};l({el:a.inputRef,$el:a.inputRef});let p=I(()=>{var i;let d=a.value.value;return B(a.inputRef)?typeof t.displayValue<"u"&&d!==void 0?(i=t.displayValue(d))!=null?i:"":typeof d=="string"?d:"":""});fe(()=>{ve([p,a.comboboxState],([i,d],[e,x])=>{if(r.value)return;let F=B(a.inputRef);F&&(x===0&&d===1||i!==e)&&(F.value=i)},{immediate:!0}),ve([a.comboboxState],([i],[d])=>{if(i===0&&d===1){let e=B(a.inputRef);if(!e)return;let x=e.value,{selectionStart:F,selectionEnd:j,selectionDirection:o}=e;e.value="",e.value=x,o!==null?e.setSelectionRange(F,j,o):e.setSelectionRange(F,j)}})});let n=R(!1),c=R(null);function y(){n.value=!0}function f(){Ne().nextFrame(()=>{n.value=!1,c.value&&(a.openCombobox(),u("change",c.value),c.value=null)})}function $(i){switch(r.value=!0,i.key){case M.Backspace:case M.Delete:if(a.mode.value!==0||!a.nullable.value)return;let d=i.currentTarget;requestAnimationFrame(()=>{if(d.value===""){a.change(null);let e=B(a.optionsRef);e&&(e.scrollTop=0),a.goToOption(L.Nothing)}});break;case M.Enter:if(r.value=!1,a.comboboxState.value!==0||n.value)return;if(i.preventDefault(),i.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case M.ArrowDown:return r.value=!1,i.preventDefault(),i.stopPropagation(),Y(a.comboboxState.value,{[0]:()=>a.goToOption(L.Next),[1]:()=>a.openCombobox()});case M.ArrowUp:return r.value=!1,i.preventDefault(),i.stopPropagation(),Y(a.comboboxState.value,{[0]:()=>a.goToOption(L.Previous),[1]:()=>{a.openCombobox(),Z(()=>{a.value.value||a.goToOption(L.Last)})}});case M.Home:if(i.shiftKey)break;return r.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.First);case M.PageUp:return r.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.First);case M.End:if(i.shiftKey)break;return r.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.Last);case M.PageDown:return r.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.Last);case M.Escape:if(r.value=!1,a.comboboxState.value!==0)return;i.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&i.stopPropagation(),a.closeCombobox();break;case M.Tab:if(r.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function C(i){if(n.value){c.value=i;return}a.openCombobox(),u("change",i)}function h(){r.value=!1}let g=I(()=>{var i,d,e,x;return(x=(e=(d=t.defaultValue)!=null?d:a.defaultValue.value!==void 0?(i=t.displayValue)==null?void 0:i.call(t,a.defaultValue.value):null)!=null?e:a.defaultValue.value)!=null?x:""});return()=>{var i,d,e,x,F,j;let o={open:a.comboboxState.value===0},{id:V,displayValue:O,onChange:_,...k}=t,U={"aria-controls":(i=a.optionsRef.value)==null?void 0:i.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(d=a.options.value[a.activeOptionIndex.value])==null?void 0:d.id,"aria-labelledby":(F=(e=B(a.labelRef))==null?void 0:e.id)!=null?F:(x=B(a.buttonRef))==null?void 0:x.id,"aria-autocomplete":"list",id:V,onCompositionstart:y,onCompositionend:f,onKeydown:$,onInput:C,onBlur:h,role:"combobox",type:(j=v.type)!=null?j:"text",tabIndex:0,ref:a.inputRef,defaultValue:g.value,disabled:a.disabled.value===!0?!0:void 0};return ne({ourProps:U,theirProps:k,slot:o,attrs:v,slots:m,features:de.RenderStrategy|de.Static,name:"ComboboxInput"})}}}),vt=ie({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:u,slots:v,expose:m}){let l=se("ComboboxOptions"),a=`headlessui-combobox-options-${pe()}`;m({el:l.optionsRef,$el:l.optionsRef}),me(()=>{l.optionsPropsRef.value.static=t.static}),me(()=>{l.optionsPropsRef.value.hold=t.hold});let r=Qe(),p=I(()=>r!==null?(r.value&ue.Open)===ue.Open:l.comboboxState.value===0);return lt({container:I(()=>B(l.optionsRef)),enabled:I(()=>l.comboboxState.value===0),accept(n){return n.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}}),()=>{var n,c,y;let f={open:l.comboboxState.value===0},$={"aria-labelledby":(y=(n=B(l.labelRef))==null?void 0:n.id)!=null?y:(c=B(l.buttonRef))==null?void 0:c.id,id:a,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0},C=_e(t,["hold"]);return ne({ourProps:$,theirProps:C,slot:f,attrs:u,slots:v,features:de.RenderStrategy|de.Static,visible:p.value,name:"ComboboxOptions"})}}}),mt=ie({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:u,attrs:v,expose:m}){let l=se("ComboboxOption"),a=`headlessui-combobox-option-${pe()}`,r=R(null);m({el:r,$el:r});let p=I(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===a:!1),n=I(()=>Y(l.mode.value,{[0]:()=>l.compare(E(l.value.value),E(t.value)),[1]:()=>E(l.value.value).some(i=>l.compare(E(i),E(t.value)))})),c=I(()=>({disabled:t.disabled,value:t.value,domRef:r}));fe(()=>l.registerOption(a,c)),Ce(()=>l.unregisterOption(a)),me(()=>{l.comboboxState.value===0&&p.value&&l.activationTrigger.value!==0&&Z(()=>{var i,d;return(d=(i=B(r))==null?void 0:i.scrollIntoView)==null?void 0:d.call(i,{block:"nearest"})})});function y(i){if(t.disabled)return i.preventDefault();l.selectOption(a),l.mode.value===0&&l.closeCombobox(),Le()||requestAnimationFrame(()=>{var d;return(d=B(l.inputRef))==null?void 0:d.focus()})}function f(){if(t.disabled)return l.goToOption(L.Nothing);l.goToOption(L.Specific,a)}let $=at();function C(i){$.update(i)}function h(i){$.wasMoved(i)&&(t.disabled||p.value||l.goToOption(L.Specific,a,0))}function g(i){$.wasMoved(i)&&(t.disabled||p.value&&(l.optionsPropsRef.value.hold||l.goToOption(L.Nothing)))}return()=>{let{disabled:i}=t,d={active:p.value,selected:n.value,disabled:i},e={id:a,ref:r,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":n.value,disabled:void 0,onClick:y,onFocus:f,onPointerenter:C,onMouseenter:C,onPointermove:h,onMousemove:h,onPointerleave:g,onMouseleave:g};return ne({ourProps:e,theirProps:t,slot:d,attrs:v,slots:u,name:"ComboboxOption"})}}});const te=t=>!(t===""||t===null),ft=t=>{let u=/^[0-9]+$/;return!!t.match(u)},bt=(t,u)=>t.length<=u,gt=t=>{let u=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!t.match(u)},xt=["disabled","id","value","name"],yt=["for"],Re={__name:"RadioGroupForm",props:{questionId:String,options:Array,isDisabled:Boolean,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>(b(!0),S(H,null,be(t.options,(r,p)=>(b(),S("div",{key:r.title,class:"flex items-center my-3"},[De(s("input",{disabled:t.isDisabled,id:`radio-${p}${t.questionId}`,type:"radio",value:r.id,"onUpdate:modelValue":a[0]||(a[0]=n=>m.value=n),name:`name-${p}${t.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,xt),[[Pe,m.value]]),s("label",{for:`radio-${p}${t.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300 capitalize"},A(r.title),9,yt)]))),128))}},ht={class:"grid grid-cols-4"},Vt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},_t={class:"text-red-700"},wt={class:"relative col-span-4 mt-1 rounded-md ms-4"},St={class:"col-span-4 text-end"},Rt={class:"text-xs text-red-600"},Ot={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},isDisabled:Boolean,placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>{var r;return b(),S("div",ht,[s("label",Vt,[Ue(A(t.question.statement)+" ",1),s("span",_t,A(t.question.isRequired==="true"?"*":""),1)]),s("div",wt,[w(Re,{isDisabled:t.isDisabled,questionId:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["isDisabled","questionId","options","modelValue"])]),s("div",St,[s("span",Rt,A((r=t.question.error)==null?void 0:r.text),1)])])}}},It={class:"grid grid-cols-4"},kt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900"},Ct={class:"relative mt-1 rounded-md col-span-4 ps-4"},$t={class:"col-span-4 text-end"},Dt={class:"text-xs text-red-600"},Pt={__name:"MultipleSelection",props:{modelValue:{type:[Array,String]},question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>{var l;return Array.isArray(v.modelValue)?v.modelValue:(l=v.modelValue)==null?void 0:l.split(",")},set:l=>u("update:modelValue",l)});return(l,a)=>{var r;return b(),S("div",It,[s("label",kt,A(t.question.statement),1),s("div",Ct,[w(qe,{questionIndex:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionIndex","options","modelValue"])]),s("div",$t,[s("span",Dt,A((r=t.question.error)==null?void 0:r.text),1)])])}}},Ut={class:"relative mt-1"},Et={class:"block text-sm font-medium leading-6 text-gray-900"},Tt={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},At={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},ae={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String}},emits:["update:modelValue"],setup(t,{emit:u}){const v=t;R(!0);const m=I({get:()=>v.modelValue,set:p=>u("update:modelValue",p)});let l=R(""),a=R(!1),r=I(()=>l.value===""?[]:v.items.filter(p=>p[`${v.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(l.value.toLowerCase().replace(/\s+/g,""))));return(p,n)=>(b(),K(T(dt),{modelValue:m.value,"onUpdate:modelValue":n[2]||(n[2]=c=>m.value=c)},{default:N(()=>[s("div",Ut,[s("label",Et,A(t.label),1),s("div",Tt,[w(T(pt),{class:oe([t.error&&T(a)&&!m.value?"ring-red-600":"ring-gray-300","w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:c=>c==null?void 0:c[`${t.itemTitle}`],onChange:n[0]||(n[0]=c=>xe(l)?l.value=c.target.value:l=c.target.value),placeholder:t.placeholder},null,8,["class","displayValue","placeholder"]),w(T(ct),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:N(()=>[w(T(Xe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),w(T(ze),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:n[1]||(n[1]=c=>xe(l)?l.value="":l="")},{default:N(()=>[w(T(vt),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:N(()=>[T(r).length===0&&T(l)!==""?(b(),S("div",At," Sin datos ")):J("",!0),(b(!0),S(H,null,be(T(r),c=>(b(),K(T(mt),{as:"template",key:c[`${t.itemValue}`],value:c},{default:N(({selected:y,active:f})=>[s("li",{class:oe(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":f,"text-gray-900":!f}])},[s("span",{class:oe(["block truncate",{"font-medium":y,"font-normal":!y}])},A(c[`${t.itemTitle}`]),3),y?(b(),S("span",{key:0,class:oe(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":f,"text-teal-600":!f}])},[w(T(Ye),{class:"h-5 w-5","aria-hidden":"true"})],2)):J("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Ft={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},jt={class:"grid grid-cols-3 gap-x-5"},Bt={class:"col-span-3"},Nt={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:u}){const v=t,m=new we,l=I({get:()=>v.modelValue,set:h=>u("update:modelValue",h)}),a=R([]),r=R([]),p=R([]),n=R({departamento:null,provincia:null,distrito:null}),c=async h=>{n.value.provincia=null,r.value=[],n.value.distrito=null,p.value=[],r.value=await m.getProvincias(h.code),u("update:modelValue",null)},y=async h=>{u("update:modelValue",null),p.value=[],n.value.distrito=null,p.value=await m.getDistritos(h.code)},f=async h=>{let g=await m.getUbigeo(h[0]);n.value.departamento={code:g.idDepartment,title:g.department},n.value.provincia={code:g.idProvince,title:g.province},n.value.distrito={code:g.idDistrict,title:g.district},v.question.other=h[1]},$=async()=>{a.value.length==0&&(a.value=await m.getDepartamentos())};return(async()=>{let h=l.value;h&&(h=h.split("%%%",2),await f(h))})(),(h,g)=>(b(),S(H,null,[s("label",Ft,A(t.question.statement),1),s("div",jt,[s("div",null,[w(ae,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:$,itemValue:"code",modelValue:n.value.departamento,"onUpdate:modelValue":[g[0]||(g[0]=i=>n.value.departamento=i),c]},null,8,["error","items","modelValue"])]),s("div",null,[w(ae,{error:t.error,items:r.value,itemValue:"code",placeholder:"Provincia",modelValue:n.value.provincia,"onUpdate:modelValue":[g[1]||(g[1]=i=>n.value.provincia=i),y]},null,8,["error","items","modelValue"])]),s("div",null,[w(ae,{error:t.error,items:p.value,itemValue:"code",placeholder:"Distrito",modelValue:n.value.distrito,"onUpdate:modelValue":[g[2]||(g[2]=i=>n.value.distrito=i),g[3]||(g[3]=i=>l.value=i.code)]},null,8,["error","items","modelValue"])]),s("div",Bt,[w(Q,{modelValue:t.question.other,"onUpdate:modelValue":g[4]||(g[4]=i=>t.question.other=i),label:"Dirección"},null,8,["modelValue"])])])],64))}},Lt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},zt={class:"grid grid-cols-3 gap-5"},Mt={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:u}){const v=t,m=new we,l=I({get:()=>v.modelValue,set:h=>u("update:modelValue",h)}),a=R([]),r=R([]),p=R([]),n=R({departamento:null,provincia:null,distrito:null}),c=async h=>{n.value.provincia=null,r.value=[],n.value.distrito=null,p.value=[],r.value=await m.getProvincias(h.code),u("update:modelValue",null)},y=async h=>{u("update:modelValue",null),p.value=[],n.value.distrito=null,p.value=await m.getDistritos(h.code)},f=async()=>{a.value=await m.getDepartamentos()},$=async h=>{let g=await m.getUbigeo(h);n.value.departamento={code:g.idDepartment,title:g.department},n.value.provincia={code:g.idProvince,title:g.province},n.value.distrito={code:g.idDistrict,title:g.district}};return(async()=>{l.value&&await $(l.value)})(),(h,g)=>(b(),S(H,null,[s("label",Lt,A(t.question.statement),1),s("div",zt,[s("div",null,[w(ae,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:f,itemValue:"code",modelValue:n.value.departamento,"onUpdate:modelValue":[g[0]||(g[0]=i=>n.value.departamento=i),c]},null,8,["error","items","modelValue"])]),s("div",null,[w(ae,{error:t.error,items:r.value,itemValue:"code",placeholder:"Provincia",modelValue:n.value.provincia,"onUpdate:modelValue":[g[1]||(g[1]=i=>n.value.provincia=i),y]},null,8,["error","items","modelValue"])]),s("div",null,[w(ae,{error:t.error,items:p.value,itemValue:"code",placeholder:"Distrito",modelValue:n.value.distrito,"onUpdate:modelValue":[g[2]||(g[2]=i=>n.value.distrito=i),g[3]||(g[3]=i=>l.value=i.code)]},null,8,["error","items","modelValue"])])])],64))}},Kt={__name:"StudyCycleForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>v.modelValue,set:a=>u("update:modelValue",a)}),l=[{id:1,title:"Semestre I"},{id:2,title:"Semestre II    "},{id:3,title:"Semestre III"},{id:4,title:"Semestre IV"},{id:5,title:"Semestre V"},{id:6,title:"Semestre VI"},{id:7,title:"Semestre VII"},{id:8,title:"Semestre VIII"},{id:9,title:"Semestre IX"},{id:10,title:"Semestre X"},{id:11,title:"Semestre XI"},{id:12,title:"Semestre XII"}];return(a,r)=>(b(),K(ce,{isDisabled:t.isDisabled,modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=p=>m.value=p),label:t.question.statement,error:t.question.error,options:l},null,8,["isDisabled","modelValue","label","error"]))}},Ht=[{id:"001",title:"trabajo social"},{id:"003",title:"medicina veterinaria y zootecnía"},{id:"004",title:"medicina humana"},{id:"005",title:"ingeniería química"},{id:"006",title:"ingeniería mecánica, eléctrica, electrónica y sistemas"},{id:"007",title:"ingeniería geológica y metalúrgica"},{id:"008",title:"ingeniería estadística e informática"},{id:"009",title:"ingeniería económica"},{id:"010",title:"ingeniería de minas"},{id:"011",title:"ingeniería civil y arquitectura"},{id:"012",title:"ingeniería agrícola"},{id:"013",title:"ciencias sociales"},{id:"014",title:"enfermería"},{id:"015",title:"ciencias jurídicas y políticas"},{id:"016",title:"ciencias de la salud"},{id:"017",title:"ciencias de la educación"},{id:"018",title:"ciencias contables y administrativas"},{id:"019",title:"ciencias biológicas"},{id:"020",title:"ciencias agrarias"}],qt={__name:"FacuForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>(b(),K(ce,{isDisabled:t.isDisabled,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=r=>m.value=r),label:t.question.statement,error:t.question.error,options:T(Ht)},null,8,["isDisabled","modelValue","label","error","options"]))}},Xt=[{id:"001",title:"administración"},{id:"002",title:"antropología"},{id:"003",title:"arquitectura y urbanismo"},{id:"004",title:"arte: artes plásticas"},{id:"005",title:"arte: danza"},{id:"006",title:"arte: música"},{id:"007",title:"arte: teatro"},{id:"008",title:"biología: ecología"},{id:"009",title:"biología: microbiología y laboratorio clínico"},{id:"010",title:"biología: pesquería"},{id:"011",title:"ciencias contables"},{id:"012",title:"ciencias de la comunicación social"},{id:"013",title:"ciencias físico matemáticas: física"},{id:"014",title:"ciencias físico matemáticas: matemáticas"},{id:"015",title:"derecho"},{id:"034",title:"educación física"},{id:"035",title:"educación inicial"},{id:"036",title:"educación primaria"},{id:"037",title:"educación secundaria de la especialidad de ciencia, tecnología y ambiente"},{id:"038",title:"educación secundaria de la especialidad de ciencias sociales"},{id:"039",title:"educación secundaria de la especialidad de lengua, literatura, psicología y filosofía"},{id:"040",title:"educación secundaria de la especialidad de matemática, física, computación e informática"},{id:"041",title:"enfermería"},{id:"042",title:"ingeniería agrícola"},{id:"043",title:"ingeniería agroindustrial"},{id:"044",title:"ingeniería agronómica"},{id:"045",title:"ingeniería civil"},{id:"046",title:"ingeniería de minas"},{id:"047",title:"ingeniería de sistemas"},{id:"048",title:"ingeniería económica"},{id:"049",title:"ingeniería electrónica"},{id:"050",title:"ingeniería estadística e informática"},{id:"051",title:"ingeniería geológica"},{id:"052",title:"ingeniería mecánica eléctrica"},{id:"053",title:"ingeniería metalúrgica"},{id:"054",title:"ingeniería química"},{id:"055",title:"ingeniería topográfica y agrimensura"},{id:"169",title:"medicina humana"},{id:"170",title:"medicina veterinaria y zootecnía"},{id:"171",title:"nutrición humana"},{id:"172",title:"odontología"},{id:"231",title:"sociología"},{id:"232",title:"trabajo social"},{id:"233",title:"turismo"}],Yt={__name:"ProStudyForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>(b(),K(ce,{isDisabled:t.isDisabled,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=r=>m.value=r),label:t.question.statement,error:t.question.error,options:T(Xt)},null,8,["isDisabled","modelValue","label","error","options"]))}},Gt={class:"grid grid-cols-4"},Jt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},Zt={class:"relative col-span-4 mt-1 rounded-md ms-4"},Qt={class:"col-span-4"},Wt={class:"col-span-4 text-end"},ea={class:"text-xs text-red-600"},ta={__name:"OneSelectionOtherForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t,m=I({get:()=>v.modelValue,set:l=>u("update:modelValue",l)});return(l,a)=>{var r;return b(),S("div",Gt,[s("label",Jt,A(t.question.statement),1),s("div",Zt,[w(Re,{questionId:t.question.id,options:t.question.options,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p)},null,8,["questionId","options","modelValue"])]),s("div",Qt,[w(Q,{modelValue:t.question.answer.text,"onUpdate:modelValue":a[1]||(a[1]=p=>t.question.answer.text=p),label:"Especifique"},null,8,["modelValue"])]),s("div",Wt,[s("span",ea,A((r=t.question.error)==null?void 0:r.text),1)])])}}},aa={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},la={class:"col-span-2 rounded-lg"},oa={key:1,class:"mb-4"},ia={key:2,class:"mb-4"},na={key:3,class:"mb-4"},sa={key:4,class:"mb-4"},ra={key:5,class:"mb-4"},ua={key:6,class:"mb-4"},da={key:7,class:"mb-4"},ca={key:8,class:"mb-4"},pa={key:9,class:"mb-4"},va={key:10,class:"mb-4"},ma={key:11,class:"mb-4"},fa={key:12,class:"mb-4"},ba={class:"w-full text-end"},ga={class:"text-xs text-red-600"},xa={key:13,class:"mb-4"},ya={class:"w-full text-end"},ha={class:"text-xs text-red-600"},Va={class:"flex justify-end mt-4"},_a={__name:"Form",props:{questions:Array,section:Object},emits:["onSuccess","onFaild"],setup(t,{emit:u}){const v=t,m=new Ve,l=I(()=>v.questions),a=R(!0),r=i=>{l.value.map(d=>(d.isDependent==i.id&&(d.optionTrigger===i.answer.options?d.show=!0:(d.answer=[],d.show=!1)),d))},p=(i,d,e=!1)=>{e&&r(d),d.isRequired==="true"&&n(i,d)},n=(i,d)=>{l.value.map(e=>{e.id===d.id&&(te(i)?d.isRequired==="false"&&!te(i)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Obligatorio"},a.value=!1))})},c=(i,d)=>{l.value.map(e=>{e.id==d.id&&(d.isRequired==="true"&&!te(i)?(e.error={isError:!0,text:"Obligatorio"},a.value=!1):d.isRequired==="false"&&!te(i)?(e.error={isError:!1,text:null},a.value=!0):gt(i)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Formato no valido"},a.value=!1))})},y=(i,d)=>{l.value.map(e=>{e.id==d.id&&(te(i)?ft(i)?d.isRequired==="false"&&!te(i)?(e.error={isError:!1,text:null},a.value=!0):bt(i,9)?(e.error={isError:!1,text:null},a.value=!0):(e.error={isError:!0,text:"Longitud debe se 9 digitos"},a.value=!1):(e.error={isError:!0,text:"Solo se permite numeros"},a.value=!1):(e.error={isError:!0,text:"Obligatorio"},a.value=!1))})},f=["78ae9492-a909-459f-ba53-15165c884d87","d2574937-e2fc-4eb5-b612-d767e3610a04","fb5c10df-f60d-4815-a007-a189e879054e","e8367e12-f088-4188-bed8-50342bac562c","c9175462-8e03-47b1-9450-2f126a1655c2","de9c81d9-87d5-4cf4-b2f0-5274399ff94c","a3056caa-84a9-44a0-9ee5-46a59ad3f073","50af5759-8009-4419-bfc2-8df851be62b1","4d36be9a-1567-4d80-a726-a5a1bc2a33c7","36f9a47d-457d-4052-ab25-47b4decb887f","574ba955-5176-4997-8e34-42524cafa862","6bc3b523-2a89-423d-99bf-53692c004633"],$=()=>{let i={section_:v.section.id,answers_:[]};const d=[1,2,3,5,8,9,10,20,50],e=[0,4],x=[6],F=[11],j=[30];return l.value.forEach(o=>{var V;if((!o.isDependent||o.show)&&!f.includes(o.id))if(d.includes(o.type))i.answers_.push({qst_:o.id,opts_:null,txt_:o.answer.text});else if(e.includes(o.type))i.answers_.push({qst_:o.id,opts_:[o.answer.options],txt_:null});else if(x.includes(o.type))i.answers_.push({qst_:o.id,opts_:Array.isArray(o.answer.options)?o.answer.options:(V=o.answer.options)==null?void 0:V.split(","),txt_:null});else if(F.includes(o.type)){let O=o.answer.text.split("%%%",2);i.answers_.push({qst_:o.id,opts_:null,txt_:O[0]+"%%%"+o.other})}else j.includes(o.type)&&i.answers_.push({qst_:o.id,opts_:[o.answer.options],txt_:o.answer.text})}),i},C=()=>{var i=0;return l.value.forEach(d=>{var e,x;!((e=d.answer)!=null&&e.options)&&!((x=d.answer)!=null&&x.text)&&d.isRequired==="true"&&(!d.isDependent||d.show)?(d.error={isError:!0,text:"Obligatorio"},i++):d.error={isError:!1,text:null}}),!(i>0)},h=async()=>{if(C()){let d=$(),e=await m.saveSection(d);return u("onSuccess"),e}return console.error("Error ..."),u("onFaild"),!1};return(async()=>{l.value.forEach(i=>{r(i)})})(),(i,d)=>(b(),S("div",aa,[s("div",la,[(b(!0),S(H,null,be(l.value,(e,x)=>{var F,j;return b(),S("div",{key:e.id},[s("ul",null,[!e.isDependent||e.show?(b(),S(H,{key:0},[e.type===0?(b(),S("li",{key:0,class:oe(["mb-4",e.show?"bg-slate-100 p-3 rounded-lg":""])},[w(Ot,{isDisabled:f.includes(e.id),question:e,modelValue:e.answer.options,"onUpdate:modelValue":[o=>e.answer.options=o,o=>p(o,e,!0)]},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])],2)):e.type===1?(b(),S("li",oa,[w(Q,{isReadonly:f.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(o,e)],type:"text",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===2?(b(),S("li",ia,[w(Q,{isReadonly:f.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(o,e)],type:"date",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===3?(b(),S("li",na,[w(Q,{isReadonly:f.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(e.answer,e)],type:"number",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===50?(b(),S("li",sa,[w(Kt,{isDisabled:f.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":o=>e.answer.text=o},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])])):e.type===21?(b(),S("li",ra,[w(qt,{isDisabled:f.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":o=>e.answer.text=o},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])])):J("",!0),e.type===30?(b(),S("li",ua,[w(ta,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[o=>e.answer.options=o,o=>p(o,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===20?(b(),S("li",da,[w(Yt,{isDisabled:f.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":o=>e.answer.text=o},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])])):e.type===4?(b(),S("li",ca,[w(ce,{modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(o,e,x)],label:e.statement,error:e.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):e.type===6?(b(),S("li",pa,[w(Pt,{question:e,modelValue:e.answer.options,"onUpdate:modelValue":[o=>e.answer.options=o,o=>p(o,e,x)]},null,8,["question","modelValue","onUpdate:modelValue"])])):e.type===8?(b(),S("li",va,[w(Q,{isReadonly:f.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>c(o,e)],type:"email",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===9?(b(),S("li",ma,[w(Q,{isReadonly:f.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>y(o,e)],type:"tel",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])])):e.type===10?(b(),S("li",fa,[w(Mt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),s("div",ba,[s("span",ga,A((F=e.error)==null?void 0:F.text),1)])])):e.type===11?(b(),S("li",xa,[w(Nt,{question:e,modelValue:e.answer.text,"onUpdate:modelValue":[o=>e.answer.text=o,o=>p(e.answer,e)],error:!!e.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),s("div",ya,[s("span",ha,A((j=e.error)==null?void 0:j.text),1)])])):J("",!0)],64)):J("",!0)])])}),128)),s("div",Va,[Ee(i.$slots,"footer",{submit:h})])])]))}};const wa={class:"z-10 fixed right-2 top-1/2 block md:hidden"},Sa=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})],-1),Ra={class:"text-sm sm:text-xl uppercase font-bold p-5 text-blue-950"},Oa={class:"grid grid-cols-4 gap-4"},Ia=s("strong",null," Indicaciones: ",-1),ka=s("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),Ca=s("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),$a={class:"col-span-4 lg:col-span-1 hidden md:block"},Da={class:"col-span-4 lg:col-span-3 rounded-lg bg-white p-6 shadow-lg mb-4"},Pa={class:""},Ua={class:"text-lg font-semibold mb-3 uppercase"},Ea={class:"text-sm uppercase mb-4 font-bold"},Ta={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},Aa={class:"flex justify-between w-full"},Fa={class:"previous"},ja={class:"text-start"},Ba=s("span",null,"Anterior",-1),Na={class:"text-lg capitalize"},La={class:"text-start"},za=s("span",null,"Anterior",-1),Ma={class:"text-lg capitalize"},Ka={class:"nexts"},Ha={class:"text-end"},qa=s("span",null,"Siguiente ",-1),Xa={class:"text-lg capitalize"},Ya={class:"text-end"},Ga=s("span",null,"Siguiente ",-1),Ja={class:"text-lg capitalize"},Za=s("div",{class:"text-end"},[s("span",null," Guardar "),s("h5",{class:"text-lg capitalize"},"Finalizar")],-1),sl={__name:"survey",setup(t){const u=new Te,v=new Ve,m=Ae(),l=Fe(),a=R(null),r=R(null),p=R(null),n=R(null),c=R({section:null,topic:null}),y=R({section:null,topic:null}),f=R({section:null,topic:null}),$=R(!1),C=R(!1),h=()=>{window.scroll({top:80,left:0,behavior:"smooth"})},g=async()=>{C.value=!0,await v.finishSurvey(a.value.id)&&(a.value.hasFinished="true"),C.value=!1},i=async D=>{C.value=!0;let P=await x(D.id);P.length>0&&await m.setPositions(a.value.id,D.id,P[0].id)&&(a.value.topic=D.id,a.value.section=P[0].id,p.value=P,await k(a.value),n.value=await F(c.value.section.id)),C.value=!1},d=async D=>{C.value=!0;let P=await F(D.id);P.length>0&&await m.setPositions(a.value.id,c.value.topic.id,D.id)&&(a.value.section=D.id,await k(a.value),n.value=P),C.value=!1},e=async D=>await v.getTopics(D),x=async D=>await v.getSections(D),F=async D=>await v.getQuestions(D),j=(D,P)=>{let z=P.findIndex(G=>D.id===G.id);return z!==-1&&P.length!==z+1&&P.findIndex(q=>{var X;return((X=P[z+1])==null?void 0:X.id)===q.id})!==-1?P[z+1]:null},o=(D,P)=>{let z=P.findIndex(G=>D.id===G.id);return z!==-1&&z!==0&&P.findIndex(q=>{var X;return((X=P[z-1])==null?void 0:X.id)===q.id})!==-1?P[z-1]:null},V=async D=>{c.value.section=p.value.find(P=>P.id===D.section),c.value.topic=r.value.find(P=>P.id===D.topic)},O=async()=>{y.value.topic=j(c.value.topic,r.value),y.value.section=j(c.value.section,p.value)},_=async()=>{f.value.topic=o(c.value.topic,r.value),f.value.section=o(c.value.section,p.value)},k=async D=>{await V(D),await O(),await _()},U=async()=>{a.value=await v.getSurvey(l.params.id),a.value?a.value.topic&&a.value.section?(r.value=await e(a.value.id),p.value=await x(a.value.topic),n.value=await F(a.value.section),await k(a.value)):(u.back(),m.cont++):u.push({name:"home"})};return(async()=>{console.log("init survey "),$.value=!0,await U(),$.value=!1})(),(D,P)=>(b(),K(je,null,{default:N(()=>{var z,G;return[$.value?(b(),S(H,{key:0},[$.value?(b(),K(ye,{key:0})):J("",!0)],64)):(b(),S(H,{key:1},[s("div",wa,[w(Me,null,{activator:N(({modal:q})=>[w(T(ee),{onClick:q,color:"dark"},{default:N(()=>[Sa]),_:2},1032,["onClick"])]),content:N(()=>[w(he,{changeTopic:i,topics:r.value,current:c.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),_:1})]),s("h2",Ra,A(a.value.title),1),s("div",Oa,[w(T(Be),{type:"info",class:"col-span-4",ref:"alert"},{default:N(()=>[Ia,ka,Ca]),_:1},512),s("div",$a,[w(he,{changeTopic:i,topics:r.value,current:c.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),s("div",Da,[s("div",Pa,[s("h3",Ua,A((z=c.value.topic)==null?void 0:z.title),1),s("h4",Ea,A((G=c.value.section)==null?void 0:G.title),1)]),p.value?(b(),S(H,{key:1},[C.value?(b(),K(ye,{key:0})):(b(),K(_a,{key:1,questions:n.value,section:c.value.section},{footer:N(({submit:q})=>[s("div",Aa,[s("div",Fa,[f.value.section&&a.value.hasFinished==="true"?(b(),K(T(ee),{key:0,onClick:async()=>{await q()&&(await d(f.value.section),h())}},{default:N(()=>[s("div",ja,[Ba,s("h5",Na,A(f.value.section.title),1)])]),_:2},1032,["onClick"])):(b(),S(H,{key:1},[f.value.topic&&a.value.hasFinished==="true"?(b(),K(T(ee),{key:0,color:"light",onClick:async()=>{await q()&&(await i(f.value.topic),h())}},{default:N(()=>[s("div",La,[za,s("h5",Ma,A(f.value.topic.title),1)])]),_:2},1032,["onClick"])):J("",!0)],64))]),s("div",Ka,[y.value.section?(b(),K(T(ee),{key:0,onClick:async()=>{await q()&&(await d(y.value.section),h())}},{default:N(()=>[s("div",Ha,[qa,s("h5",Xa,A(y.value.section.title),1)])]),_:2},1032,["onClick"])):(b(),S(H,{key:1},[y.value.topic!==null?(b(),K(T(ee),{key:0,color:"light",onClick:async()=>{await q()&&(await i(y.value.topic),h())}},{default:N(()=>[s("div",Ya,[Ga,s("h5",Ja,A(y.value.topic.title),1)])]),_:2},1032,["onClick"])):(b(),S(H,{key:1},[a.value.hasFinished==="false"?(b(),K(T(ee),{key:0,color:"green",onClick:async()=>{await q()&&(await g(),h())}},{default:N(()=>[Za]),_:2},1032,["onClick"])):J("",!0)],64))],64))])])]),_:1},8,["questions","section"]))],64)):(b(),S("h4",Ta," no hay secciones "))])])],64))]}),_:1}))}};export{sl as default};
