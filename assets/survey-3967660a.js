var be=Object.defineProperty;var ge=(e,u,v)=>u in e?be(e,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):e[u]=v;var J=(e,u,v)=>(ge(e,typeof u!="symbol"?u+"":u,v),v);import{M as ee,d as Q,r as $,b as w,O as T,p as xe,e as ie,B as re,A as de,F as M,w as se,f as ye,n as z,i as he,o as S,c as C,m as ue,G as Ve,Q as _e,a as d,t as U,q as K,j as I,g as Y,h as L,u as A,R as te,x as G,_ as Se,k as we,S as pe,I as Oe,y as Re,V as Ce,W as Ie,X as $e,P as ce}from"./index-16aab99a.js";import{_ as ke}from"./IndexSurvey-54920de2.js";import{d as Pe,e as Te,_ as De,r as Ue,b as Ee,a as Ae}from"./HSelect-a18bff67.js";import{u as N,o as E,F as je,c as Fe,l as ae,K as Be,H as X,f as ve,t as oe,N as le,p as Le,O as Ne,a as B}from"./use-outside-click-2ec7c725.js";import{x as Me,a as j,b as ze,u as Ke}from"./use-text-value-e04f505f.js";import{p as Ge}from"./use-tree-walker-bd8f0ac5.js";import{f as He,a as Ye}from"./hidden-3fac7b7d.js";import{r as We,n as Ze,S as Je}from"./transition-a3d03cc3.js";class me{constructor(){J(this,"getDepartamentos",async()=>(await ee.get("http://38.43.133.27/SURVEY_PLACES/v1/departments/")).data.data);J(this,"getProvincias",async u=>(await ee.get(`http://38.43.133.27/SURVEY_PLACES/v1/provinces/${u}/`)).data.data);J(this,"getDistritos",async u=>(await ee.get(`http://38.43.133.27/SURVEY_PLACES/v1/districts/${u}/`)).data.data);J(this,"getUbigeo",async u=>{try{return(await ee.get(`http://38.43.133.27/SURVEY_PLACES/v1/${u}/`)).data.data[0]}catch{return null}})}}function Qe(e,u){return e===u}var Xe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xe||{}),qe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(qe||{}),et=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(et||{});let fe=Symbol("ComboboxContext");function q(e){let u=he(fe,null);if(u===null){let v=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,q),v}return u}let tt=Q({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Qe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:u,attrs:v,emit:s}){let t=$(1),l=$(null),i=$(null),g=$(null),r=$(null),f=$({static:!1,hold:!1}),h=$([]),V=$(null),c=$(1),x=$(!1);function a(b=O=>O){let O=V.value!==null?h.value[V.value]:null,R=Ne(b(h.value.slice()),k=>E(k.dataRef.domRef)),_=O?R.indexOf(O):null;return _===-1&&(_=null),{options:R,activeOptionIndex:_}}let p=w(()=>e.multiple?1:0),n=w(()=>e.nullable),[o,y]=Pe(w(()=>e.modelValue===void 0?N(p.value,{[1]:[],[0]:void 0}):e.modelValue),b=>s("update:modelValue",b),w(()=>e.defaultValue)),m={comboboxState:t,value:o,mode:p,compare(b,O){if(typeof e.by=="string"){let R=e.by;return(b==null?void 0:b[R])===(O==null?void 0:O[R])}return e.by(b,O)},defaultValue:w(()=>e.defaultValue),nullable:n,inputRef:i,labelRef:l,buttonRef:g,optionsRef:r,disabled:w(()=>e.disabled),options:h,change(b){y(b)},activeOptionIndex:w(()=>{if(x.value&&V.value===null&&h.value.length>0){let b=h.value.findIndex(O=>!O.dataRef.disabled);b!==-1&&(V.value=b)}return V.value}),activationTrigger:c,optionsPropsRef:f,closeCombobox(){x.value=!1,!e.disabled&&t.value!==1&&(t.value=1,V.value=null)},openCombobox(){if(x.value=!0,e.disabled||t.value===0)return;let b=h.value.findIndex(O=>{let R=T(O.dataRef.value);return N(p.value,{[0]:()=>m.compare(T(m.value.value),T(R)),[1]:()=>T(m.value.value).some(_=>m.compare(T(_),T(R)))})});b!==-1&&(V.value=b),t.value=0},goToOption(b,O,R){if(x.value=!1,e.disabled||r.value&&!f.value.static&&t.value===1)return;let _=a();if(_.activeOptionIndex===null){let D=_.options.findIndex(Z=>!Z.dataRef.disabled);D!==-1&&(_.activeOptionIndex=D)}let k=Me(b===j.Specific?{focus:j.Specific,id:O}:{focus:b},{resolveItems:()=>_.options,resolveActiveIndex:()=>_.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});V.value=k,c.value=R??1,h.value=_.options},selectOption(b){let O=h.value.find(_=>_.id===b);if(!O)return;let{dataRef:R}=O;y(N(p.value,{[0]:()=>R.value,[1]:()=>{let _=T(m.value.value).slice(),k=T(R.value),D=_.findIndex(Z=>m.compare(k,T(Z)));return D===-1?_.push(k):_.splice(D,1),_}}))},selectActiveOption(){if(m.activeOptionIndex.value===null)return;let{dataRef:b,id:O}=h.value[m.activeOptionIndex.value];y(N(p.value,{[0]:()=>b.value,[1]:()=>{let R=T(m.value.value).slice(),_=T(b.value),k=R.findIndex(D=>m.compare(_,T(D)));return k===-1?R.push(_):R.splice(k,1),R}})),m.goToOption(j.Specific,O)},registerOption(b,O){let R={id:b,dataRef:O},_=a(k=>[...k,R]);if(V.value===null){let k=O.value.value;N(p.value,{[0]:()=>m.compare(T(m.value.value),T(k)),[1]:()=>T(m.value.value).some(D=>m.compare(T(D),T(k)))})&&(_.activeOptionIndex=_.options.indexOf(R))}h.value=_.options,V.value=_.activeOptionIndex,c.value=1,_.options.some(k=>!E(k.dataRef.domRef))&&requestAnimationFrame(()=>{let k=a();h.value=k.options,V.value=k.activeOptionIndex})},unregisterOption(b){var O;m.activeOptionIndex.value!==null&&((O=m.options.value[m.activeOptionIndex.value])==null?void 0:O.id)===b&&(x.value=!0);let R=a(_=>{let k=_.findIndex(D=>D.id===b);return k!==-1&&_.splice(k,1),_});h.value=R.options,V.value=R.activeOptionIndex,c.value=1}};je([i,g,r],()=>m.closeCombobox(),w(()=>t.value===0)),xe(fe,m),Fe(w(()=>N(t.value,{[0]:ae.Open,[1]:ae.Closed})));let P=w(()=>m.activeOptionIndex.value===null?null:h.value[m.activeOptionIndex.value].dataRef.value),F=w(()=>{var b;return(b=E(i))==null?void 0:b.closest("form")});return ie(()=>{re([F],()=>{if(!F.value||e.defaultValue===void 0)return;function b(){m.change(e.defaultValue)}return F.value.addEventListener("reset",b),()=>{var O;(O=F.value)==null||O.removeEventListener("reset",b)}},{immediate:!0})}),()=>{let{name:b,disabled:O,form:R,..._}=e,k={open:t.value===0,disabled:O,activeIndex:m.activeOptionIndex.value,activeOption:P.value,value:o.value};return de(M,[...b!=null&&o.value!=null?Te({[b]:o.value}).map(([D,Z])=>de(He,Be({features:Ye.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:R,name:D,value:Z}))):[],X({theirProps:{...v,...ve(_,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:k,slots:u,attrs:v,name:"Combobox"})])}}}),at=Q({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${oe()}`}},setup(e,{attrs:u,slots:v,expose:s}){let t=q("ComboboxButton");s({el:t.buttonRef,$el:t.buttonRef});function l(r){t.disabled.value||(t.comboboxState.value===0?t.closeCombobox():(r.preventDefault(),t.openCombobox()),z(()=>{var f;return(f=E(t.inputRef))==null?void 0:f.focus({preventScroll:!0})}))}function i(r){switch(r.key){case B.ArrowDown:r.preventDefault(),r.stopPropagation(),t.comboboxState.value===1&&t.openCombobox(),z(()=>{var f;return(f=t.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case B.ArrowUp:r.preventDefault(),r.stopPropagation(),t.comboboxState.value===1&&(t.openCombobox(),z(()=>{t.value.value||t.goToOption(j.Last)})),z(()=>{var f;return(f=t.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case B.Escape:if(t.comboboxState.value!==0)return;r.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&r.stopPropagation(),t.closeCombobox(),z(()=>{var f;return(f=t.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return}}let g=ze(w(()=>({as:e.as,type:u.type})),t.buttonRef);return()=>{var r,f;let h={open:t.comboboxState.value===0,disabled:t.disabled.value,value:t.value.value},{id:V,...c}=e,x={ref:t.buttonRef,id:V,type:g.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(r=E(t.optionsRef))==null?void 0:r.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-labelledby":t.labelRef.value?[(f=E(t.labelRef))==null?void 0:f.id,V].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:i,onClick:l};return X({ourProps:x,theirProps:c,slot:h,attrs:u,slots:v,name:"ComboboxButton"})}}}),lt=Q({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${oe()}`}},emits:{change:e=>!0},setup(e,{emit:u,attrs:v,slots:s,expose:t}){let l=q("ComboboxInput"),i={value:!1};t({el:l.inputRef,$el:l.inputRef});let g=w(()=>{var n;let o=l.value.value;return E(l.inputRef)?typeof e.displayValue<"u"&&o!==void 0?(n=e.displayValue(o))!=null?n:"":typeof o=="string"?o:"":""});ie(()=>{re([g,l.comboboxState],([n,o],[y,m])=>{if(i.value)return;let P=E(l.inputRef);P&&(m===0&&o===1||n!==y)&&(P.value=n)},{immediate:!0}),re([l.comboboxState],([n],[o])=>{if(n===0&&o===1){let y=E(l.inputRef);if(!y)return;let m=y.value,{selectionStart:P,selectionEnd:F,selectionDirection:b}=y;y.value="",y.value=m,b!==null?y.setSelectionRange(P,F,b):y.setSelectionRange(P,F)}})});let r=$(!1),f=$(null);function h(){r.value=!0}function V(){We().nextFrame(()=>{r.value=!1,f.value&&(l.openCombobox(),u("change",f.value),f.value=null)})}function c(n){switch(i.value=!0,n.key){case B.Backspace:case B.Delete:if(l.mode.value!==0||!l.nullable.value)return;let o=n.currentTarget;requestAnimationFrame(()=>{if(o.value===""){l.change(null);let y=E(l.optionsRef);y&&(y.scrollTop=0),l.goToOption(j.Nothing)}});break;case B.Enter:if(i.value=!1,l.comboboxState.value!==0||r.value)return;if(n.preventDefault(),n.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case B.ArrowDown:return i.value=!1,n.preventDefault(),n.stopPropagation(),N(l.comboboxState.value,{[0]:()=>l.goToOption(j.Next),[1]:()=>l.openCombobox()});case B.ArrowUp:return i.value=!1,n.preventDefault(),n.stopPropagation(),N(l.comboboxState.value,{[0]:()=>l.goToOption(j.Previous),[1]:()=>{l.openCombobox(),z(()=>{l.value.value||l.goToOption(j.Last)})}});case B.Home:if(n.shiftKey)break;return i.value=!1,n.preventDefault(),n.stopPropagation(),l.goToOption(j.First);case B.PageUp:return i.value=!1,n.preventDefault(),n.stopPropagation(),l.goToOption(j.First);case B.End:if(n.shiftKey)break;return i.value=!1,n.preventDefault(),n.stopPropagation(),l.goToOption(j.Last);case B.PageDown:return i.value=!1,n.preventDefault(),n.stopPropagation(),l.goToOption(j.Last);case B.Escape:if(i.value=!1,l.comboboxState.value!==0)return;n.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&n.stopPropagation(),l.closeCombobox();break;case B.Tab:if(i.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.selectActiveOption(),l.closeCombobox();break}}function x(n){if(r.value){f.value=n;return}l.openCombobox(),u("change",n)}function a(){i.value=!1}let p=w(()=>{var n,o,y,m;return(m=(y=(o=e.defaultValue)!=null?o:l.defaultValue.value!==void 0?(n=e.displayValue)==null?void 0:n.call(e,l.defaultValue.value):null)!=null?y:l.defaultValue.value)!=null?m:""});return()=>{var n,o,y,m,P,F;let b={open:l.comboboxState.value===0},{id:O,displayValue:R,onChange:_,...k}=e,D={"aria-controls":(n=l.optionsRef.value)==null?void 0:n.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null||(o=l.options.value[l.activeOptionIndex.value])==null?void 0:o.id,"aria-labelledby":(P=(y=E(l.labelRef))==null?void 0:y.id)!=null?P:(m=E(l.buttonRef))==null?void 0:m.id,"aria-autocomplete":"list",id:O,onCompositionstart:h,onCompositionend:V,onKeydown:c,onInput:x,onBlur:a,role:"combobox",type:(F=v.type)!=null?F:"text",tabIndex:0,ref:l.inputRef,defaultValue:p.value,disabled:l.disabled.value===!0?!0:void 0};return X({ourProps:D,theirProps:k,slot:b,attrs:v,slots:s,features:le.RenderStrategy|le.Static,name:"ComboboxInput"})}}}),ot=Q({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:u,slots:v,expose:s}){let t=q("ComboboxOptions"),l=`headlessui-combobox-options-${oe()}`;s({el:t.optionsRef,$el:t.optionsRef}),se(()=>{t.optionsPropsRef.value.static=e.static}),se(()=>{t.optionsPropsRef.value.hold=e.hold});let i=Le(),g=w(()=>i!==null?(i.value&ae.Open)===ae.Open:t.comboboxState.value===0);return Ge({container:w(()=>E(t.optionsRef)),enabled:w(()=>t.comboboxState.value===0),accept(r){return r.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}}),()=>{var r,f,h;let V={open:t.comboboxState.value===0},c={"aria-labelledby":(h=(r=E(t.labelRef))==null?void 0:r.id)!=null?h:(f=E(t.buttonRef))==null?void 0:f.id,id:l,ref:t.optionsRef,role:"listbox","aria-multiselectable":t.mode.value===1?!0:void 0},x=ve(e,["hold"]);return X({ourProps:c,theirProps:x,slot:V,attrs:u,slots:v,features:le.RenderStrategy|le.Static,visible:g.value,name:"ComboboxOptions"})}}}),nt=Q({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:u,attrs:v,expose:s}){let t=q("ComboboxOption"),l=`headlessui-combobox-option-${oe()}`,i=$(null);s({el:i,$el:i});let g=w(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===l:!1),r=w(()=>N(t.mode.value,{[0]:()=>t.compare(T(t.value.value),T(e.value)),[1]:()=>T(t.value.value).some(n=>t.compare(T(n),T(e.value)))})),f=w(()=>({disabled:e.disabled,value:e.value,domRef:i}));ie(()=>t.registerOption(l,f)),ye(()=>t.unregisterOption(l)),se(()=>{t.comboboxState.value===0&&g.value&&t.activationTrigger.value!==0&&z(()=>{var n,o;return(o=(n=E(i))==null?void 0:n.scrollIntoView)==null?void 0:o.call(n,{block:"nearest"})})});function h(n){if(e.disabled)return n.preventDefault();t.selectOption(l),t.mode.value===0&&t.closeCombobox(),Ze()||requestAnimationFrame(()=>{var o;return(o=E(t.inputRef))==null?void 0:o.focus()})}function V(){if(e.disabled)return t.goToOption(j.Nothing);t.goToOption(j.Specific,l)}let c=Ke();function x(n){c.update(n)}function a(n){c.wasMoved(n)&&(e.disabled||g.value||t.goToOption(j.Specific,l,0))}function p(n){c.wasMoved(n)&&(e.disabled||g.value&&(t.optionsPropsRef.value.hold||t.goToOption(j.Nothing)))}return()=>{let{disabled:n}=e,o={active:g.value,selected:r.value,disabled:n},y={id:l,ref:i,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":r.value,disabled:void 0,onClick:h,onFocus:V,onPointerenter:x,onMouseenter:x,onPointermove:a,onMousemove:a,onPointerleave:p,onMouseleave:p};return X({ourProps:y,theirProps:e,slot:o,attrs:v,slots:u,name:"ComboboxOption"})}}});const ne=e=>!(e===""||e===null),rt=e=>{let u=/^[0-9]+$/;return!!e.match(u)},st=(e,u)=>e.length<=u,it=e=>{let u=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!e.match(u)},ut=["id","value","name"],dt=["for"],ct={__name:"RadioGroupForm",props:{questionId:String,options:Array,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(e,{emit:u}){const v=e,s=w({get:()=>v.modelValue,set:t=>u("update:modelValue",t)});return(t,l)=>(S(!0),C(M,null,ue(e.options,(i,g)=>(S(),C("div",{key:i.title,class:"flex items-center my-3"},[Ve(d("input",{id:`radio-${g}${e.questionId}`,type:"radio",value:i.id,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r),name:`name-${g}${e.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ut),[[_e,s.value]]),d("label",{for:`radio-${g}${e.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},U(i.title),9,dt)]))),128))}},pt={class:"grid grid-cols-4"},vt={class:"col-span-4 text-end"},mt={class:"text-xs text-red-600"},ft={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(e,{emit:u}){const v=e,s=w({get:()=>v.modelValue,set:t=>u("update:modelValue",t)});return(t,l)=>{var i,g,r;return S(),C("div",pt,[d("label",{for:"price",class:K(["col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize",(i=e.question.structure)==null?void 0:i.labelGrid])},U(e.question.statement),3),d("div",{class:K(["relative col-span-4 mt-1 rounded-md ms-4",(g=e.question.structure)==null?void 0:g.inputGrid])},[I(ct,{questionId:e.question.id,options:e.question.options,modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=f=>s.value=f)},null,8,["questionId","options","modelValue"])],2),d("div",vt,[d("span",mt,U((r=e.question.error)==null?void 0:r.text),1)])])}}},bt={class:"grid grid-cols-4"},gt={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900"},xt={class:"relative mt-1 rounded-md col-span-4 ps-4"},yt={class:"col-span-4 text-end"},ht={class:"text-xs text-red-600"},Vt={__name:"MultipleSelection",props:{modelValue:{type:Array,default:[]},question:Object},emits:["update:modelValue"],setup(e,{emit:u}){const v=e,s=w({get:()=>v.modelValue,set:t=>u("update:modelValue",t)});return(t,l)=>{var i;return S(),C("div",bt,[d("label",gt,U(e.question.statement),1),d("div",xt,[I(De,{questionIndex:e.question.id,options:e.question.options,modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=g=>s.value=g)},null,8,["questionIndex","options","modelValue"])]),d("div",yt,[d("span",ht,U((i=e.question.error)==null?void 0:i.text),1)])])}}},_t={class:"relative mt-1"},St={class:"block text-sm font-medium leading-6 text-gray-900"},wt={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},Ot={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},W={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String}},emits:["update:modelValue"],setup(e,{emit:u}){const v=e,s=w({get:()=>v.modelValue,set:g=>u("update:modelValue",g)});let t=$(""),l=$(!1),i=w(()=>t.value===""?[]:v.items.filter(g=>g[`${v.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(t.value.toLowerCase().replace(/\s+/g,""))));return(g,r)=>(S(),Y(A(tt),{modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=f=>s.value=f)},{default:L(()=>[d("div",_t,[d("label",St,U(e.label),1),d("div",wt,[I(A(lt),{class:K([e.error&&A(l)&&!s.value?"ring-red-600":"ring-gray-300","w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:f=>f==null?void 0:f[`${this.itemTitle}`],onChange:r[0]||(r[0]=f=>{f.target.value==""?te(l)?l.value=!0:l=!0:te(l)?l.value=!1:l=!1,te(t)?t.value=f.target.value:t=f.target.value}),placeholder:e.placeholder},null,8,["class","displayValue","placeholder"]),I(A(at),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:L(()=>[I(A(Ue),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),I(A(Je),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:r[1]||(r[1]=f=>te(t)?t.value="":t="")},{default:L(()=>[I(A(ot),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:L(()=>[A(i).length===0&&A(t)!==""?(S(),C("div",Ot," Sin datos ")):G("",!0),(S(!0),C(M,null,ue(A(i),f=>(S(),Y(A(nt),{as:"template",key:f[`${this.itemValue}`],value:f},{default:L(({selected:h,active:V})=>[d("li",{class:K(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":V,"text-gray-900":!V}])},[d("span",{class:K(["block truncate",{"font-medium":h,"font-normal":!h}])},U(f[`${this.itemTitle}`]),3),h?(S(),C("span",{key:0,class:K(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":V,"text-teal-600":!V}])},[I(A(Ee),{class:"h-5 w-5","aria-hidden":"true"})],2)):G("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Rt={class:"w-full text-end"},Ct={class:"text-xs text-red-600"},H={__name:"InputForm",props:{modelValue:[String,Number,Object,Array],label:String,placeholder:String,type:{default:"text",type:String},error:{type:[Object],default:{isError:!1,text:null}}},emits:["update:modelValue"],setup(e,{emit:u}){const v=e,s=w({get:()=>v.modelValue,set:t=>u("update:modelValue",t)});return(t,l)=>{var i,g;return S(),C("div",null,[I(A(Se),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r),type:e.type,label:e.label,class:K((i=e.error)!=null&&i.isError?"input-danger":"")},null,8,["modelValue","type","label","class"]),d("div",Rt,[d("span",Ct,U((g=e.error)==null?void 0:g.text),1)])])}}},It={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},$t={class:"grid grid-cols-3 gap-x-5"},kt={class:"col-span-3"},Pt={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(e,{emit:u}){const v=e,s=new me,t=w({get:()=>v.modelValue,set:a=>u("update:modelValue",a)}),l=$([]),i=$([]),g=$([]),r=$({departamento:null,provincia:null,distrito:null}),f=async a=>{r.value.provincia=null,i.value=[],r.value.distrito=null,g.value=[],i.value=await s.getProvincias(a.code),u("update:modelValue",null)},h=async a=>{u("update:modelValue",null),g.value=[],r.value.distrito=null,g.value=await s.getDistritos(a.code)},V=async a=>{let p=await s.getUbigeo(a[0]);r.value.departamento={code:p.idDepartment,title:p.department},r.value.provincia={code:p.idProvince,title:p.province},r.value.distrito={code:p.idDistrict,title:p.district},v.question.other=a[1]},c=async()=>{l.value.length==0&&(l.value=await s.getDepartamentos())};return(async()=>{let a=t.value;a&&(a=a.split("%%%",2),await V(a))})(),(a,p)=>(S(),C(M,null,[d("label",It,U(e.question.statement),1),d("div",$t,[d("div",null,[I(W,{placeholder:"Departamento",error:e.error,items:l.value,itemTitle:"title",onMouseup:c,itemValue:"code",modelValue:r.value.departamento,"onUpdate:modelValue":[p[0]||(p[0]=n=>r.value.departamento=n),f]},null,8,["error","items","modelValue"])]),d("div",null,[I(W,{error:e.error,items:i.value,itemTitle:"title",itemValue:"code",placeholder:"Provincia",modelValue:r.value.provincia,"onUpdate:modelValue":[p[1]||(p[1]=n=>r.value.provincia=n),h]},null,8,["error","items","modelValue"])]),d("div",null,[I(W,{error:e.error,items:g.value,itemTitle:"title",itemValue:"code",placeholder:"Distrito",modelValue:r.value.distrito,"onUpdate:modelValue":[p[2]||(p[2]=n=>r.value.distrito=n),p[3]||(p[3]=n=>t.value=n.code)]},null,8,["error","items","modelValue"])]),d("div",kt,[I(H,{modelValue:e.question.other,"onUpdate:modelValue":p[4]||(p[4]=n=>e.question.other=n),label:"Dirección"},null,8,["modelValue"])])])],64))}},Tt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},Dt={class:"grid grid-cols-3 gap-5"},Ut={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(e,{emit:u}){const v=e,s=new me,t=w({get:()=>v.modelValue,set:a=>u("update:modelValue",a)}),l=$([]),i=$([]),g=$([]),r=$({departamento:null,provincia:null,distrito:null}),f=async a=>{r.value.provincia=null,i.value=[],r.value.distrito=null,g.value=[],i.value=await s.getProvincias(a.code),u("update:modelValue",null)},h=async a=>{u("update:modelValue",null),g.value=[],r.value.distrito=null,g.value=await s.getDistritos(a.code)},V=async()=>{l.value=await s.getDepartamentos()},c=async a=>{let p=await s.getUbigeo(a);r.value.departamento={code:p.idDepartment,title:p.department},r.value.provincia={code:p.idProvince,title:p.province},r.value.distrito={code:p.idDistrict,title:p.district}};return(async()=>{t.value&&await c(t.value)})(),(a,p)=>(S(),C(M,null,[d("label",Tt,U(e.question.statement),1),d("div",Dt,[d("div",null,[I(W,{placeholder:"Departamento",error:e.error,items:l.value,itemTitle:"title",onMouseup:V,itemValue:"code",modelValue:r.value.departamento,"onUpdate:modelValue":[p[0]||(p[0]=n=>r.value.departamento=n),f]},null,8,["error","items","modelValue"])]),d("div",null,[I(W,{error:e.error,items:i.value,itemTitle:"title",itemValue:"code",placeholder:"Provincia",modelValue:r.value.provincia,"onUpdate:modelValue":[p[1]||(p[1]=n=>r.value.provincia=n),h]},null,8,["error","items","modelValue"])]),d("div",null,[I(W,{error:e.error,items:g.value,itemTitle:"title",itemValue:"code",placeholder:"Distrito",modelValue:r.value.distrito,"onUpdate:modelValue":[p[2]||(p[2]=n=>r.value.distrito=n),p[3]||(p[3]=n=>t.value=n.code)]},null,8,["error","items","modelValue"])])])],64))}},Et={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},At={class:"col-span-2 rounded-lg p-4"},jt={key:0,class:"mb-4"},Ft={key:1,class:"mb-4"},Bt={key:2,class:"mb-4"},Lt={key:3,class:"mb-4"},Nt={key:4,class:"mb-4"},Mt={key:5,class:"mb-4"},zt={key:6,class:"mb-4"},Kt={key:7,class:"mb-4"},Gt={key:8,class:"mb-4"},Ht={class:"w-full text-end"},Yt={class:"text-xs text-red-600"},Wt={key:9,class:"mb-4"},Zt={class:"w-full text-end"},Jt={class:"text-xs text-red-600"},Qt={class:"flex justify-end mt-4"},Xt={__name:"Form",props:{questions:Array,section:Object},setup(e){const u=e,v=new pe,s=w(()=>u.questions),t=$(!0),l=c=>{s.value.map(x=>(x.isDependent==c.id&&(x.optionTrigger===c.answer.options?x.show=!0:x.show=!1),x))},i=(c,x,a=!1)=>{a&&l(x);let p=!0;p=g(c,x),t.value=p},g=(c,x)=>{s.value.map(a=>{a.id===x.id&&(ne(c)?a.error={isError:!1,text:null}:a.error={isError:!0,text:"Obligatorio"})})},r=(c,x)=>{s.value.map(a=>{a.id==x.id&&(ne(c)?it(c)?a.error={isError:!1,text:null}:a.error={isError:!0,text:"Formato no valido"}:a.error={isError:!0,text:"Obligatorio"})})},f=(c,x)=>{s.value.map(a=>{a.id==x.id&&(ne(c)?rt(c)?st(c,9)?a.error={isError:!1,text:null}:a.error={isError:!0,text:"Longitud debe se 9 digitos"}:a.error={isError:!0,text:"Solo se permite numeros"}:a.error={isError:!0,text:"Obligatorio"})})},h=()=>{let c={section_:u.section.id,answers_:[]};const x=[1,2,3,5,8,9,10,20],a=[0,4],p=[6],n=[11];return s.value.forEach(o=>{if(!o.isDependent||o.show){if(x.includes(o.type))c.answers_.push({qst_:o.id,opts_:null,txt_:o.answer.text});else if(a.includes(o.type))c.answers_.push({qst_:o.id,opts_:[o.answer.options],txt_:null});else if(p.includes(o.type))c.answers_.push({qst_:o.id,opts_:o.answer.options,txt_:null});else if(n.includes(o.type)){let y=o.answer.text.split("%%%",2);c.answers_.push({qst_:o.id,opts_:null,txt_:y[0]+"%%%"+o.other})}}}),c},V=()=>{if(t.value=!0,s.value.forEach(c=>{var x,a;!((x=c.answer)!=null&&x.options)&&!((a=c.answer)!=null&&a.text)&&(!c.isDependent||c.show)?(c.error={isError:!0,text:"Obligatorio"},t.value=!1):delete c.error}),t.value){let c=h();console.log(h()),v.saveSection(c);let x={};v.setPositionsCurrents(x),console.log("Guardando ...")}};return(c,x)=>(S(),C("div",Et,[d("div",At,[d("pre",null,"                "+U(s.value)+`
            `,1),(S(!0),C(M,null,ue(s.value,(a,p)=>{var n;return S(),C("div",{key:a.id},[d("ul",null,[!a.isDependent||a.show?(S(),C(M,{key:0},[a.type===0?(S(),C("li",jt,[d("div",null,[I(ft,{question:a,modelValue:a.answer.options,"onUpdate:modelValue":[o=>a.answer.options=o,o=>i(o,a,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])])])):a.type===1?(S(),C("li",Ft,[I(H,{modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>i(o,a)],type:"text",label:a.statement,error:a.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):a.type===2?(S(),C("li",Bt,[I(H,{modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>i(o,a)],type:"date",label:a.statement,error:a.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):a.type===3?(S(),C("li",Lt,[I(H,{modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>i(a.answer,a)],type:"number",label:a.statement,error:a.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):a.type===4?(S(),C("li",Nt,[I(Ae,{modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>i(o,a,p)],label:a.statement,error:a.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):a.type===6?(S(),C("li",Mt,[I(Vt,{question:a,modelValue:a.answer.options,"onUpdate:modelValue":[o=>a.answer.options=o,o=>i(o,a,p)]},null,8,["question","modelValue","onUpdate:modelValue"])])):a.type===8?(S(),C("li",zt,[I(H,{modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>r(o,a)],type:"email",label:a.statement,error:a.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):a.type===9?(S(),C("li",Kt,[I(H,{modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>f(o,a)],type:"tel",label:a.statement,error:a.error},null,8,["modelValue","onUpdate:modelValue","label","error"])])):a.type===10?(S(),C("li",Gt,[I(Ut,{question:a,modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>i(a.answer,a)],error:!!a.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),d("div",Ht,[d("span",Yt,U(a.error),1)])])):a.type===11?(S(),C("li",Wt,[I(Pt,{question:a,modelValue:a.answer.text,"onUpdate:modelValue":[o=>a.answer.text=o,o=>i(a.answer,a)],error:!!a.error},null,8,["question","modelValue","onUpdate:modelValue","error"]),d("div",Zt,[d("span",Jt,U((n=a.error)==null?void 0:n.text),1)])])):G("",!0)],64)):G("",!0)])])}),128)),d("div",Qt,[we(c.$slots,"footer",{submit:V})])])]))}};const qt={key:0,class:"pre-loading"},ea={class:"text-xl uppercase mb-4 font-bold"},ta={class:"grid grid-cols-4 gap-4"},aa=d("strong",null," Indicaciones: ",-1),la=d("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),oa=d("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),na={class:"col-span-4 md:col-span-1"},ra={class:"col-span-4 md:col-span-3 rounded-lg bg-white p-4 shadow-lg"},sa={class:""},ia={class:"text-lg font-semibold mb-3 uppercase"},ua={class:"text-sm uppercase mb-4 font-bold"},da={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},ca={class:"flex justify-between"},pa={class:"text-start"},va=d("span",null,"Anterior",-1),ma={class:"text-lg"},fa={class:"text-end"},ba=d("span",null,"Siguiente ",-1),ga={class:"text-lg capitalize"},Ca={__name:"survey",setup(e){const u=new Oe,v=new pe,s=Re(),t=Ce(),l=$(null),i=$([]),g=w(()=>s.sections),r=w(()=>s.currentSurvey),f=w(()=>s.currentTopic),h=w(()=>s.currentSection),V=w(()=>s.nextSection),c=$(!1),x=(o,y,m)=>{s.currentTopic=y.find(P=>P.id===t.params.topic),s.currentSection=m.find(P=>P.id===o.section),s.nextSection=m.find(P=>P.id===s.currentSection.next),s.prevSection=m.find(P=>P.id===s.currentSection.previous)},a=async()=>{let o=await v.getSurvey(t.params.id);if(!o)u.push({name:"home"});else if(l.value=o,o.topic===t.params.topic&&o.section===t.params.section){let y=await v.getTopics(t.params.id),m=await v.getSections(t.params.topic),P=await v.getQuestions(t.params.section);s.topics=y,s.sections=m,i.value=P,x(o,y,m)}else u.back(),s.cont++},p=async()=>{let o=await v.getSurvey(t.params.id);if(!o)u.push({name:"home"});else{l.value=o;let y=await v.getTopics(t.params.id),m=await v.getSections(y[0].id),P=await v.getQuestions(m[0].id);await s.setPositions(o.id,y[0].id,m[0].id)?(s.topics=y,s.sections=m,i.value=P,s.currentTopic=y[0],s.currentSection=m[0],s.nextSection=m.find(b=>b.id===o.section)):u.push({name:"home"})}};return(async()=>{let o=t.params.id,y=t.params.topic,m=t.params.section;y=="null"&&m=="null"?(c.value=!0,await p(),c.value=!1):o&&y&&m?(c.value=!0,await a(),c.value=!1):u.push({name:"home"})})(),(o,y)=>(S(),Y(Ie,null,{default:L(()=>{var m,P,F;return[c.value?(S(),C("div",qt," cargando... ")):(S(),C(M,{key:1},[d("h2",ea,U((m=r.value)==null?void 0:m.title),1),d("div",ta,[I(A($e),{type:"info",class:"col-span-4",ref:"alert"},{default:L(()=>[aa,la,oa]),_:1},512),d("div",na,[I(ke)]),d("div",ra,[d("div",sa,[d("h3",ia,U(f.value.title),1),d("h4",ua,U((P=h.value)==null?void 0:P.title),1)]),g.value.length==0?(S(),C("h4",da," no hay secciones ")):(S(),C(M,{key:1},[((F=i.value)==null?void 0:F.length)>0?(S(),Y(Xt,{key:0,questions:i.value,section:h.value},{footer:L(({submit:b})=>[d("div",ca,[d("div",null,[h.value.previous?(S(),Y(A(ce),{key:0},{default:L(()=>[d("div",pa,[va,d("h5",ma,U(V.value.title),1)])]),_:1})):G("",!0)]),d("div",null,[h.value.next?(S(),Y(A(ce),{key:0,onClick:b},{default:L(()=>[d("div",fa,[ba,d("h5",ga,U(V.value.title),1)])]),_:2},1032,["onClick"])):G("",!0)])])]),_:1},8,["questions","section"])):G("",!0)],64))])])],64))]}),_:1}))}};export{Ca as default};
