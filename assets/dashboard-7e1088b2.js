import{f as se,a as re,_ as q}from"./InputForm-f36e20b0.js";import{_ as N}from"./ButtonPrimary-617dc1cb.js";import{d as X,r as V,b as y,p as ue,e as J,x as ae,y as ee,F as j,f as de,w as ce,i as pe,z as $,n as C,o as h,c as L,a as u,k as M,t as H,A as oe,q as z,m as A,B as ve,C as me,g as K,h as T,j as b,u as U,T as fe}from"./index-de1897b5.js";import{u as P,F as be,w as ge,h as xe,o as O,c as ye,l as Q,K as he,H as W,T as Oe,t as Y,p as Se,N as te,O as _e,a as x}from"./use-outside-click-3d950fb0.js";import{x as ke,a as _,b as Ve,u as we}from"./use-tracked-pointer-013c0e86.js";import{d as Re,e as Ie,r as $e,a as Te}from"./use-controllable-e01e1177.js";import{p as Le}from"./use-text-value-057aeb06.js";function De(t,p){return t===p}var Pe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Pe||{}),Be=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Be||{}),Ce=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ce||{});function Ee(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let ie=Symbol("ListboxContext");function G(t){let p=pe(ie,null);if(p===null){let m=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(m,G),m}return p}let Ne=X({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>De},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:p,attrs:m,emit:g}){let e=V(1),d=V(null),v=V(null),n=V(null),r=V([]),l=V(""),a=V(null),k=V(1);function w(o=i=>i){let i=a.value!==null?r.value[a.value]:null,s=_e(o(r.value.slice()),S=>O(S.dataRef.domRef)),f=i?s.indexOf(i):null;return f===-1&&(f=null),{options:s,activeOptionIndex:f}}let R=y(()=>t.multiple?1:0),[I,E]=Re(y(()=>t.modelValue===void 0?P(R.value,{[1]:[],[0]:void 0}):t.modelValue),o=>g("update:modelValue",o),y(()=>t.defaultValue)),D={listboxState:e,value:I,mode:R,compare(o,i){if(typeof t.by=="string"){let s=t.by;return(o==null?void 0:o[s])===(i==null?void 0:i[s])}return t.by(o,i)},orientation:y(()=>t.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:v,optionsRef:n,disabled:y(()=>t.disabled),options:r,searchQuery:l,activeOptionIndex:a,activationTrigger:k,closeListbox(){t.disabled||e.value!==1&&(e.value=1,a.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,i,s){if(t.disabled||e.value===1)return;let f=w(),S=ke(o===_.Specific?{focus:_.Specific,id:i}:{focus:o},{resolveItems:()=>f.options,resolveActiveIndex:()=>f.activeOptionIndex,resolveId:B=>B.id,resolveDisabled:B=>B.dataRef.disabled});l.value="",a.value=S,k.value=s??1,r.value=f.options},search(o){if(t.disabled||e.value===1)return;let i=l.value!==""?0:1;l.value+=o.toLowerCase();let s=(a.value!==null?r.value.slice(a.value+i).concat(r.value.slice(0,a.value+i)):r.value).find(S=>S.dataRef.textValue.startsWith(l.value)&&!S.dataRef.disabled),f=s?r.value.indexOf(s):-1;f===-1||f===a.value||(a.value=f,k.value=1)},clearSearch(){t.disabled||e.value!==1&&l.value!==""&&(l.value="")},registerOption(o,i){let s=w(f=>[...f,{id:o,dataRef:i}]);r.value=s.options,a.value=s.activeOptionIndex},unregisterOption(o){let i=w(s=>{let f=s.findIndex(S=>S.id===o);return f!==-1&&s.splice(f,1),s});r.value=i.options,a.value=i.activeOptionIndex,k.value=1},select(o){t.disabled||E(P(R.value,{[0]:()=>o,[1]:()=>{let i=$(D.value.value).slice(),s=$(o),f=i.findIndex(S=>D.compare(s,$(S)));return f===-1?i.push(s):i.splice(f,1),i}}))}};be([v,n],(o,i)=>{var s;D.closeListbox(),ge(i,xe.Loose)||(o.preventDefault(),(s=O(v))==null||s.focus())},y(()=>e.value===0)),ue(ie,D),ye(y(()=>P(e.value,{[0]:Q.Open,[1]:Q.Closed})));let c=y(()=>{var o;return(o=O(v))==null?void 0:o.closest("form")});return J(()=>{ae([c],()=>{if(!c.value||t.defaultValue===void 0)return;function o(){D.select(t.defaultValue)}return c.value.addEventListener("reset",o),()=>{var i;(i=c.value)==null||i.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:i,disabled:s,form:f,...S}=t,B={open:e.value===0,disabled:s,value:I.value};return ee(j,[...o!=null&&I.value!=null?Ie({[o]:I.value}).map(([Z,ne])=>ee(se,he({features:re.Hidden,key:Z,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:f,name:Z,value:ne}))):[],W({ourProps:{},theirProps:{...m,...Oe(S,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:B,slots:p,attrs:m,name:"Listbox"})])}}}),Ue=X({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Y()}`}},setup(t,{attrs:p,slots:m,expose:g}){let e=G("ListboxButton");g({el:e.buttonRef,$el:e.buttonRef});function d(l){switch(l.key){case x.Space:case x.Enter:case x.ArrowDown:l.preventDefault(),e.openListbox(),C(()=>{var a;(a=O(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(_.First)});break;case x.ArrowUp:l.preventDefault(),e.openListbox(),C(()=>{var a;(a=O(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(_.Last)});break}}function v(l){switch(l.key){case x.Space:l.preventDefault();break}}function n(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),C(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Ee(()=>{var a;return(a=O(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}let r=Ve(y(()=>({as:t.as,type:p.type})),e.buttonRef);return()=>{var l,a;let k={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:w,...R}=t,I={ref:e.buttonRef,id:w,type:r.value,"aria-haspopup":"listbox","aria-controls":(l=O(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=O(e.labelRef))==null?void 0:a.id,w].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onKeyup:v,onClick:n};return W({ourProps:I,theirProps:R,slot:k,attrs:p,slots:m,name:"ListboxButton"})}}}),je=X({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Y()}`}},setup(t,{attrs:p,slots:m,expose:g}){let e=G("ListboxOptions"),d=V(null);g({el:e.optionsRef,$el:e.optionsRef});function v(l){switch(d.value&&clearTimeout(d.value),l.key){case x.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case x.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),C(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case P(e.orientation.value,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(_.Next);case P(e.orientation.value,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(_.Previous);case x.Home:case x.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(_.First);case x.End:case x.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(_.Last);case x.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),C(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case x.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}let n=Se(),r=y(()=>n!==null?(n.value&Q.Open)===Q.Open:e.listboxState.value===0);return()=>{var l,a,k,w;let R={open:e.listboxState.value===0},{id:I,...E}=t,D={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(w=(a=O(e.labelRef))==null?void 0:a.id)!=null?w:(k=O(e.buttonRef))==null?void 0:k.id,"aria-orientation":e.orientation.value,id:I,onKeydown:v,role:"listbox",tabIndex:0,ref:e.optionsRef};return W({ourProps:D,theirProps:E,slot:R,attrs:p,slots:m,features:te.RenderStrategy|te.Static,visible:r.value,name:"ListboxOptions"})}}}),Ae=X({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Y()}`}},setup(t,{slots:p,attrs:m,expose:g}){let e=G("ListboxOption"),d=V(null);g({el:d,$el:d});let v=y(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),n=y(()=>P(e.mode.value,{[0]:()=>e.compare($(e.value.value),$(t.value)),[1]:()=>$(e.value.value).some(c=>e.compare($(c),$(t.value)))})),r=y(()=>P(e.mode.value,{[1]:()=>{var c;let o=$(e.value.value);return((c=e.options.value.find(i=>o.some(s=>e.compare($(s),$(i.dataRef.value)))))==null?void 0:c.id)===t.id},[0]:()=>n.value})),l=Le(d),a=y(()=>({disabled:t.disabled,value:t.value,get textValue(){return l()},domRef:d}));J(()=>e.registerOption(t.id,a)),de(()=>e.unregisterOption(t.id)),J(()=>{ae([e.listboxState,n],()=>{e.listboxState.value===0&&n.value&&P(e.mode.value,{[1]:()=>{r.value&&e.goToOption(_.Specific,t.id)},[0]:()=>{e.goToOption(_.Specific,t.id)}})},{immediate:!0})}),ce(()=>{e.listboxState.value===0&&v.value&&e.activationTrigger.value!==0&&C(()=>{var c,o;return(o=(c=O(d))==null?void 0:c.scrollIntoView)==null?void 0:o.call(c,{block:"nearest"})})});function k(c){if(t.disabled)return c.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),C(()=>{var o;return(o=O(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function w(){if(t.disabled)return e.goToOption(_.Nothing);e.goToOption(_.Specific,t.id)}let R=we();function I(c){R.update(c)}function E(c){R.wasMoved(c)&&(t.disabled||v.value||e.goToOption(_.Specific,t.id,0))}function D(c){R.wasMoved(c)&&(t.disabled||v.value&&e.goToOption(_.Nothing))}return()=>{let{disabled:c}=t,o={active:v.value,selected:n.value,disabled:c},{id:i,value:s,disabled:f,...S}=t,B={id:i,ref:d,role:"option",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,"aria-selected":n.value,disabled:void 0,onClick:k,onFocus:w,onPointerenter:I,onMouseenter:I,onPointermove:E,onMousemove:E,onPointerleave:D,onMouseleave:D};return W({ourProps:B,theirProps:S,slot:o,attrs:m,slots:p,name:"ListboxOption"})}}});const qe={class:"flex justify-between align-center"},Me={class:"text-base font-semibold mt-2"},Fe={key:0,class:"h-px flex-auto bg-gray-100 my-3"},le={__name:"WrapperSection",props:{listClass:{default:"rounded-lg border-solid border-2 border-gray-100",type:String},title:String,withHeader:{default:!0,type:Boolean}},setup(t){return(p,m)=>(h(),L("div",{class:z(["mt-4",t.listClass])},[u("div",qe,[M(p.$slots,"title",{},()=>[u("h4",Me,H(t.title),1)]),M(p.$slots,"actions")]),t.withHeader?(h(),L("div",Fe)):oe("",!0),M(p.$slots,"inputs"),M(p.$slots,"content")],2))}},ze=["id","value","name"],He=["for"],F={__name:"CheckBoxesFrom",props:{questionIndex:[Number,String],options:Array,modelValue:{type:[Number,Object,String,Array],default:[]}},emits:["update:modelValue"],setup(t,{emit:p}){const m=t,g=y({get:()=>m.modelValue,set:e=>p("update:modelValue",e)});return(e,d)=>(h(!0),L(j,null,A(t.options,(v,n)=>(h(),L("div",{key:v.title,class:"flex items-center my-2"},[ve(u("input",{id:`checkbox-${n}${t.questionIndex}`,type:"checkbox",value:v.id,"onUpdate:modelValue":d[0]||(d[0]=r=>g.value=r),name:`name-${n}${t.questionIndex}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ze),[[me,g.value]]),u("label",{for:`checkbox-${n}${t.questionIndex}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},H(v.title),9,He)]))),128))}},Ke={class:"relative mt-1"},Qe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Xe=["onClick"],We={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-600"},Ge={__name:"HSelect",props:{options:{type:Array,default:[{id:1,title:"Opción 1"},{id:2,title:"Opción 2"}]},itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null}},emits:["update:modelValue"],setup(t,{emit:p}){var d;const m=t,g=y({get:()=>m.modelValue,set:v=>p("update:modelValue",v)}),e=V(g.value?(d=m.options.find(v=>v[`${m.itemValue}`]==g.value))==null?void 0:d[`${m.itemTitle}`]:"Seleccione un item");return(v,n)=>(h(),K(U(Ne),{class:"w-full",modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=r=>g.value=r)},{default:T(()=>[u("div",Ke,[b(U(Ue),{class:"relative block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"},{default:T(()=>[u("span",{class:z(["block truncate text-start ms-2",g.value?"text-black":"text-gray-400"])},H(e.value),3),u("span",Qe,[b(U($e),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),b(fe,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:T(()=>[b(U(je),{class:"absolute mt-1 max-h-60 w-full overflow-auto z-50 rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:T(()=>[(h(!0),L(j,null,A(t.options,r=>(h(),K(U(Ae),{key:r,value:r[`${t.itemValue}`],as:"template"},{default:T(({active:l,selected:a})=>[u("li",{class:z([l?"bg-blue-100 text-blue-900":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"]),onClick:()=>e.value=r[`${t.itemTitle}`]},[u("span",{class:z([a?"font-medium text-blue-600":"font-normal","block truncate"])},H(r[`${t.itemTitle}`]),3),a?(h(),L("span",We,[b(U(Te),{class:"h-5 w-5","aria-hidden":"true"})])):oe("",!0)],10,Xe)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Je={class:"grid grid-cols-7 gap-6"},Ye={class:"col-span-7"},Ze={class:"grid grid-cols-2 gap-4"},et={class:"col-span-2 p-4 bg-white rounded-lg"},tt=u("h2",{class:"text-lg mb-3 font-bold"}," Nueva encuesta",-1),lt={class:"grid grid-cols-4"},at={class:"col-span-2 p-4"},ot={class:"col-span-2 p-4"},it=u("label",{class:"block text-sm font-medium leading-6 text-gray-900"}," Dirigido a:",-1),nt={class:"grid grid-cols-3 gap-4"},st={class:"col-span-2"},rt={class:"col-span-1"},ut=u("label",{class:"block text-sm font-medium leading-6 text-gray-900"}," Tipipo de pregunta ",-1),dt={class:"py2"},ct={class:"section-item bg-gray-200 rounded-md p-3 mt-4"},pt={class:"grid grid-cols-12 gap-1 mt-2"},vt={class:"col-span-10"},mt={class:"col-span-2 flex items-end"},St={__name:"dashboard",setup(t){const p=[{id:"TEXT",title:"Texto"},{id:"NUMBER",title:"Número"},{id:"SELECT",title:"Desplegable"},{id:"RADIO",title:"Opcion unica"},{id:"CHECKBOX",title:"Opcion multiple"}],m=V({title:"Encuesta de ejemplo",secctions:[{title:"Seccion 1",description:"Descripcion de la seccion ",questions:[{statement:"Pregunta",options:[{title:"Opcion"},{title:"Opcion"},{title:"Opcion"}]},{statement:"Pregunta",options:[{title:"Opcion"},{title:"Opcion"},{title:"Opcion"}]}]},{title:"Seccion 2",description:"Descripcion de la seccion ",questions:{statement:"Pregunta",options:[{title:"Opcion"},{title:"Opcion"},{title:"Opcion"}]}}]});return V({id:1,title:"",to:"",topics:[{id:1,title:"",description:"",sections:[{id:1,title:"",description:"",isDependent:"",questions:[{id:1,statement:"",description:"",structure:{type:"TEXT ...",required:!0,inline:!0},options:[{id:1,title:""}]}]}]}]}),(g,e)=>(h(),L("div",Je,[u("div",Ye,[u("div",Ze,[u("div",et,[tt,u("div",lt,[u("div",at,[b(q,{modelValue:m.value.title,"onUpdate:modelValue":e[0]||(e[0]=d=>m.value.title=d),label:"Nombre de la encuesta",placeholder:"Ingrese el nombre de la encuesta"},null,8,["modelValue"])]),u("div",ot,[it,b(F,{options:[{id:1,title:"Estudiantes"},{id:2,title:"Docente"}]})])])]),(h(!0),L(j,null,A(m.value.secctions,(d,v)=>(h(),K(le,{title:"Sección "+(v+1),class:"col-span-2 rounded-lg border-solid border-2 border-gray-100 p-3 bg-white"},{actions:T(()=>[u("div",null,[b(N,{title:"Borrar"}),b(N,{class:"ms-2",title:"Duplicar"})])]),inputs:T(()=>[b(q,{modelValue:d.title,"onUpdate:modelValue":n=>d.title=n,label:"Nombre de sección",placeholder:"Ingrese el nombre de la encuesta"},null,8,["modelValue","onUpdate:modelValue"])]),content:T(()=>[(h(!0),L(j,null,A(d.questions,(n,r)=>(h(),K(le,{title:"Pregunta "+(r+1),class:"p-3 border-t-2 border-gray-400"},{actions:T(()=>[u("div",null,[b(N,{title:"Borrar"}),b(N,{class:"ms-2",title:"Duplicar"})])]),inputs:T(()=>[u("div",nt,[u("div",st,[b(q,{modelValue:n.statement,"onUpdate:modelValue":l=>n.statement=l,label:"Enunciado de la pregunta",placeholder:"Ingrese el enunciado de la pregunta"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",rt,[ut,b(Ge,{options:p})])])]),content:T(()=>[u("div",dt,[b(F,{questionIndex:`${n.id}-required`,options:[{title:"Obligatorio"}]},null,8,["questionIndex"]),b(F,{questionIndex:`${n.id}-inline`,options:[{title:"Inline"}]},null,8,["questionIndex"]),b(F,{questionIndex:`${n.id}-depent`,options:[{title:"Depende de otra pregunta"}]},null,8,["questionIndex"])]),u("div",ct,[(h(!0),L(j,null,A(n.options,(l,a)=>(h(),L("div",pt,[u("div",vt,[b(q,{modelValue:l.title,"onUpdate:modelValue":k=>l.title=k,label:"Opcion "+(a+1),placeholder:"Ingrese la opcion "+(a+1)},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])]),u("div",mt,[b(N,{class:"ms-2",title:"-"}),b(N,{class:"ms-2",title:"+"})])]))),256))])]),_:2},1032,["title"]))),256))]),_:2},1032,["title"]))),256))])])]))}};export{St as default};
