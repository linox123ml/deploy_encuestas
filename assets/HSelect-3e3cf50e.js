import{q as M,r as k,c as m,z as ee,s as z,y as J,x as K,F as X,v as te,p as ae,A as le,U as L,D as I,o as N,j as q,w as C,b as j,e as A,n as $,t as Q,l as B,a as W,d as oe,k as ie,R as ne}from"./index-8f60d439.js";import{d as ue,e as re,r as se,a as de}from"./use-controllable-d61002ef.js";import{u as V,F as ve,d as pe,h as ce,o as x,e as fe,l as E,K as be,H as F,f as me,t as U,p as xe,a as G,O as ge,b as p}from"./use-outside-click-8b70d22b.js";import{x as ye,a as y,b as he,u as Oe}from"./use-tracked-pointer-4d0b9312.js";import{f as Se,a as we}from"./hidden-e98fc8f0.js";import{p as Re}from"./use-text-value-73a41ea4.js";function ke(t,b){return t===b}var Le=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Le||{}),Te=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Te||{}),Ve=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ve||{});function Pe(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let Y=Symbol("ListboxContext");function _(t){let b=le(Y,null);if(b===null){let c=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,_),c}return b}let Ie=M({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ke},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:b,attrs:c,emit:h}){let e=k(1),v=k(null),d=k(null),f=k(null),r=k([]),a=k(""),l=k(null),O=k(1);function S(o=i=>i){let i=l.value!==null?r.value[l.value]:null,n=ge(o(r.value.slice()),g=>x(g.dataRef.domRef)),s=i?n.indexOf(i):null;return s===-1&&(s=null),{options:n,activeOptionIndex:s}}let w=m(()=>t.multiple?1:0),[R,D]=ue(m(()=>t.modelValue===void 0?V(w.value,{[1]:[],[0]:void 0}):t.modelValue),o=>h("update:modelValue",o),m(()=>t.defaultValue)),T={listboxState:e,value:R,mode:w,compare(o,i){if(typeof t.by=="string"){let n=t.by;return(o==null?void 0:o[n])===(i==null?void 0:i[n])}return t.by(o,i)},orientation:m(()=>t.horizontal?"horizontal":"vertical"),labelRef:v,buttonRef:d,optionsRef:f,disabled:m(()=>t.disabled),options:r,searchQuery:a,activeOptionIndex:l,activationTrigger:O,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,i,n){if(t.disabled||e.value===1)return;let s=S(),g=ye(o===y.Specific?{focus:y.Specific,id:i}:{focus:o},{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:P=>P.id,resolveDisabled:P=>P.dataRef.disabled});a.value="",l.value=g,O.value=n??1,r.value=s.options},search(o){if(t.disabled||e.value===1)return;let i=a.value!==""?0:1;a.value+=o.toLowerCase();let n=(l.value!==null?r.value.slice(l.value+i).concat(r.value.slice(0,l.value+i)):r.value).find(g=>g.dataRef.textValue.startsWith(a.value)&&!g.dataRef.disabled),s=n?r.value.indexOf(n):-1;s===-1||s===l.value||(l.value=s,O.value=1)},clearSearch(){t.disabled||e.value!==1&&a.value!==""&&(a.value="")},registerOption(o,i){let n=S(s=>[...s,{id:o,dataRef:i}]);r.value=n.options,l.value=n.activeOptionIndex},unregisterOption(o){let i=S(n=>{let s=n.findIndex(g=>g.id===o);return s!==-1&&n.splice(s,1),n});r.value=i.options,l.value=i.activeOptionIndex,O.value=1},select(o){t.disabled||D(V(w.value,{[0]:()=>o,[1]:()=>{let i=L(T.value.value).slice(),n=L(o),s=i.findIndex(g=>T.compare(n,L(g)));return s===-1?i.push(n):i.splice(s,1),i}}))}};ve([d,f],(o,i)=>{var n;T.closeListbox(),pe(i,ce.Loose)||(o.preventDefault(),(n=x(d))==null||n.focus())},m(()=>e.value===0)),ee(Y,T),fe(m(()=>V(e.value,{[0]:E.Open,[1]:E.Closed})));let u=m(()=>{var o;return(o=x(d))==null?void 0:o.closest("form")});return z(()=>{J([u],()=>{if(!u.value||t.defaultValue===void 0)return;function o(){T.select(t.defaultValue)}return u.value.addEventListener("reset",o),()=>{var i;(i=u.value)==null||i.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:i,disabled:n,form:s,...g}=t,P={open:e.value===0,disabled:n,value:R.value};return K(X,[...o!=null&&R.value!=null?re({[o]:R.value}).map(([H,Z])=>K(Se,be({features:we.Hidden,key:H,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:s,name:H,value:Z}))):[],F({ourProps:{},theirProps:{...c,...me(g,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:P,slots:b,attrs:c,name:"Listbox"})])}}}),De=M({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${U()}`}},setup(t,{attrs:b,slots:c,expose:h}){let e=_("ListboxButton");h({el:e.buttonRef,$el:e.buttonRef});function v(a){switch(a.key){case p.Space:case p.Enter:case p.ArrowDown:a.preventDefault(),e.openListbox(),I(()=>{var l;(l=x(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(y.First)});break;case p.ArrowUp:a.preventDefault(),e.openListbox(),I(()=>{var l;(l=x(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(y.Last)});break}}function d(a){switch(a.key){case p.Space:a.preventDefault();break}}function f(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),I(()=>{var l;return(l=x(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),Pe(()=>{var l;return(l=x(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let r=he(m(()=>({as:t.as,type:b.type})),e.buttonRef);return()=>{var a,l;let O={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...w}=t,R={ref:e.buttonRef,id:S,type:r.value,"aria-haspopup":"listbox","aria-controls":(a=x(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=x(e.labelRef))==null?void 0:l.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:v,onKeyup:d,onClick:f};return F({ourProps:R,theirProps:w,slot:O,attrs:b,slots:c,name:"ListboxButton"})}}}),Be=M({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${U()}`}},setup(t,{attrs:b,slots:c,expose:h}){let e=_("ListboxOptions"),v=k(null);h({el:e.optionsRef,$el:e.optionsRef});function d(a){switch(v.value&&clearTimeout(v.value),a.key){case p.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case p.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),I(()=>{var l;return(l=x(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case V(e.orientation.value,{vertical:p.ArrowDown,horizontal:p.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(y.Next);case V(e.orientation.value,{vertical:p.ArrowUp,horizontal:p.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(y.Previous);case p.Home:case p.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(y.First);case p.End:case p.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(y.Last);case p.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),I(()=>{var l;return(l=x(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case p.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),v.value=setTimeout(()=>e.clearSearch(),350));break}}let f=xe(),r=m(()=>f!==null?(f.value&E.Open)===E.Open:e.listboxState.value===0);return()=>{var a,l,O,S;let w={open:e.listboxState.value===0},{id:R,...D}=t,T={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(S=(l=x(e.labelRef))==null?void 0:l.id)!=null?S:(O=x(e.buttonRef))==null?void 0:O.id,"aria-orientation":e.orientation.value,id:R,onKeydown:d,role:"listbox",tabIndex:0,ref:e.optionsRef};return F({ourProps:T,theirProps:D,slot:w,attrs:b,slots:c,features:G.RenderStrategy|G.Static,visible:r.value,name:"ListboxOptions"})}}}),Ce=M({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${U()}`}},setup(t,{slots:b,attrs:c,expose:h}){let e=_("ListboxOption"),v=k(null);h({el:v,$el:v});let d=m(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),f=m(()=>V(e.mode.value,{[0]:()=>e.compare(L(e.value.value),L(t.value)),[1]:()=>L(e.value.value).some(u=>e.compare(L(u),L(t.value)))})),r=m(()=>V(e.mode.value,{[1]:()=>{var u;let o=L(e.value.value);return((u=e.options.value.find(i=>o.some(n=>e.compare(L(n),L(i.dataRef.value)))))==null?void 0:u.id)===t.id},[0]:()=>f.value})),a=Re(v),l=m(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:v}));z(()=>e.registerOption(t.id,l)),te(()=>e.unregisterOption(t.id)),z(()=>{J([e.listboxState,f],()=>{e.listboxState.value===0&&f.value&&V(e.mode.value,{[1]:()=>{r.value&&e.goToOption(y.Specific,t.id)},[0]:()=>{e.goToOption(y.Specific,t.id)}})},{immediate:!0})}),ae(()=>{e.listboxState.value===0&&d.value&&e.activationTrigger.value!==0&&I(()=>{var u,o;return(o=(u=x(v))==null?void 0:u.scrollIntoView)==null?void 0:o.call(u,{block:"nearest"})})});function O(u){if(t.disabled)return u.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),I(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function S(){if(t.disabled)return e.goToOption(y.Nothing);e.goToOption(y.Specific,t.id)}let w=Oe();function R(u){w.update(u)}function D(u){w.wasMoved(u)&&(t.disabled||d.value||e.goToOption(y.Specific,t.id,0))}function T(u){w.wasMoved(u)&&(t.disabled||d.value&&e.goToOption(y.Nothing))}return()=>{let{disabled:u}=t,o={active:d.value,selected:f.value,disabled:u},{id:i,value:n,disabled:s,...g}=t,P={id:i,ref:v,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":f.value,disabled:void 0,onClick:O,onFocus:S,onPointerenter:R,onMouseenter:R,onPointermove:D,onMousemove:D,onPointerleave:T,onMouseleave:T};return F({ourProps:P,theirProps:g,slot:o,attrs:c,slots:b,name:"ListboxOption"})}}});const je={class:"relative mt-1"},Ae={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ne=["onClick"],Ee={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-600"},He={__name:"HSelect",props:{options:{type:Array,default:[{id:1,title:"Opción 1"},{id:2,title:"Opción 2"}]},itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null}},emits:["update:modelValue"],setup(t,{emit:b}){var v;const c=t,h=m({get:()=>c.modelValue,set:d=>b("update:modelValue",d)}),e=k(h.value?(v=c.options.find(d=>d[`${c.itemValue}`]==h.value))==null?void 0:v[`${c.itemTitle}`]:"Seleccione un item");return(d,f)=>(N(),q(B(Ie),{class:"w-full",modelValue:h.value,"onUpdate:modelValue":f[0]||(f[0]=r=>h.value=r)},{default:C(()=>[j("div",je,[A(B(De),{class:"relative block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"},{default:C(()=>[j("span",{class:$(["block truncate text-start ms-2",h.value?"text-black":"text-gray-400"])},Q(e.value),3),j("span",Ae,[A(B(se),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),A(ne,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[A(B(Be),{class:"absolute mt-1 max-h-60 w-full overflow-auto z-50 rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:C(()=>[(N(!0),W(X,null,oe(t.options,r=>(N(),q(B(Ce),{key:r,value:r[`${t.itemValue}`],as:"template"},{default:C(({active:a,selected:l})=>[j("li",{class:$([a?"bg-blue-100 text-blue-900":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"]),onClick:()=>e.value=r[`${t.itemTitle}`]},[j("span",{class:$([l?"font-medium text-blue-600":"font-normal","block truncate"])},Q(r[`${t.itemTitle}`]),3),l?(N(),W("span",Ee,[A(B(de),{class:"h-5 w-5","aria-hidden":"true"})])):ie("",!0)],10,Ne)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};export{He as _};
